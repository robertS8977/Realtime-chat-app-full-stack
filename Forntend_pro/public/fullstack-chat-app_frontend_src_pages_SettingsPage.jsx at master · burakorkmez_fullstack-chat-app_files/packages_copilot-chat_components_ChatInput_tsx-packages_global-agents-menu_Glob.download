"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["lazy-react-partial-actions-survey","lazy-react-partial-configure-mcp-server-partial","lazy-react-partial-date-picker-partial","lazy-react-partial-enterprise-team","lazy-react-partial-ref-selector-partial","lazy-react-partial-single-sign-on-dropdown-partial","packages_action-bar_src_OverflowMenu_module_css-packages_action-bar_src_VisibleAndOverflowCon-b3dff3","packages_configure-mcp-server-partial_McpServerDialog_module_css-packages_copilot-chat_compon-eccf3d","packages_copilot-chat_components_ChatInput_tsx-packages_global-agents-menu_GlobalAgentsMenu_t-f1d2b2"],{15518:(e,t,n)=>{n.d(t,{A:()=>r});let r={referenceToken:"ReferenceToken-module__referenceToken--WsIyo",small:"ReferenceToken-module__small--JKhUS",fullWidth:"ReferenceToken-module__fullWidth--b7qQo",loadingName:"ReferenceToken-module__loadingName--tXmXP",name:"ReferenceToken-module__name--nPIg4",description:"ReferenceToken-module__description--Md3k_",trailingVisual:"ReferenceToken-module__trailingVisual--X22Ay",removeButton:"ReferenceToken-module__removeButton--BwDIm",icon:"ReferenceToken-module__icon--YHCrp",openIcon:"ReferenceToken-module__openIcon--SCaYN",closedIcon:"ReferenceToken-module__closedIcon--McXYG",pullRequestClosedIcon:"ReferenceToken-module__pullRequestClosedIcon--qLOQA",pullRequestMergedIcon:"ReferenceToken-module__pullRequestMergedIcon--yvGds",figmaIconOuter:"ReferenceToken-module__figmaIconOuter--sVqOV",figmaIcon:"ReferenceToken-module__figmaIcon--lsVAI",nodeIconOuter:"ReferenceToken-module__nodeIconOuter--ooSEn"}},6224:(e,t,n)=>{n.d(t,{A:()=>r});let r={container:"UserMessage-module__container--qQMdD",mention:"UserMessage-module__mention--iKJnY"}},62227:(e,t,n)=>{n.d(t,{A:()=>r});let r={Box:"SingleSignOnBanner-module__Box--jDDJV",Flash:"SingleSignOnBanner-module__Flash--OYpTa",Box_1:"SingleSignOnBanner-module__Box_1--f7GQK",Octicon:"SingleSignOnBanner-module__Octicon--Mg3jx",Box_2:"SingleSignOnBanner-module__Box_2--Se3Ze",ForceWrap:"SingleSignOnBanner-module__ForceWrap--Vz1Sn",Paragraph:"SingleSignOnBanner-module__Paragraph--jaDvQ",ProtectedOrgs_FullList:"SingleSignOnBanner-module__ProtectedOrgs_FullList--siZfg",ProtectedOrgs_Shortened:"SingleSignOnBanner-module__ProtectedOrgs_Shortened--G8LoG",ShieldLockIcon:"SingleSignOnBanner-module__ShieldLockIcon--k2b_L"}},67154:(e,t,n)=>{n.d(t,{Y:()=>r,w:()=>a});let r={InProgress:"in_progress",Completed:"completed",Failed:"failed",Idle:"idle",WaitingForUser:"waiting_for_user",TimedOut:"timed_out",Cancelled:"cancelled",Queued:"queued"};function a(e){switch(e){case r.InProgress:return"In progress";case r.Completed:return"Ready for review";case r.Failed:return"Failed";case r.Idle:return"Idle";case r.WaitingForUser:return"Waiting for user";case r.TimedOut:return"Timed out";case r.Cancelled:return"Cancelled";case r.Queued:return"Queued";default:return"Unknown"}}},55899:(e,t,n)=>{n.d(t,{u:()=>r});function r(){return crypto.randomUUID()}},6665:(e,t,n)=>{n.d(t,{T:()=>d});var r=n(78314),a=n(25407),i=n(91747),s=n(30459),o=n(96379),l=n(96540),c=n(35898);function d(){let{sendAnalyticsEvent:e}=(0,s.s)(),t=function(){let e=function(){let e=(0,r.t)(),t=(0,c.i)();return(0,l.useMemo)(()=>({react_app:"code-view",repository_id:e.id,repository_nwo:`${e.ownerLogin}/${e.name}`,repository_public:e.public,repository_is_fork:e.isFork,actor_id:t?.id,actor_login:t?.login}),[e,t])}(),t=(0,r.t)(),n=(0,a.yH8)(a.tTz,{owner:t.ownerLogin,repo:t.name});return(0,l.useCallback)((t,r,a)=>{let i={target:t,interaction:r,context:a,...e,...{url:window.location.href,user_agent:window.navigator.userAgent,browser_width:window.innerWidth,browser_languages:window.navigator.languages.join(",")}};(0,o.lS)(n,{method:"POST",body:i})},[e,n])}(),n=(0,i.u)("code_nav_ui_events");return{sendRepoClickEvent:(0,l.useCallback)((r,a={})=>{e("repository.click",r,a),n&&t(r,"click",a)},[e,t,n]),sendRepoKeyDownEvent:(0,l.useCallback)((r,a={})=>{e("repository.keydown",r,a),n&&t(r,"keydown",a)},[e,t,n]),sendStats:(0,l.useCallback)((r,a={})=>{e(r,"",a),n&&t(r,"stats",a)},[e,t,n]),sendMarketplaceActionEvent:(0,l.useCallback)((t,n={})=>{e("marketplace.action.click",t,n)},[e])}}},54030:(e,t,n)=>{n.d(t,{o:()=>u});var r=n(5225),a=n(78314),i=n(25407),s=n(96379),o=n(96540);async function l(e){let t=await (0,s.lS)(e);return t.ok?await t.json():void 0}let c=new Map,d=(0,r.A)(l,{cache:c});function u(e,t,n){let r=(0,a.t)(),[s,l]=(0,o.useState)({list:[],directories:[],loading:!0}),c=(0,i.ClY)({repo:r,commitOid:e,includeDirectories:!n});return(0,o.useEffect)(()=>{let e=!1,n=async()=>{l({list:[],directories:[],loading:!0});let t=await d(c);if(e)return;let n=t?.paths||[],r=t?.directories||[];l({list:n.concat(r).sort(),directories:r,error:!t})};return t&&n(),function(){e=!0}},[c,t,n]),s}},19189:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(53552),a=n(78314),i=n(25407),s=n(54571),o=n(96540);function l(){let e=(0,a.t)(),{path:t,action:n,refInfo:l}=(0,r.eu)(),[c]=(0,s.I)(()=>!1,!0,[]);function d(e){return e?`?${e}`:""}function u(e){return c?"":void 0===e?window.location.hash:e?`#${e}`:""}return{getItemUrl:o.useCallback(t=>(0,i.IO9)({repo:e,commitish:l.name,action:"directory"===t.contentType?"tree":"blob",path:t.path}),[e.ownerLogin,e.name,l.name]),getUrl(r={}){let a=(0,i.IO9)({repo:e,commitish:r.commitish||l.name,action:r.action||n,path:r.path||t})+function({params:e,hash:t}){return d(e)+u(t)}(r);return r.absolute?new URL(a,window.location.origin).href:a},createPermalink(r={}){let a=(0,i.IO9)({repo:e,commitish:l.currentOid,action:r.action||n,path:r.path||t})+function({params:e,hash:t}){return d(e)+u(t)}(r);return r.absolute?new URL(a,window.location.origin).href:a},isCurrentPagePermalink:()=>!c&&l.name===l.currentOid&&window.location.pathname.includes(l.currentOid)}}},7808:(e,t,n)=>{n.d(t,{z:()=>WebWorker});var r=n(35750),a=n(18150),i=n(85242),s=n(50467);let WebWorker=class WebWorker{set onmessage(e){this.worker.onmessage=e}postMessage(e){this.worker.postMessage(e)}terminate(){this.worker.terminate()}constructor(e,t){(0,s._)(this,"worker",void 0);try{this.worker=new Worker(`${e}?module=true`,{type:"module"})}catch{console.warn("Web workers are not available. Please enable web workers to benefit from the improved performance."),this.worker=new MainThreadWorker(t)}}};var o=new WeakMap,l=new WeakMap;let MainThreadWorker=class MainThreadWorker{async postMessage(e){if((0,r._)(this,o))return;let t={data:(0,r._)(this,l).call(this,{data:e})};this.onmessage?.(t)}terminate(){(0,i._)(this,o,!0)}constructor(e){(0,a._)(this,o,{writable:!0,value:!1}),(0,s._)(this,"onmessage",void 0),(0,a._)(this,l,{writable:!0,value:void 0}),(0,i._)(this,l,e)}}},64642:(e,t,n)=>{n.d(t,{j:()=>s});var r=n(5225),a=n(91385);let i=(0,r.A)(a.fN);function s({data:e}){let{query:t,baseList:n,startTime:r}=e,s=t.replaceAll("\\","");return{query:t,list:n.filter(e=>{var t,n;return t=e,""===(n=s)||(0,a.qA)(n,t)&&i(n,t)>0}).sort((e,t)=>i(s,t)-i(s,e)),baseCount:n.length,startTime:r}}},7730:(e,t,n)=>{n.d(t,{g:()=>i});var r=n(21728),a=n(96540);function i(e){let t,n=(0,r.c)(2),[i,s]=(0,a.useState)(!1);return n[0]!==e.current?(t=()=>{let t=e.current,n=t?.lastElementChild;if(!n)return;let r=new IntersectionObserver(e=>{let[t]=e;return s(t?.isIntersecting??!0)},{root:t,threshold:1});return r.observe(n),()=>r.disconnect()},n[0]=e.current,n[1]=t):t=n[1],(0,a.useEffect)(t),i}},26408:(e,t,n)=>{n.d(t,{U:()=>d});var r=n(16654),a=n(82490),i=n(96540),s=n(18312),o=n(2635),l=n(33592),c=n(23657);function d(e,t,n,m,h=!1){let[p,f]=(0,i.useState)(),g=(0,i.useCallback)(()=>f(void 0),[]),{topRepositoriesCache:y,currentRepository:x}=(0,o.Pk)(),_=(0,l.b)(),[v,S]=(0,i.useState)([]),[E,C]=(0,i.useState)(!y&&"initial"),b=(0,i.useRef)(void 0),w=(0,s.useRelayEnvironment)(),R=m&&""!==m.trim();if(p&&!y&&!e&&!R){let e=u(p||[]),{ownerLogin:t,name:n}=x??{};x&&!e.find(e=>`${e.ownerLogin}/${e.name}`==`${t}/${n}`)&&e.splice(0,0,{databaseId:x.id,isInOrganization:"Organization"===x.ownerType,name:x.name,nwo:`${x.ownerLogin}/${x.name}`,ownerLogin:x.ownerLogin,ownerAvatarUrl:`/${x.ownerLogin}.png?s=40`}),setTimeout(()=>_.setTopRepositoryTopics(e),10),C(!1),f(void 0)}let N=(0,i.useCallback)(async()=>{try{let e=await (0,r.St)(w,{first:n,owner:R?m:void 0});f(e)}catch{}finally{C(!1)}},[R,m,w,f,n]);return((0,i.useEffect)(()=>{t&&!R&&N()},[N,R,t,m]),(0,i.useEffect)(()=>{let t=async e=>{C(!0);let{repositories:t}=await (0,r.vO)(w,{query:R?(0,c.rl)(m,e,h):(0,a.J)(e,{includeForks:h}),onStart:e=>{b.current?.unsubscribe(),b.current=e}});S(t.length?u(t):[]),C(!1)};e||R?t(e):y&&S(y)},[e,R,m,w,y,h]),(0,i.useEffect)(()=>{_.setTopRepositoryTopics(void 0)},[_,m]),!y||e||R)?{repositories:v,loading:E,resetTopRepoResults:g}:{repositories:y,loading:!1,resetTopRepoResults:g}}function u(e){return e.map(({owner:{login:e,avatarUrl:t},isInOrganization:n,name:r,databaseId:a})=>({databaseId:a??0,isInOrganization:n,name:r,nwo:`${e}/${r}`,ownerLogin:e,ownerAvatarUrl:t}))}},14521:(e,t,n)=>{n.d(t,{G:()=>c});var r=n(21728),a=n(79802),i=n(96540),s=n(2635),o=n(23657),l=n(72303);function c(){let e,t=(0,r.c)(1),n=(0,i.useRef)(null);t[0]===Symbol.for("react.memo_cache_sentinel")?(e=e=>{let t=(0,l.W)(e),r=(0,a.O)(t);return(0,o.Ym)(n.current,r)?n.current:(n.current=r,r)},t[0]=e):e=t[0];let c=(0,s.pn)(e);return(0,o.iI)()||c}},99054:(e,t,n)=>{n.d(t,{JE:()=>f,Z3:()=>h,bn:()=>m,kw:()=>g,qj:()=>p});var r=n(21728),a=n(97286),i=n(8625),s=n(96540),o=n(14521),l=n(25641),c=n(2635),d=n(33592),u=n(72206);let m="https://github.com/marketplace?type=apps&copilot_app=true",h="@",p=/^@(?<slug>\S+)$/;function f(e){let t,n,i,s,m,h,p=(0,r.c)(25),{agentsPath:f,model:g}=(0,c.bP)("agentsPath","model"),y=(0,u.tD)(),x=(0,d.b)(),_=!!(0,o.G)(),v=g?.hasLimitedCapabilities;p[0]!==y||p[1]!==_||p[2]!==v?(t=e=>{let{messages:t}=y();if(v||_)return{agents:[],showLimit:!1};let n=(0,l.Q7)(t)[0];return n?{agents:e.filter(e=>e.slug===n.name),showLimit:e.length>1}:{agents:e,showLimit:!1}},p[0]=y,p[1]=_,p[2]=v,p[3]=t):t=p[3];let S=t;p[4]!==f?(n=["copilot-chat","agents",f],p[4]=f,p[5]=n):n=p[5],p[6]!==f||p[7]!==x?(i=()=>f?x.fetchAgents(f):[],p[6]=f,p[7]=x,p[8]=i):i=p[8];let E=(void 0===e||e)&&!v&&!_;p[9]!==S||p[10]!==n||p[11]!==i||p[12]!==E?(s={queryKey:n,queryFn:i,select:S,enabled:E},p[9]=S,p[10]=n,p[11]=i,p[12]=E,p[13]=s):s=p[13];let{isLoading:C,data:b,refetch:w,isStale:R,isFetched:N}=(0,a.I)(s);p[14]!==b||p[15]!==N||p[16]!==R||p[17]!==w?(m=async()=>!N||R?(await w()).data:b,p[14]=b,p[15]=N,p[16]=R,p[17]=w,p[18]=m):m=p[18];let j=m,I=b?.agents,A=b?.showLimit??!1;return p[19]!==j||p[20]!==C||p[21]!==I||p[22]!==A||p[23]!==v?(h={loading:C,disabled:v,availableAgents:I,showLimit:A,imperativelyFetch:j},p[19]=j,p[20]=C,p[21]=I,p[22]=A,p[23]=v,p[24]=h):h=p[24],h}function g({inputOnChange:e,inputRef:t}){let n=(0,i.H)({inputRef:t,fallbackEventHandler:e});return(0,s.useCallback)((e="")=>{t.current?.value&&n(" ",[0,0]);let r=`${h}${e}`;n(r,[0,0],r.length)},[n,t])}},26875:(e,t,n)=>{n.d(t,{O:()=>r});function r(e,t){let n={};for(let r of e){let e=t(r);n[e]??(n[e]=[]),n[e].push(r)}return n}},39619:(e,t,n)=>{n.d(t,{HS:()=>s,Oc:()=>i,Tv:()=>c,Xr:()=>SymbolChangedEvent,f7:()=>o,fD:()=>l,qR:()=>a});var r=n(50467);let OpenCopilotChatEvent=class OpenCopilotChatEvent extends Event{constructor(e){super("open-copilot-chat",{bubbles:!1,cancelable:!0}),(0,r._)(this,"payload",void 0),this.payload=e}};Event;let AddCopilotChatReferenceEvent=class AddCopilotChatReferenceEvent extends Event{constructor(e,t=!1,n){super("add-copilot-chat-reference",{bubbles:!1,cancelable:!0}),(0,r._)(this,"reference",void 0),(0,r._)(this,"openPanel",void 0),(0,r._)(this,"id",void 0),this.reference=e,this.openPanel=t,this.id=n}};let SymbolChangedEvent=class SymbolChangedEvent extends Event{constructor(e){super("symbol-changed",{bubbles:!1,cancelable:!0}),(0,r._)(this,"context",void 0),this.context=e}};function a(e){window.dispatchEvent(new OpenCopilotChatEvent(e))}function i(e,t=!1,n){window.dispatchEvent(new AddCopilotChatReferenceEvent(e,t,n))}function s(e){return window.addEventListener("open-copilot-chat",e),()=>{window.removeEventListener("open-copilot-chat",e)}}function o(e){return window.addEventListener("add-copilot-chat-reference",e),()=>{window.removeEventListener("add-copilot-chat-reference",e)}}function l(e){return window.addEventListener("search-copilot-chat",e),()=>{window.removeEventListener("search-copilot-chat",e)}}function c(e){return window.addEventListener("symbol-changed",e),()=>{window.removeEventListener("symbol-changed",e)}}},57448:(e,t,n)=>{n.d(t,{Ld:()=>g,M8:()=>y,Tz:()=>E,W5:()=>m,cx:()=>f,r_:()=>S,vn:()=>v,xG:()=>h});var r=n(21728),a=n(51987),i=n(97665),s=n(40458),o=n(94747),l=n(97286),c=n(96379),d=n(96540),u=n(79064);n(2635),n(33592);let m={Unindexed:"not_indexed",Indexed:"indexed",Indexing:"indexing",PartiallyIndexed:"partially_indexed",Unknown:"unknown"},h={Requested:"requested",NotFound:"not_found",Unauthorized:"unauthorized",ServiceUnavailable:"service_unavailable",QuotaExhausted:"quota_exhausted",Forbidden:"forbidden",CanIndex:"ok",IndexingError:"indexing_error",RequestFailed:"request_failed",Unknown:"unknown"},p=[h.NotFound,h.Unauthorized,h.ServiceUnavailable,h.QuotaExhausted,h.Forbidden,h.RequestFailed],f=256,g=400;function y(e){var t,n;let a,l,c,d,u,f,g,y,v,S,E=(0,r.c)(22),C=(0,i.jE)();E[0]!==C||E[1]!==e?(a=()=>Promise.all(e.map(e=>C.invalidateQueries({queryKey:["copilot-chat","repos-indexing-state",e]}))),E[0]=C,E[1]=e,E[2]=a):a=E[2];let w=a;E[3]!==e?(l=e.map(_),E[3]=e,E[4]=l):l=E[4],E[5]!==l?(c={queries:l},E[5]=l,E[6]=c):c=E[6];let j=(0,s.E)(c);E[7]===Symbol.for("react.memo_cache_sentinel")?(d=["repos-indexing-state"],E[7]=d):d=E[7],E[8]!==e?(u=()=>b(e),E[8]=e,E[9]=u):u=E[9],E[10]!==w||E[11]!==u?(f={mutationKey:d,mutationFn:u,onSuccess:w},E[10]=w,E[11]=u,E[12]=f):f=E[12];let{mutate:I}=(0,o.n)(f);E[13]!==j?(g={requestStatus:0===(n=(t=j.map(x)).map(e=>e.requestStatus)).length?h.Unknown:n.some(e=>p.includes(e))?h.IndexingError:n.every(e=>e===h.CanIndex)?h.CanIndex:(n.every(e=>e===h.Unknown),h.Unknown),code:R(t.map(e=>e.code)),docs:R(t.map(e=>e.docs)),remainingRepoIndexTokens:t[0]?.remainingRepoIndexTokens},E[13]=j,E[14]=g):g=E[14];let A=g,T=A.code===m.Indexing&&A.requestStatus!==h.IndexingError;return E[15]!==w?(y=()=>void w(),E[15]=w,E[16]=y):y=E[16],N(y,1e4*!!T),E[17]!==I?(v=()=>I(),E[17]=I,E[18]=v):v=E[18],E[19]!==A||E[20]!==v?(S=[A,v],E[19]=A,E[20]=v,E[21]=S):S=E[21],S}function x(e){return e.data}function _(e){return{queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>C(e),placeholderData:{requestStatus:h.Unknown,code:m.Unknown,docs:m.Unknown},staleTime:1/0}}function v(e){let t,n,a,s,c,d,u,p,f,g,y,x=(0,r.c)(23),_=(0,i.jE)();x[0]!==_||x[1]!==e?(t=()=>Promise.resolve(_.invalidateQueries({queryKey:["repo-indexing-state",e]})),x[0]=_,x[1]=e,x[2]=t):t=x[2];let v=t;x[3]!==e?(n=["copilot-chat","repo-indexing-state",e],a=()=>C(e),x[3]=e,x[4]=n,x[5]=a):(n=x[4],a=x[5]),x[6]===Symbol.for("react.memo_cache_sentinel")?(s={requestStatus:h.Unknown,code:m.Unknown,docs:m.Unknown},x[6]=s):s=x[6],x[7]!==n||x[8]!==a?(c={queryKey:n,queryFn:a,placeholderData:s,staleTime:1/0},x[7]=n,x[8]=a,x[9]=c):c=x[9];let S=(0,l.I)(c);x[10]===Symbol.for("react.memo_cache_sentinel")?(d=["repo-indexing-state"],x[10]=d):d=x[10],x[11]!==e?(u=()=>b([e]),x[11]=e,x[12]=u):u=x[12],x[13]!==v||x[14]!==u?(p={mutationKey:d,mutationFn:u,onSuccess:v},x[13]=v,x[14]=u,x[15]=p):p=x[15];let{mutate:E}=(0,o.n)(p),w=S.data,R=w.code===m.Indexing&&w.requestStatus!==h.IndexingError;return x[16]!==v?(f=()=>void v(),x[16]=v,x[17]=f):f=x[17],N(f,1e4*!!R),x[18]!==E?(g=()=>E(),x[18]=E,x[19]=g):g=x[19],x[20]!==w||x[21]!==g?(y=[w,g],x[20]=w,x[21]=g,x[22]=y):y=x[22],y}function S(e){let t,n=(0,r.c)(2);n[0]!==e?(t={queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>w(e),staleTime:1/0},n[0]=e,n[1]=t):t=n[1];let a=(0,l.I)(t);return!a.isError&&!!a.data?.canChat}function E(){let e=u.Jt.getPanelHeight(),t=u.Jt.getPanelWidth(),n=(0,d.useRef)(null),r=(0,d.useRef)(e),a=(0,d.useRef)(e),i=(0,d.useRef)(null),s=(0,d.useRef)(t),o=(0,d.useRef)(t),[l,c]=(0,d.useState)(e),[m,h]=(0,d.useState)(t),p=(0,d.useRef)(0);(0,d.useEffect)(()=>{p.current=parseFloat(getComputedStyle(document.documentElement).fontSize)},[]);let y=e=>Math.min(Math.max(e,f),window.innerHeight-p.current),x=e=>Math.min(Math.max(e,g),window.innerWidth-2*p.current),_=(0,d.useCallback)(e=>{if(null!==n.current){let t=n.current-e.clientY,i=y(r.current+t);c(i),a.current=i}if(null!==i.current){let t=i.current-e.clientX,n=x(s.current+t);h(n),o.current=n}},[]),v=(0,d.useCallback)(()=>{window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",v),null!==n.current&&(u.Jt.setPanelHeight(a.current),n.current=null),null!==i.current&&(u.Jt.setPanelWidth(o.current),i.current=null)},[_]),S=(0,d.useCallback)((e,t,a)=>{0===e.button&&(e.preventDefault(),a&&(n.current=e.clientY,r.current=l),t&&(i.current=e.clientX,s.current=m),window.addEventListener("mousemove",_),window.addEventListener("mouseup",v))},[l,m,_,v]),E=(0,d.useCallback)(e=>{if("ArrowUp"===e.key){let t=y(l+4);c(t),u.Jt.setPanelHeight(t),e.preventDefault()}else if("ArrowDown"===e.key){let t=y(l-4);c(t),u.Jt.setPanelHeight(t),e.preventDefault()}else if("ArrowRight"===e.key){let t=x(m-4);h(t),u.Jt.setPanelWidth(t),e.preventDefault()}else if("ArrowLeft"===e.key){let t=x(m+4);h(t),u.Jt.setPanelWidth(t),e.preventDefault()}},[l,m]);return{panelWidth:m,panelHeight:l,startResize:S,onResizerKeyDown:E}}async function C(e){let t=await fetch(`/search/check_indexing_status?nwo=${encodeURIComponent(e)}`,{headers:{Accept:"application/json",...(0,a.kt)()}});if(!t.ok)return{requestStatus:h.RequestFailed,code:m.Unknown,docs:m.Unknown};let n=await t.json();return{requestStatus:n.can_index,code:n.code_status,docs:n.docs_status}}async function b(e){let t=1===e.length?`nwo=${encodeURIComponent(e[0])}`:`nwos=${encodeURIComponent(JSON.stringify(e))}`;return(0,c.DI)(`/search/index_embeddings?${t}&index_code=true`,{method:"POST"})}async function w(e){let t=await fetch(`/github-copilot/docs/docsets/kb_indexed_repos?ids=${encodeURIComponent(JSON.stringify(e))}`,{headers:{Accept:"application/json",...(0,a.kt)()}});return t.ok?await t.json():{canChat:!1}}function R(e){return e.every(e=>e===m.Indexed)?m.Indexed:e.every(e=>e===m.Unindexed)?m.Unindexed:e.some(e=>e===m.Indexing)?m.Indexing:e.some(e=>e===m.Unindexed)?m.PartiallyIndexed:m.Unknown}function N(e,t){let n,a,i,s,o=(0,r.c)(6),l=(0,d.useRef)(void 0),c=(0,d.useRef)(e);return o[0]!==e?(n=()=>{c.current=e},a=[e],o[0]=e,o[1]=n,o[2]=a):(n=o[1],a=o[2]),(0,d.useEffect)(n,a),o[3]!==t?(i=()=>{if(t>0)return l.current=window.setInterval(()=>c.current(),t),()=>window.clearInterval(l.current)},s=[t],o[3]=t,o[4]=i,o[5]=s):(i=o[4],s=o[5]),(0,d.useEffect)(i,s),l}},60905:(e,t,n)=>{n.d(t,{s:()=>CopilotImageAttacher});var r=n(50467),a=n(53419),i=n(25641),s=n(35247),o=n(76166),l=n(30456);let c=["image/gif","image/jpeg","image/png","image/webp"];let CopilotImageAttacher=class CopilotImageAttacher{static getAllowedImageFileExtensions(e){return this.getFileExtensions(e).join(",")}static isTypeAllowed(e,t){return e=e.toLowerCase(),this.getMimeTypes(t).includes(e)}static getAllowedFiles(e,t){let[n,r]=e.reduce(([e,n],r)=>this.isTypeAllowed(r.type,t)?[[...e,r],n]:[e,[...n,r]],[[],[]]);return[n,r]}static getAttachmentLimit(){return s.W.attachMultipleImages?4:1}static getAttachmentSizeLimit(){return 3932160}static makeImageReference(e,t){let n=crypto.randomUUID(),r=new l.N(n,e,t);return{id:n,attachment:r,type:"image",name:e.name||"Image"}}static getFileExtensions(e){if(Array.isArray(e))return Array.from(new Set(e.flatMap(e=>this.getFileExtensions(e))));let t=this.getMimeTypes(e).map(e=>`.${e.split("/")[1]}`);return t.includes(".jpeg")&&t.push(".jpg"),t}static getMimeTypes(e){return Array.isArray(e)?Array.from(new Set(e.flatMap(e=>this.getMimeTypes(e)))):e.capabilities.limits.vision?e.capabilities.limits.vision.supported_media_types.filter(e=>c.includes(e)):[]}async addImageAttachments(e,t="unknown",n,r=!1){if(0===e.length)return[];let l=null,c=this.state.selectedThreadID,d=this.manager.getPendingThreadId(n),u=s.W.visionSkipThreadCreate;if(n&&!c&&d&&(c=d),!c&&!u)try{c=(l=await this.manager.createThread({customCopilotId:n,preventThreadSelection:r})).id}catch(t){let e="An error occurred creating the thread. Sending a single message should create a new thread.";throw t instanceof Error&&(e||(e=t.message)),this.manager.addAmbientError(e),Error(e)}let m=this.state.currentReferences.filter(e=>"image"===e.type).length,h=CopilotImageAttacher.getAttachmentLimit();if(m+e.length>h){let e=s.W.attachMultipleImages?`You can add up to ${h} image files per message.`:"Only one image can be uploaded at a time";return this.manager.addAmbientError(e),(0,o.d)("file_limit_reached"),[]}let p=[],f=[];for(let n of e){if(!CopilotImageAttacher.isTypeAllowed(n.type,this.state.model))return(0,o.d)("included_unsupported_file",{fileTypes:n.type,uploadType:t}),[];if(n.size>CopilotImageAttacher.getAttachmentSizeLimit())return this.manager.addAmbientError("Only images below 3.75MB are supported"),(0,o.d)("size_limit_exceeded",{size:n.size}),[];if(null==c&&!u)throw this.manager.addAmbientError("Please manually create a thread before uploading an image"),Error("ThreadID resolution for image attachment is not functioning properly");let e=CopilotImageAttacher.makeImageReference(n,c);if(this.state.model.id.startsWith("claude")&&this.state.model.capabilities.supports.vision){let t=await e.attachment.getDimensions();if(t.width&&t.height&&(t.width>8e3||t.height>8e3)){this.manager.addAmbientError("The image you uploaded exceeds the maximum allowed dimensions for Claude models. Please try again with another model."),(0,o.d)("dimension_limit_exceeded",{width:t.width,height:t.height});continue}}let r=(0,i.Vc)(n.name);this.manager.addReference(r,"image-attacher"),0===f.length&&this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0}),f.push({file:n,placeholder:r,reference:e})}return await Promise.all(f.map(async({file:e,placeholder:n,reference:r})=>{try{l&&await r.attachment.prefetch(),this.manager.setImageAttachmentUploaded(r.id,r.attachment),this.manager.replaceReference(n,r),(0,a.BI)("dotcom_chat.vision.image_added",{uploadType:t}),p.push(r)}catch(r){this.manager.removeReference(n);let t="An unexpected error occurred while reading the file";if("string"==typeof r)throw this.manager.addAmbientError(`An error occurred uploading the attachment ${e.name}`),(0,o.d)("ErrorString",{message:r}),Error(r);if(r instanceof Error)if((0,o.d)(r.name,{message:r.message}),"GenericServerError"===r.name&&r.message.includes("Error creating policy"))this.manager.addAmbientError(t);else throw this.manager.addAmbientError(t),r;else throw this.manager.addAmbientError(t),r}})).finally(()=>{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}),r&&n&&l&&this.manager.setPendingThreadId(l.id,n),p}constructor(e,t){(0,r._)(this,"state",void 0),(0,r._)(this,"manager",void 0),this.state=e,this.manager=t}}},76166:(e,t,n)=>{n.d(t,{d:()=>a});var r=n(53419);function a(e,t){(0,r.BI)("dotcom_chat.vision.error",{type:e,...t})}},72439:(e,t,n)=>{n.d(t,{E:()=>CopilotTextAttacher,x:()=>o});var r=n(50467),a=n(53419),i=n(25641),s=n(23967);let o="application/x.clipboard",l=/^\s*`?([\w-_]{3,40}\.\w{1,10})`?\s*$/;let CopilotTextAttacher=class CopilotTextAttacher{static async isAttachable(e){if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return!1;let t=await e.text();return CopilotTextAttacher.isPlainText(t)}static getTextFileExtensions(){return CopilotTextAttacher.fileExtensionsCache??(CopilotTextAttacher.fileExtensionsCache=Object.values(s.r4).flatMap(e=>e.extensions??[]).filter(e=>"stl"!==e).join(","))}static getAttachmentSizeLimit(){return 512e3}static isPlainText(e){let t=Math.min(e.length,1e3),n=0,r=0;for(let a=0;a<t;a++){let t=e.charCodeAt(a);0===t?n++:t>127&&r++}let a=n/t,i=r/t;return a<=.1&&i<=.2}async makeReference(e,t){let n=await e.text(),r=e.name||(t?await t:await this.generateFileName(n,e.type));return this.makeReferenceSync(n,r)}makeReferenceSync(e,t){let n=t.split(".").pop();return(0,a.BI)("copilot.attach_pasted_file",{extension:n,characters:e.length}),{type:"thread-scoped-file",name:t,text:e,language:""}}async addAttachment(e,t,n){let r;if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return void this.manager.addAmbientError("Attached text files must be smaller than 500KB");let a=await e.text();if(!CopilotTextAttacher.isPlainText(a))return void this.manager.addAmbientError(`"${e.name}" has an unsupported file type. Please try again with a plain text file`);if(n)r=this.makeReferenceSync(a,n),this.manager.addReference(r,"text-attacher");else{let n=(0,i.Vc)(e.name);this.manager.addReference(n,"text-attacher"),this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0});try{r=await this.makeReference(e,t),this.manager.replaceReference(n,r)}catch{this.manager.addAmbientError("Failed to process file. Please try again."),this.manager.removeReference(n)}finally{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}}return r}async generateFileName(e,t){let n=this.existingFileNames.size>0?`

Follow the naming formats used by these existing files: ${Array.from(this.existingFileNames).slice(0,5).join(", ")}`:"",r=await this.manager.service.getSimpleCompletion(`Return a suitable filename for the following file contents.
      Follow the file naming conventions of the language and do not include any special characters except for period, underscore or hyphens.
      Try to limit the name to 20 characters or less.
      You MUST include the file extension. Include only the filename in your response and nothing else.${n}

File contents:
\`\`\`
${e}
\`\`\`
`),i=r.ok?l.exec(r.payload)?.[1]:null;return i?(0,a.BI)("copilot.generate_pasted_file_name.success"):(0,a.BI)("copilot.generate_pasted_file_name.failure"),this.uniqueFileName(i??this.defaultFileName(t))}uniqueFileName(e){if(!this.existingFileNames.has(e))return e;let t=e.lastIndexOf("."),n=t>0&&t<e.length-1,r=n?e.substring(0,t):e,a=n?e.substring(t):"",i=2;for(;this.existingFileNames.has(`${r}${i}${a}`);)i++;return`${r}${i}${a}`}defaultFileName(e){return e===o?"pasted.txt":"untitled.txt"}constructor(e,t=new Set){(0,r._)(this,"manager",void 0),(0,r._)(this,"existingFileNames",void 0),this.manager=e,this.existingFileNames=t}};(0,r._)(CopilotTextAttacher,"fileExtensionsCache",void 0)},79216:(e,t,n)=>{n.d(t,{Q:()=>s});let r=/^@(?<repo>[\w-.]+\/[\w-.]+)(?:\/(?<type>\w+)\/(?<id>.+))?$/,a=/^@(?<id>[a-zA-Z0-9_.-]+)$/,i={fromUrlType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"blob":case"tree":return"file";case void 0:return"repository"}},fromMentionType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"files":return"file";case void 0:return"repository"}}},s={fromUrl(e){let t;try{t=new URL(e)}catch{return}if(t.hostname!==window.location.hostname)return;let[,n,r,a,...s]=t.pathname.split("/"),o=s.join("/"),l=i.fromUrlType(a);if(n&&r&&l)return{repo:`${n}/${r}`,type:o?l:"repository",id:o}},stringify(e){switch(e.type){case"issue":return`@${e.repo}/issues/${e.id??""}`;case"pull-request":return`@${e.repo}/pull/${e.id??""}`;case"discussion":return`@${e.repo}/discussions/${e.id??""}`;case"repository":return`@${e.repo}`;case"file":return`@${e.repo}/files/${e.id??""}`;case"thread-scoped-file":return`@${e.id??""}`}},parse(e){let t=r.exec(e)?.groups;if(!t){let t=a.exec(e)?.groups;return t?{repo:"",type:"thread-scoped-file",id:t.id}:void 0}let n=i.fromMentionType(t.type);return n?{repo:t.repo,type:n,id:t.id}:void 0},isEqual:(e,t)=>s.stringify(e)===s.stringify(t),refersTo(e,t){let n=s.for(t);return null!==n&&s.isEqual(e,n)},for:e=>{switch(e.type){case"repository":return{type:"repository",repo:`${e.ownerLogin}/${e.name}`,reference:e};case"issue":return{type:"issue",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"pull-request":return{type:"pull-request",repo:`${e.repository.ownerLogin}/${e.repository.name}`,id:e.number.toString(),reference:e};case"discussion":return{type:"discussion",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"file":case"folder":return{type:"file",repo:`${e.repoOwner}/${e.repoName}`,id:e.path,reference:e};case"thread-scoped-file":return{type:"thread-scoped-file",repo:"",id:e.name,reference:e};default:return null}}}},97949:(e,t,n)=>{n.d(t,{U:()=>s});var r=n(99054),a=n(25641),i=n(79216);let s=function({references:e,agents:t}){this.parser=function(n){let s=n.split(/(\s+)/),o=[];for(let[n,l]of s.entries()){let s=0===n&&r.qj.exec(l)?.groups?.slug,c=s&&t.find(e=>e.slug===s);if(c){o.push({type:"agent-mention",value:l,data:{mentionedAgent:c}});continue}let d=i.Q.parse(l),u=d&&e?.find(e=>i.Q.refersTo(d,e));if(d){o.push({type:"reference-mention",value:l,data:{mentionedReferenceId:u&&(0,a.Vb)(u),referenceMention:d}});continue}let m=o.at(-1);m?.type==="text"?m.value+=l:o.push({type:"text",value:l})}return{type:"root",children:o}}}},93997:(e,t,n)=>{n.d(t,{O:()=>i,_:()=>s});var r=n(47970),a=n(99054);function i(e){let t=new Set;return(0,r.YR)(e,e=>{"reference-mention"===e.type&&void 0!==e.data.mentionedReferenceId&&t.add(e.data.mentionedReferenceId)}),t}function s(e){return a.qj.test(e.split(/\s/)[0]??"")}},84646:(e,t,n)=>{n.d(t,{$7:()=>u,AV:()=>y,Ao:()=>p,BV:()=>g,OW:()=>CopilotSpaceSSOError,Tx:()=>f,e9:()=>m,i9:()=>CopilotSpaceNotFoundError,jS:()=>h});var r=n(50467),a=n(97665),i=n(94747),s=n(97286),o=n(72011),l=n(33592),c=n(96540),d=n(2635);let CopilotSpaceNotFoundError=class CopilotSpaceNotFoundError extends Error{constructor(e="Copilot Space not found"){super(e),this.name="CopilotSpaceNotFoundError"}};let CopilotSpaceSSOError=class CopilotSpaceSSOError extends Error{constructor(e,t="Copilot Space SSO error"){super(t),(0,r._)(this,"protectedOrganizations",void 0),this.protectedOrganizations=e,this.name="CopilotSpaceSSOError"}};function u(){let e=(0,a.jE)();return(0,i.n)({mutationFn:async e=>{let t=await (0,o.ee)(e);if(!t.ok)throw Error(t.error);return{status:t.status,ok:!0,payload:t.payload}},onSuccess:async()=>{await e.invalidateQueries({queryKey:o.O6})}})}function m(e){let t=(0,l.b)(),{data:n}=h(e,{throwOnError:!1});(0,c.useEffect)(()=>{n&&t.dispatch({type:"SET_CUSTOM_COPILOTS",customCopilots:n})},[n,t])}function h(e,t={}){return(0,s.I)({queryKey:o.O6,queryFn:o.CT,enabled:e,staleTime:3e5,throwOnError:t.throwOnError})}function p(e){return(0,s.I)({queryKey:(0,o.dp)(e),queryFn:async()=>{let t=await (0,o.Lr)(e);if(!t.ok){if(404===t.status)throw new CopilotSpaceNotFoundError;throw Error(t.error)}if(void 0===t.payload.id)throw new CopilotSpaceSSOError(t.payload.protectedOrganizations);return t.payload},enabled:!!e})}function f(e,t){return(0,s.I)({queryKey:["visibility-settings",e,t],queryFn:async()=>(0,o.A2)({owner:e,id:t}),enabled:""!==e&&-1!==t,staleTime:3e5})}function g(){return(0,d.A3)("customCopilotsEnabled")}function y(){let e=function(){let e=(0,d.A3)("customCopilots");return e?.length??0}(),[t,n]=(0,c.useState)(null),r=(0,c.useMemo)(()=>`New Space ${e+1}`,[e]);return(0,c.useEffect)(()=>{null===t&&n(r)},[r,t]),{name:t||"",setName:n,defaultName:r}}},17485:(e,t,n)=>{n.d(t,{C:()=>s});var r=n(25536),a=n(14521),i=n(96540);function s(){let e=(0,a.G)(),{selectedCopilotSpaceId:t,setSelectedCopilotSpaceId:n,selectedThreadId:s}=(0,r.O)(),o=!!s||!!e;(0,i.useEffect)(()=>{n(e||void 0)},[e,n]);let l=t||e,c=(0,i.useCallback)(e=>{o||n({id:e.id,owner:e.owner})},[n,o]),d=(0,i.useCallback)(()=>{o||n(void 0)},[n,o]);return{activeCopilotSpaceId:l,readOnly:o,handleSpaceSelect:c,clearSpaceSelection:d}}},51563:(e,t,n)=>{n.d(t,{$:()=>u});var r=n(33592),a=n(23657),i=n(72011),s=n(69599),o=n(97665),l=n(94747),c=n(96379),d=n(31971);let u=e=>{let t=(0,r.b)(),n=(0,o.jE)(),u=(0,s.G7)("copilot_spaces_upsert_reload_in_background"),{mutateAsync:m,...h}=(0,l.n)({onSuccess:async()=>{if(!u)return e&&await n.invalidateQueries({queryKey:(0,i.dp)(e)}),n.invalidateQueries({queryKey:i.O6});n.invalidateQueries({queryKey:i.O6}),e&&await n.invalidateQueries({queryKey:(0,i.dp)(e)})},mutationFn:async n=>{let r=e?(0,a.fn)(e):"/custom_copilots",i=e?"PUT":"POST",s={custom_copilot:{owner_id:n.ownerId,owner_type:n.ownerType,name:n.name,icon_type:n.iconType,icon_color:n.iconColor,description:n.description,general_instructions:n.generalInstructions,resources_attributes:n.resources?.map(e=>({id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:e.markedForDestroy,metadata:(0,d.M)(e)})),visibility:n.visibility,base_role:n.baseRole}},o=await (0,c.lS)(r,{method:i,body:s}),l=await o.json();if(!o.ok)throw l.errorMessages;return t.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:l}),l}});return{upsertCopilotSpace:m,...h}}},97564:(e,t,n)=>{n.d(t,{V:()=>a});var r=n(96379);async function a(e){let t=await (0,r.lS)(`/github-copilot/chat/repositories/${e}`,{method:"GET"});if(!t.ok)throw Error(`Failed to fetch repository details: ${t.status}`);return await t.json()}},72011:(e,t,n)=>{n.d(t,{A2:()=>m,CT:()=>c,Lr:()=>d,O6:()=>o,dp:()=>l,ee:()=>u});var r=n(25641),a=n(23657),i=n(96379);let s="/github-copilot/chat",o=["copilot-chat","custom-copilots"];function l(e){return e?["copilot-chat","custom-copilot",{id:e.id,owner:e.owner}]:["copilot-chat","custom-copilot",null]}async function c(){let e=await (0,i.lS)(`${s}/custom_copilots`);if(!e.ok)throw Error(`Failed to fetch spaces: ${r.nN[e.status]||r.DW}`);return await e.json()}async function d(e){if(!e||!e.owner)return{status:500,ok:!1,error:"unexpected null custom copilot id or missing owner"};let{owner:t,id:n}=e,a=`${s}/custom_copilots/${t}/${n}`,o=await (0,i.lS)(a);if(!o.ok)return{status:o.status,ok:!1,error:r.nN[o.status]||r.DW};let l=await o.json();return{status:o.status,ok:!0,payload:l}}async function u(e){let t=await (0,i.lS)((0,a.fn)(e),{method:"DELETE"});return t.ok?{status:t.status,ok:!0,payload:null}:t}async function m(e){let t=await (0,i.lS)(`${(0,a.fn)(e)}/settings/visibility`);if(!t.ok)throw Error("Error fetching visibility settings");try{let e=await t.json();return{memberCount:e.member_count&&"number"==typeof e.member_count?e.member_count:null}}catch(e){throw Error(`Error parsing visibility settings: ${e}`)}}},31971:(e,t,n)=>{n.d(t,{M:()=>r});function r(e){switch(e.type){case"repository":return{repository_id:e.repositoryId};case"github_file":return{repository_id:e.repositoryId,file_path:e.filePath,sha:e.sha};case"free_text":return{text:e.text,name:e.name};case"github_issue":case"github_pull_request":return{repository_id:e.repositoryId,number:e.number};case"uploaded_text_file":return{name:e.name};case"media_content":return{media_type:e.mediaType,name:e.name,url:e.url,height:e.height,width:e.width};default:throw Error("Unsupported resource")}}},72931:(e,t,n)=>{function r(){return{favicon:document.querySelector('.js-site-favicon[type="image/svg+xml"]'),faviconFallback:document.querySelector('.js-site-favicon[type="image/png"]')}}function a(e){let{favicon:t,faviconFallback:n}=r();if(!t||!n)return;let a=l();e=e.substr(0,e.lastIndexOf(".")),t.href=e=`${e}${a}.svg`;let i=t.href.substr(0,t.href.lastIndexOf("."));n.href=`${i}.png`}function i(){let{favicon:e,faviconFallback:t}=r();if(!e||!t)return;let n=l(),a=e.href.indexOf("-dark.svg"),i=e.href.substr(0,-1!==a?a:e.href.lastIndexOf("."));e.href=`${i}${n}.svg`,t.href=`${i}${n}.png`}function s(e){let{favicon:t,faviconFallback:n}=r();if(!t||!n)return;let a=t.getAttribute("data-base-href"),i="default"===e?"":`-${e}`,s=l();a&&(t.href=`${a}${i}${s}.svg`,n.href=`${a}${i}${s}.png`)}function o(){s("default")}function l(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"-dark":""}n.d(t,{Ow:()=>a,gd:()=>o,iD:()=>s,uQ:()=>i})},30923:(e,t,n)=>{n.d(t,{Ee:()=>l,b4:()=>c,Ts:()=>o});var r=n(50467);let a=class ResponseError extends Error{constructor(e,t){super(`${e} for HTTP ${t.status}`),(0,r._)(this,"response",void 0),this.response=t,this.name="ResponseError"}};var i=n(69759),s=n(51987);async function o(e,t,n){let r=new Request(t,n);(0,s.tV)(r.headers);let o=await self.fetch(r);if(o.status<200||o.status>=300)throw Error(`HTTP ${o.status}${o.statusText||""}`);return!function(e,t,n=!1){let r=t.headers.get("content-type")||"";if(!n&&!r.startsWith("text/html"))throw new a(`expected response with text/html, but was ${r}`,t);if(n&&!(r.startsWith("text/html")||r.startsWith("application/json")))throw new a(`expected response with text/html or application/json, but was ${r}`,t);let i=t.headers.get("x-html-safe");if(i){if(!e.includes(i))throw new a("response X-HTML-Safe nonce did not match",t)}else throw new a("missing X-HTML-Safe nonce",t)}(function(e){let t=[...e.querySelectorAll("meta[name=html-safe-nonce]")].map(e=>e.content);if(t.length<1)throw Error("could not find html-safe-nonce on document");return t}(e),o),(0,i.B)(e,await o.text())}function l(e,t,n=1e3,r=[200],a=[202]){return async function n(i){let o=new Request(e,t);(0,s.tV)(o.headers);let l=await self.fetch(o);if(a.includes(l.status))return await new Promise(e=>setTimeout(e,i)),n(1.5*i);if(r.includes(l.status))return l;if(l.status<200||l.status>=300)throw Error(`HTTP ${l.status}${l.statusText||""}`);throw Error(`Unexpected ${l.status} response status from poll endpoint`)}(n)}async function c(e,t,n){let{wait:r=500,acceptedStatusCodes:a=[200],max:i=3,attempt:o=0}=n||{},l=async()=>new Promise((n,l)=>{setTimeout(async()=>{try{let r=new Request(e,t);(0,s.tV)(r.headers);let l=await self.fetch(r);if(a.includes(l.status)||o+1===i)return n(l);n("retry")}catch(e){l(e)}},r*o)}),d=await l();return"retry"!==d?d:c(e,t,{wait:r,acceptedStatusCodes:a,max:i,attempt:o+1})}},65787:(e,t,n)=>{n.d(t,{U:()=>i});let r=e=>{let t=getComputedStyle(e,null);return["overflow","overflow-y","overflow-x"].some(e=>{let n=t.getPropertyValue(e);return"auto"===n||"scroll"===n})},a=(e,t)=>e&&null!==e.parentNode?a(e.parentNode,t.concat([e])):t;function i(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(let t of a(e.parentNode,[]))if((t instanceof HTMLElement||t instanceof SVGElement)&&r(t))return t;return document.scrollingElement||document.documentElement}}},65820:(e,t,n)=>{n.d(t,{H:()=>i});var r=n(37285),a=n(48845);async function i(e,t,n){let i=await (0,a.q$)(e);if(401===i.status){let e=n.getQueryData(t);if(!e)throw new a.ol;return e}let s=await (0,a.hp)(i);return(0,r.Av)(s),(0,a.R)(i),s}},80679:(e,t,n)=>{n.d(t,{gX:()=>t7,S4:()=>rs,OC:()=>S,Uz:()=>ru});var r,a=n(74848),i=n(21728);function s(e){if(null==e)throw Error("Failed to load page data.")}var o=n(75202),l=n(38621),c=n(12004),d=n(34164),u=n(96540),m=n(17645),h=n(20622),p=n(53885),f=n(50129),g=n(65820),y=n(97665),x=n(97286);function _(){let e,t=(0,i.c)(2),{basePageDataUrl:n}=(0,f.Yu)(),r=`basePageDataURL:${n}`;return t[0]!==r?(e=[h.u.mergeBox,r],t[0]=r,t[1]=e):e=t[1],e}let v=(0,u.createContext)({mergeMethod:m.q$.MERGE,setMergeMethod:()=>{}});function S({children:e,defaultMergeMethod:t}){let[n,r]=(0,u.useState)(t),i=_(),s=(0,y.jE)();(0,u.useEffect)(()=>{s.invalidateQueries({queryKey:i})},[n]);let o=(0,u.useMemo)(()=>({mergeMethod:n,setMergeMethod:r}),[n]);return(0,a.jsx)(v.Provider,{value:o,children:e})}function E(){return(0,u.useContext)(v)}try{v.displayName||(v.displayName="MergeMethodContext")}catch{}try{S.displayName||(S.displayName="MergeMethodContextProvider")}catch{}function C(e){let t=e&&e.conditions.find(e=>m.nw.includes(e.type));if(t&&"conflicts"in t&&"isConflictResolvableInWeb"in t)return t}function b(e){return e?.conditions.filter(e=>m.iG.includes(e.type)&&"FAILED"===e.result)??[]}var w=n(35750),R=n(18150),N=n(85242),j=n(88243),I=n(16213),A=n(50467);let BaseSectionStatus=class BaseSectionStatus{get shouldRender(){return!1}get shouldConsiderStatus(){return this.shouldRender}get sectionStatus(){return"UNKNOWN"}get mergeBoxStatus(){return"UNKNOWN"}constructor(e,t,n){(0,A._)(this,"pullRequest",void 0),(0,A._)(this,"mergeRequirements",void 0),(0,A._)(this,"statusChecks",void 0),this.pullRequest=e,this.mergeRequirements=t,this.statusChecks=n}};let T=["MERGE_QUEUE","REQUIRED_STATUS_CHECKS"],k=["PULL_REQUEST_REPO_STATE","PULL_REQUEST_STATE"],L=["USER_CANNOT_PUSH"];var M=new WeakMap,D=new WeakMap,P=new WeakMap,O=new WeakMap;let BlockedSectionStatus=class BlockedSectionStatus extends BaseSectionStatus{get shouldRender(){return this.mergeRequirements?.state==="UNMERGEABLE"&&!this.pullRequest.isDraft&&0!==this.failingConditionsAndRules.length&&this.pullRequest.viewerCanUpdate}get sectionStatus(){return this.mergeRequirements?.state==="UNMERGEABLE"?"FAILED":"PASSED"}get mergeBoxStatus(){return this.sectionStatus}get failingConditionsAndRules(){return(0,w._)(this,M)||(0,N._)(this,M,[...(0,w._)(this,P),...(0,w._)(this,D),...(0,w._)(this,O)]),(0,w._)(this,M)}constructor(...e){super(...e),(0,R._)(this,D,{get:F,set:void 0}),(0,R._)(this,P,{get:U,set:void 0}),(0,R._)(this,O,{get:B,set:void 0}),(0,R._)(this,M,{writable:!0,value:void 0})}};function F(){return b(this.mergeRequirements).flatMap(e=>"ruleRollups"in e?e.ruleRollups:[]).filter(e=>e?.result==="FAILED"&&!T.includes(e.ruleType))}function U(){var e;return(e=this.mergeRequirements,e?.conditions.filter(e=>m.jw.includes(e.type)&&"FAILED"===e.result)??[]).filter(e=>!k.includes(e.type))}function B(){var e;return(e=this.mergeRequirements,e?.conditions.filter(e=>m.TW.includes(e.type)&&"FAILED"===e.result)??[]).flatMap(e=>"failedSubConditions"in e?e.failedSubConditions:[]).filter(e=>!L.includes(e.displayName))}let q={AwaitingReview:"AwaitingReview",ChangesRequested:"ChangesRequested",ChecksFailing:"ChecksFailing",ChecksPending:"ChecksPending",DraftReadyForReview:"DraftReadyForReview",DraftNotReadyForReview:"DraftNotReadyForReview",InMergeQueue:"InMergeQueue",MergeConflicts:"MergeConflicts",Mergeable:"Mergeable",NonactionableFailure:"NonactionableFailure",NonRequiredChecksUnsuccessful:"NonRequiredChecksUnsuccessful",UnableToMerge:"UnableToMerge",Unknown:"Unknown",Merged:"Merged",Closed:"Closed"};function $(e){return(e?.conditions.filter(e=>"FAILED"===e.result)??[]).map(e=>e.type)}function G(e){return!!e?.statusChecks.some(e=>e.isRequired&&function(e){switch(e){case"WAITING":case"PENDING":case"IN_PROGRESS":case"QUEUED":case"EXPECTED":return!0;case"ACTION_REQUIRED":case"FAILURE":case"ERROR":case"STARTUP_FAILURE":case"CANCELLED":case"STALE":case"TIMED_OUT":case"SUCCESS":case"COMPLETED":case"NEUTRAL":case"REQUESTED":case"SKIPPED":case"_UNKNOWN_VALUE":return!1}}(e.state))}function W(e){return!!e?.statusChecks.some(e=>e.isRequired&&function(e){switch(e){case"ACTION_REQUIRED":case"FAILURE":case"ERROR":case"STARTUP_FAILURE":case"_UNKNOWN_VALUE":case"CANCELLED":case"STALE":case"TIMED_OUT":return!0;case"SUCCESS":case"COMPLETED":case"EXPECTED":case"IN_PROGRESS":case"NEUTRAL":case"PENDING":case"QUEUED":case"REQUESTED":case"SKIPPED":case"WAITING":return!1}}(e.state))}function V(e){return void 0!==e&&e?.statusChecks.length!==0&&(!W(e)||!G(e))}function Q(e,t){return e?.state!=="UNMERGEABLE"&&!!t?.statusChecks.some(e=>!e.isRequired&&!function(e){switch(e){case"NEUTRAL":case"SUCCESS":case"SKIPPED":return!0;case"WAITING":case"PENDING":case"IN_PROGRESS":case"QUEUED":case"EXPECTED":case"ACTION_REQUIRED":case"FAILURE":case"ERROR":case"STARTUP_FAILURE":case"CANCELLED":case"STALE":case"TIMED_OUT":case"COMPLETED":case"REQUESTED":case"_UNKNOWN_VALUE":return!1}}(e.state))||t?.statusRollup.combinedState==="PENDING_APPROVAL"}function H(e){let t=e?.conditions.find(e=>"PULL_REQUEST_RULES"===e.type),n=t?.ruleRollups?.find(e=>"PULL_REQUEST"===e.ruleType);if(!n||"FAILED"!==n.result)return[];let r=n.metadata;return r&&"failureReasons"in r&&r.failureReasons.map(e=>e.toUpperCase())||[]}function z(e){return $(e).includes("PULL_REQUEST_MERGE_CONFLICT_STATE")}let ChecksSectionStatus=class ChecksSectionStatus extends BaseSectionStatus{get shouldRender(){let e=this.statusChecks?.statusRollup;return(e?.summary.length??0)>0||e?.combinedState==="PENDING_APPROVAL"}get sectionStatus(){let e=C(this.mergeRequirements);return"DIRTY"===this.pullRequest.mergeStateStatus&&e?.result==="FAILED"?"PENDING_CONFLICTS":this.statusChecks?.statusRollup.combinedState??"UNKNOWN"}get mergeBoxStatus(){if("PENDING_APPROVAL"===this.sectionStatus)return"PENDING_USER_ACTION";let e=W(this.statusChecks),t=G(this.statusChecks),n=V(this.statusChecks),r=Q(this.mergeRequirements,this.statusChecks);return t||"PENDING"===this.sectionStatus||"PENDING_CONFLICTS"===this.sectionStatus?"PENDING":e?"FAILED":r?"NEUTRAL":n?"PASSED":"NEUTRAL"}};let ClosedOrMergedStateSectionStatus=class ClosedOrMergedStateSectionStatus extends BaseSectionStatus{get shouldRender(){return"OPEN"!==this.pullRequest.state}get sectionStatus(){return"OPEN"!==this.pullRequest.state?this.pullRequest.state:"UNKNOWN"}get mergeBoxStatus(){return"MERGED"===this.sectionStatus?"MERGED":"NEUTRAL"}};var K=new WeakMap,X=new WeakMap,J=new WeakMap;let ConflictsSectionStatus=class ConflictsSectionStatus extends BaseSectionStatus{get shouldRender(){return("BLOCKED"!==this.pullRequest.mergeStateStatus||!!this.pullRequest.viewerCanUpdateBranch)&&!!this.conflictsCondition}get sectionStatus(){return this.conflictsCondition?(0,w._)(this,J).call(this,this.pullRequest.advisoryWorkspace,this.pullRequest.mergeStateStatus,this.conflictsCondition,(0,w._)(this,X)):"PENDING"}get mergeBoxStatus(){switch(this.sectionStatus){case"NO_CONFLICTS":case"HAS_ADVISORY_WORKSPACE":return"PASSED";case"HAS_CONFLICTS":case"HAS_REBASE_CONFLICTS":case"OUT_OF_DATE":return"NEUTRAL";default:return"PENDING"}}get conflictsCondition(){return(0,w._)(this,K)||(0,N._)(this,K,C(this.mergeRequirements)),(0,w._)(this,K)}constructor(...e){super(...e),(0,R._)(this,X,{get:Y,set:void 0}),(0,R._)(this,K,{writable:!0,value:void 0}),(0,R._)(this,J,{writable:!0,value:(e,t,n,r)=>{if("BEHIND"===t)return"OUT_OF_DATE";if("UNKNOWN"===t)return"PENDING";if("FAILED"===n.result&&0===r.length)return"HAS_REBASE_CONFLICTS";if(!e&&("CLEAN"===t||"UNSTABLE"===t||"HAS_HOOKS"===t))return"NO_CONFLICTS";if(e&&("CLEAN"===t||"UNSTABLE"===t||"HAS_HOOKS"===t))return"HAS_ADVISORY_WORKSPACE";else if("DIRTY"===t&&"FAILED"===n.result)return"HAS_CONFLICTS";else if("BLOCKED"===t)return"OUT_OF_DATE";else return"PENDING"}})}};function Y(){return this.conflictsCondition?.conflicts??[]}let DraftStateSectionStatus=class DraftStateSectionStatus extends BaseSectionStatus{get shouldRender(){return"OPEN"===this.pullRequest.state&&this.pullRequest.isDraft}get sectionStatus(){return"IS_DRAFT"}get mergeBoxStatus(){return"NEUTRAL"}};let MergeQueueSectionStatus=class MergeQueueSectionStatus extends BaseSectionStatus{get shouldRender(){return this.pullRequest.isInMergeQueue}get sectionStatus(){return"QUEUED"}get mergeBoxStatus(){return this.sectionStatus}};var Z=n(30459),ee=n(81246),et=n(92265),en=n(63557);let er={wrapper:"MergeBoxSectionHeader-module__wrapper--zMA1Y",wrapperCanExpand:"MergeBoxSectionHeader-module__wrapperCanExpand--AoekL",button:"MergeBoxSectionHeader-module__button--mkkJX",MergeBoxSectionHeading:"MergeBoxSectionHeader-module__MergeBoxSectionHeading--miHzz"},ea=e=>{let t,n,r,s=(0,i.c)(5),{isExpanded:o}=e,c=o?"":"rotate(180deg)";return s[0]!==c?(t={transition:"transform 0.15s ease-in-out",transform:c},s[0]=c,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(l.ChevronUpIcon,{}),s[2]=n):n=s[2],s[3]!==t?(r=(0,a.jsx)("div",{style:t,children:n}),s[3]=t,s[4]=r):r=s[4],r};try{ea.displayName||(ea.displayName="ExpandableSectionIcon")}catch{}let ei=e=>{let t,n,r,s,o,l,c,u,m,h,p=(0,i.c)(31),{title:f,subtitle:g,headerId:y,icon:x,expandableProps:_,children:v,rightSideContent:S}=e;if(_&&S)throw Error("MergeBoxSectionHeader: rightSideContent is not supported when expandableProps exist");p[0]!==_?(t=_||{},p[0]=_,p[1]=t):t=p[1];let{isExpanded:E,ariaLabel:C,onToggle:b}=t,w=_&&er.wrapperCanExpand,R=!_&&"flex-column flex-sm-row flex-items-center flex-sm-items-start flex-justify-between";return p[2]!==w||p[3]!==R?(n=(0,d.$)(er.wrapper,w,R),p[2]=w,p[3]=R,p[4]=n):n=p[4],p[5]!==x?(r=x&&(0,a.jsx)("div",{className:"mr-2 flex-shrink-0",children:x}),p[5]=x,p[6]=r):r=p[6],p[7]!==y||p[8]!==f?(s=(0,a.jsx)(en.A,{as:"h3",id:y,className:er.MergeBoxSectionHeading,children:f}),p[7]=y,p[8]=f,p[9]=s):s=p[9],p[10]!==g?(o=(0,a.jsx)("p",{className:"fgColor-muted mb-0 ",children:g}),p[10]=g,p[11]=o):o=p[11],p[12]!==v||p[13]!==s||p[14]!==o?(l=(0,a.jsxs)("div",{className:"flex-1",children:[s,o,v]}),p[12]=v,p[13]=s,p[14]=o,p[15]=l):l=p[15],p[16]!==S||p[17]!==l?(c=(0,a.jsxs)("div",{className:"d-flex flex-1 flex-column flex-sm-row gap-2",children:[l,S]}),p[16]=S,p[17]=l,p[18]=c):c=p[18],p[19]!==r||p[20]!==c?(u=(0,a.jsxs)("div",{className:"d-flex width-full",children:[r,c]}),p[19]=r,p[20]=c,p[21]=u):u=p[21],p[22]!==C||p[23]!==_||p[24]!==E||p[25]!==b?(m=_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{"aria-label":C,type:"button",className:er.button,onClick:b,"aria-expanded":E}),(0,a.jsx)("div",{className:"fgColor-muted pr-2 pt-2",children:(0,a.jsx)(ea,{isExpanded:!!E})})]}),p[22]=C,p[23]=_,p[24]=E,p[25]=b,p[26]=m):m=p[26],p[27]!==u||p[28]!==m||p[29]!==n?(h=(0,a.jsxs)("div",{className:n,children:[u,m]}),p[27]=u,p[28]=m,p[29]=n,p[30]=h):h=p[30],h};try{ei.displayName||(ei.displayName="MergeBoxSectionHeader")}catch{}let es={reviewAuthor:"ReviewerSection-module__reviewAuthor--ieHt5",reviewAuthorAnchor:"ReviewerSection-module__reviewAuthorAnchor--UMy9c",leadingVisual:"ReviewerSection-module__leadingVisual--_bMPf",reviewedIcon:"ReviewerSection-module__reviewedIcon--KucH5",reviewerGroupsContainer:"ReviewerSection-module__reviewerGroupsContainer--pZhlf",reviewText:"ReviewerSection-module__reviewText--JiCKY",reviewerActionBar:"ReviewerSection-module__reviewerActionBar--iT6ez",subtitleLink:"ReviewerSection-module__subtitleLink--J58lv"},eo={expandableContent:"MergeBoxExpandable-module__expandableContent--li_O1",expandableWrapper:"MergeBoxExpandable-module__expandableWrapper--Ejab0",isExpanded:"MergeBoxExpandable-module__isExpanded--PaOkp"},el=e=>{let t,n,r,s,o,l=(0,i.c)(13),{isExpanded:c,children:u}=e,m=void 0!==c&&c,h=m&&eo.isExpanded;l[0]!==h?(t=(0,d.$)(eo.expandableWrapper,h),l[0]=h,l[1]=t):t=l[1];let p=m?"visible":"hidden";l[2]!==p?(n={visibility:p},l[2]=p,l[3]=n):n=l[3];let f=m&&eo.isExpanded;l[4]!==f?(r=(0,d.$)(eo.expandableContent,f),l[4]=f,l[5]=r):r=l[5];let g=m&&u;return l[6]!==r||l[7]!==g?(s=(0,a.jsx)("div",{className:r,children:g}),l[6]=r,l[7]=g,l[8]=s):s=l[8],l[9]!==t||l[10]!==n||l[11]!==s?(o=(0,a.jsx)("div",{className:t,style:n,children:s}),l[9]=t,l[10]=n,l[11]=s,l[12]=o):o=l[12],o};try{el.displayName||(el.displayName="MergeBoxExpandable")}catch{}var ec=n(97174),ed=n(55847);let eu={groupHeadingButton:"ReviewGroupExpander-module__groupHeadingButton--S7IXP",expandableWrapper:"ReviewGroupExpander-module__expandableWrapper--Xlmef",expandableListView:"ReviewGroupExpander-module__expandableListView--hoVAr",isExpanded:"ReviewGroupExpander-module__isExpanded--SHz1f"};var em=n(40104);let eh=e=>{let t,n,r,s=(0,i.c)(5),{isExpanded:o}=e,c=o?"rotate(90deg)":"";return s[0]!==c?(t={transform:c},s[0]=c,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(l.ChevronRightIcon,{size:12}),s[2]=n):n=s[2],s[3]!==t?(r=(0,a.jsx)("div",{style:t,children:n}),s[3]=t,s[4]=r):r=s[4],r};try{eh.displayName||(eh.displayName="ExpandableGroupIcon")}catch{}let ep={[m.Qv.Approvals]:(0,a.jsx)(l.CheckIcon,{className:"fgColor-success",size:16}),[m.Qv.RequestedChanges]:(0,a.jsx)(l.FileDiffIcon,{className:"fgColor-danger",size:16}),[m.Qv.PendingReviewRequest]:(0,a.jsx)(l.PersonIcon,{size:16})};function ef(e){let t,n,r,s,o,l,c,m,h=(0,i.c)(29),{children:p,count:f,pullRequestId:g,reviewGroup:y}=e,{sendAnalyticsEvent:x}=(0,Z.s)(),[_,v]=(0,em.Fo)(`${g}:reviewersGroup:${y}Expanded`,!1),S=(0,u.useId)(),E=ep[y],C=`${f} ${f>1?y:y.substring(0,y.length-1)}`,b=_?`Collapse ${C} group`:`Expand ${C} group`;h[0]!==_?(t=()=>(0,a.jsx)(eh,{isExpanded:_}),h[0]=_,h[1]=t):t=h[1],h[2]!==_||h[3]!==y||h[4]!==x||h[5]!==v?(n=()=>{x(_?"reviewers_group.collapse":"reviewers_group.expand","MERGEBOX_REVIEWERS_GROUP_TOGGLE_BUTTON",{group:y}),v(!_)},h[2]=_,h[3]=y,h[4]=x,h[5]=v,h[6]=n):n=h[6],h[7]!==C?(r=(0,a.jsx)("span",{className:"ml-1",children:C}),h[7]=C,h[8]=r):r=h[8],h[9]!==S||h[10]!==_||h[11]!==E||h[12]!==b||h[13]!==t||h[14]!==n||h[15]!==r?(s=(0,a.jsxs)(ed.Q,{"aria-controls":S,"aria-expanded":_,"aria-label":b,className:eu.groupHeadingButton,variant:"invisible",size:"small",trailingVisual:t,onClick:n,children:[E," ",r]}),h[9]=S,h[10]=_,h[11]=E,h[12]=b,h[13]=t,h[14]=n,h[15]=r,h[16]=s):s=h[16];let w=_&&eu.isExpanded;h[17]!==w?(o=(0,d.$)(eu.expandableWrapper,w),h[17]=w,h[18]=o):o=h[18];let R=_&&p;return h[19]!==R?(l=(0,a.jsx)("div",{className:eu.expandableListView,children:R}),h[19]=R,h[20]=l):l=h[20],h[21]!==S||h[22]!==C||h[23]!==o||h[24]!==l?(c=(0,a.jsx)("div",{className:o,id:S,"aria-label":C,role:"group",children:l}),h[21]=S,h[22]=C,h[23]=o,h[24]=l,h[25]=c):c=h[25],h[26]!==c||h[27]!==s?(m=(0,a.jsxs)(a.Fragment,{children:[s,c]}),h[26]=c,h[27]=s,h[28]=m):m=h[28],m}try{ef.displayName||(ef.displayName="ReviewGroupExpander")}catch{}var eg=n(2970),ey=n(95378),ex=n(65964),e_=n(77430);let ev={listItem:"SectionListItem-module__listItem--cGdcZ"};var eS=n(52446),eE=n(69410),eC=n(65029),eb=n(75298),ew=n(96665),eR=n(94747),eN=n(48845),ej=n(9214),eI=n(30729);function eA({reviewer:e,reviewStatusText:t,hovercardUrl:n,reviewId:r,viewerCanDismissReviews:s,viewerCanReRequestReviews:o=!1}){let c=(0,u.useRef)(null),m=(0,u.useRef)(null),[f,g]=(0,u.useState)(!1),[x,v]=(0,u.useState)(null),[S,E]=(0,u.useState)(""),C=S.trim().length<1,[b,w]=(0,u.useState)(!1),R=[s?{key:"dismiss-review",render:()=>(0,a.jsx)(eS.l.Item,{onSelect:()=>{g(!0)},children:"Dismiss review"})}:null,o?{key:"re-request-review",render:()=>(0,a.jsx)(eS.l.Item,{onSelect:()=>I({reviewerLogin:e.login}),children:"Re-request review"})}:null].filter(e=>!!e),N=!!r&&R.length>0,j=async()=>{v(null),g(!1),w(!1),m.current?.focus()},{mutate:I}=function(e){let t,n,r,a,s,o=(0,i.c)(13);o[0]!==e?(t=void 0===e?{}:e,o[0]=e,o[1]=t):t=o[1];let{onError:l}=t,c=_(),d=(0,p.e)(h.u.reRequestReviewFromUser),u=(0,y.jE)();return o[2]!==d?(n=async e=>{let t=await (0,eN.q$)(d,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eN.hp)(t);return(0,eN.R)(t,n),n},o[2]=d,o[3]=n):n=o[3],o[4]!==c||o[5]!==u?(r=()=>u.invalidateQueries({queryKey:c},{cancelRefetch:!1}),o[4]=c,o[5]=u,o[6]=r):r=o[6],o[7]!==l?(a=e=>{l?.(e)},o[7]=l,o[8]=a):a=o[8],o[9]!==n||o[10]!==r||o[11]!==a?(s={mutationFn:n,onSuccess:r,onError:a},o[9]=n,o[10]=r,o[11]=a,o[12]=s):s=o[12],(0,eR.n)(s)}({onError:()=>{}}),{mutate:A,isPending:T}=function(){let e,t,n,r=(0,i.c)(8),a=(0,p.e)(h.u.dismissReview),s=_(),o=(0,y.jE)();return r[0]!==a?(e=async e=>{let t=await (0,eN.q$)(a,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eN.hp)(t);return(0,eN.R)(t,n),n},r[0]=a,r[1]=e):e=r[1],r[2]!==s||r[3]!==o?(t=()=>o.invalidateQueries({queryKey:s},{cancelRefetch:!1}),r[2]=s,r[3]=o,r[4]=t):t=r[4],r[5]!==e||r[6]!==t?(n={mutationFn:e,onSuccess:t},r[5]=e,r[6]=t,r[7]=n):n=r[7],(0,eR.n)(n)}(),k=(0,u.useCallback)(()=>{T||(C&&w(!0),r&&!C&&A({reviewId:r,message:S},{onSuccess:()=>{j()},onError:e=>{v(e.message)}}))},[A,S,C,T,r]);if((0,u.useEffect)(()=>{function e(e){e.metaKey&&"Enter"===e.key&&f&&(e.preventDefault(),k())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[f,k]),!e)return null;let L=`${e.login} ${t.charAt(0).toLowerCase()+t.slice(1)}`;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eg.c,{className:ev.listItem,"aria-label":L,title:(0,a.jsx)(ey.ao,{href:e.url,value:e.login,containerClassName:"d-flex flex-items-center pt-0",headingClassName:es.reviewAuthor,anchorClassName:es.reviewAuthorAnchor,leadingBadge:(0,a.jsx)(ex.e,{className:(0,d.$)(es.leadingVisual,"mt-1"),children:(0,a.jsx)(e_.r,{alt:`${e.login}'s avatar image`,size:20,src:e.avatarUrl,"data-hovercard-url":n,className:"flex-shrink-0 ml-2"})}),children:(0,a.jsx)("span",{className:es.reviewText,children:t})}),secondaryActions:N?(0,a.jsx)(ej.L,{anchorRef:m,label:"review options",staticMenuActions:R,className:es.reviewerActionBar}):void 0}),f&&(0,a.jsxs)(ew.l,{title:"Dismiss review",onClose:j,role:"dialog",initialFocusRef:c,returnFocusRef:m,footerButtons:[{buttonType:"default",content:"Cancel",onClick:j},{buttonType:"danger",loading:T,loadingAnnouncement:"Dismissing review",content:"Dismiss review",onClick:k}],children:[x&&(0,a.jsxs)(eE.A,{className:"mb-2",variant:"danger",children:[(0,a.jsx)(eI.A,{className:"mr-2",icon:l.StopIcon}),x]}),(0,a.jsxs)(eC.A,{required:!0,className:"mb-2",children:[(0,a.jsx)(eC.A.Label,{children:(0,a.jsxs)("h4",{className:"f5",children:["Reason for dismissing ",e.login,"'s review"]})}),(0,a.jsx)(eb.Ay,{ref:c,onChange:e=>{w(!1),E(e.target.value)},value:S,className:"width-full height-full"}),C&&b&&(0,a.jsx)(eC.A.Validation,{variant:"error",children:"Please provide a reason for dismissing the review"}),(0,a.jsx)(eC.A.Caption,{children:"This reason will appear in the timeline so other users will know why the review was dismissed."})]})]})]})}try{eA.displayName||(eA.displayName="ReviewListItem")}catch{}var eT=n(25407);function ek(e){let t,n,r,s=(0,i.c)(13),{review:o,viewerCanDismissReviews:l,viewerCanReRequestReviews:c}=e,{author:d}=o;if(!d)return null;let u=o.id,m=!o.authorCanPushToRepository;return s[0]!==o.onBehalfOf||s[1]!==o.state||s[2]!==m?(t=((e,t,n)=>{let r="";switch(e){case"APPROVED":r+="Approved these changes";break;case"CHANGES_REQUESTED":r+="Requested changes";break;case"COMMENTED":r+="Commented"}return n&&(r+=" with read-only permissions"),"APPROVED"===e&&t.length>0&&(r+=` for ${(e=>{if(0===e.length)return"";{if(1===e.length)return e[0];if(2===e.length)return e.join(" and ");let t=e.pop();return`${e.join(", ")}, and ${t}`}})(t)}`),r})(o.state,o.onBehalfOf,m),s[0]=o.onBehalfOf,s[1]=o.state,s[2]=m,s[3]=t):t=s[3],s[4]!==d.login?(n=(0,eT.dCN)({owner:d.login}),s[4]=d.login,s[5]=n):n=s[5],s[6]!==d||s[7]!==o.id||s[8]!==t||s[9]!==n||s[10]!==l||s[11]!==c?(r=(0,a.jsx)(eA,{reviewer:d,reviewId:u,reviewStatusText:t,hovercardUrl:n,viewerCanDismissReviews:l,viewerCanReRequestReviews:c}),s[6]=d,s[7]=o.id,s[8]=t,s[9]=n,s[10]=l,s[11]=c,s[12]=r):r=s[12],r}try{ek.displayName||(ek.displayName="OpinionatedReviewRow")}catch{}function eL(e){let t,n,r,s=(0,i.c)(15),{opinionatedReviews:o,pullRequestId:l,reviewGroup:c,viewerCanDismissReviews:d,viewerCanReRequestReviews:u}=e;if(0===o.length)return null;let m=o.length,h=`list of ${c}`;if(s[0]!==o||s[1]!==d||s[2]!==u){let e;s[4]!==d||s[5]!==u?(e=e=>(0,a.jsx)(ek,{review:e,viewerCanDismissReviews:d,viewerCanReRequestReviews:u},`opinionated-review-from-${e?.author?.name}`),s[4]=d,s[5]=u,s[6]=e):e=s[6],t=o.map(e),s[0]=o,s[1]=d,s[2]=u,s[3]=t}else t=s[3];return s[7]!==h||s[8]!==t?(n=(0,a.jsx)(ec.u,{title:h,titleHeaderTag:"h3",children:t}),s[7]=h,s[8]=t,s[9]=n):n=s[9],s[10]!==o.length||s[11]!==l||s[12]!==c||s[13]!==n?(r=(0,a.jsx)(ef,{count:m,reviewGroup:c,pullRequestId:l,children:n}),s[10]=o.length,s[11]=l,s[12]=c,s[13]=n,s[14]=r):r=s[14],r}try{eL.displayName||(eL.displayName="OpinionatedReviewsGroup")}catch{}function eM(e){let t,n,r=(0,i.c)(9),{reviewRequest:s}=e,{reviewer:o}=s;if(!o)return null;if("TEAM"===o.type){let e;if(r[0]!==o.login||r[1]!==o.name){let t=o.login.split("/")[0]??"";e=(0,eT.Pmq)({owner:t,team:o.name}),r[0]=o.login,r[1]=o.name,r[2]=e}else e=r[2];t=e}else{let e;r[3]!==o.login?(e=(0,eT.dCN)({owner:o.login}),r[3]=o.login,r[4]=e):e=r[4],t=e}let l="was requested for review";return s.isCodeOwner&&(l="was requested for review as a codeowner"),r[5]!==t||r[6]!==o||r[7]!==l?(n=(0,a.jsx)(eA,{reviewer:o,reviewStatusText:l,hovercardUrl:t}),r[5]=t,r[6]=o,r[7]=l,r[8]=n):n=r[8],n}try{eM.displayName||(eM.displayName="RequestedReviewRow")}catch{}function eD(e){let t,n,r,s=(0,i.c)(10),{pendingRequestedReviews:o,pullRequestId:l,reviewGroup:c}=e;if(0===o.length)return null;let d=o.length,u=`list of ${c}`;return s[0]!==o?(t=o.map(eP),s[0]=o,s[1]=t):t=s[1],s[2]!==u||s[3]!==t?(n=(0,a.jsx)(ec.u,{title:u,titleHeaderTag:"h3",children:t}),s[2]=u,s[3]=t,s[4]=n):n=s[4],s[5]!==o.length||s[6]!==l||s[7]!==c||s[8]!==n?(r=(0,a.jsx)(ef,{count:d,reviewGroup:c,pullRequestId:l,children:n}),s[5]=o.length,s[6]=l,s[7]=c,s[8]=n,s[9]=r):r=s[9],r}function eP(e){return(0,a.jsx)(eM,{reviewRequest:e},`requested-review-from-${e?.reviewer?.name}`)}try{eD.displayName||(eD.displayName="PendingRequestedReviewsGroup")}catch{}let eO={APPROVED:"APPROVED",CHANGES_REQUESTED:"CHANGES_REQUESTED",REVIEW_REQUIRED:"REVIEW_REQUIRED",REVIEWED:"REVIEWED",REVIEW_REQUESTED:"REVIEW_REQUESTED"};function eF(e){let t,n,r,s,o,l,c,h,p,f,g,y,x,_,v,S,E,C,b,w,R,N,j,I,A,T,k=(0,i.c)(75),{consolidatedFailureReasons:L,helpUrl:M,latestOpinionatedReviews:D,numReviewsRequired:P,pendingRequestedReviews:O,pullRequestId:F,reviewsState:U,viewerCanDismissReviews:B,viewerCanReRequestReviews:q}=e,$=[...D,...O].length>0,[G,W]=(0,u.useState)($),{sendAnalyticsEvent:V}=(0,Z.s)(),Q=(0,u.useId)();k[0]!==D?(t=function(e){let t=[],n=[];for(let r of e)"APPROVED"===r.state&&t.push(r),"CHANGES_REQUESTED"===r.state&&n.push(r);return{approvedReviews:t,requestedChangesReviews:n}}(D),k[0]=D,k[1]=t):t=k[1];let{approvedReviews:H,requestedChangesReviews:z}=t,K=`${M}/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/requesting-a-pull-request-review`;k[2]!==K||k[3]!==L||k[4]!==D||k[5]!==P?(n=e=>{switch(e){case eO.REVIEW_REQUIRED:return`${((e,t)=>{if(t.includes("MORE_REVIEWS_REQUIRED"))if(1===e)return"At least 1 approving review is required";else if(0===e&&t.includes("LAST_PUSH_APPROVAL_REQUIRED"))return"An approval on the most recent push is required";else return`At least ${e} approving reviews are required`;return t.includes("CODE_OWNER_REVIEW_REQUIRED")?"Code owner review required":t.includes("SOC2_APPROVAL_PROCESS_REQUIRED")?"A review from a compliance team is required":""})(P,L)} by reviewers with write access.`;case eO.REVIEW_REQUESTED:return(0,a.jsxs)(a.Fragment,{children:["Review has been requested on this pull request. It is not required to merge."," ",(0,a.jsx)(ee.A,{inline:!0,href:K,className:(0,d.$)(es.subtitleLink,"position-relative"),children:"Learn more about requesting a pull request review."})]});default:return`${function(e){let t=e.filter(e=>e&&"CHANGES_REQUESTED"===e.state&&e.authorCanPushToRepository).length,n=e.filter(e=>e&&"APPROVED"===e.state&&e.authorCanPushToRepository).length;return 0===t&&0===n?"No applicable reviews submitted":[t>0?`${t} change${1===t?"":"s"} requested`:void 0,n>0?`${n} approving review${1===n?"":"s"}`:void 0].filter(Boolean).join(", ")}(D)} by reviewers with write access.`}},k[2]=K,k[3]=L,k[4]=D,k[5]=P,k[6]=n):n=k[6];let X=n;k[7]!==X?(r=X(eO.APPROVED),k[7]=X,k[8]=r):r=k[8],k[9]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(et.A,{className:"bgColor-success-emphasis fgColor-onEmphasis",icon:eG,size:32}),k[9]=s):s=k[9],k[10]!==r?(o={heading:"Changes approved",subtitle:r,icon:s},k[10]=r,k[11]=o):o=k[11],k[12]!==X?(l=X(eO.CHANGES_REQUESTED),k[12]=X,k[13]=l):l=k[13],k[14]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)(et.A,{className:"bgColor-danger-emphasis fgColor-onEmphasis",icon:e$,size:32}),k[14]=c):c=k[14],k[15]!==l?(h={heading:"Changes requested",subtitle:l,icon:c},k[15]=l,k[16]=h):h=k[16],k[17]!==X?(p=X(eO.REVIEW_REQUIRED),k[17]=X,k[18]=p):p=k[18],k[19]===Symbol.for("react.memo_cache_sentinel")?(f=(0,a.jsx)(et.A,{className:"bgColor-danger-emphasis fgColor-onEmphasis",icon:eq,size:32}),k[19]=f):f=k[19],k[20]!==p?(g={heading:"Review required",subtitle:p,icon:f},k[20]=p,k[21]=g):g=k[21],k[22]!==X?(y=X(eO.REVIEWED),k[22]=X,k[23]=y):y=k[23],k[24]===Symbol.for("react.memo_cache_sentinel")?(x=(0,a.jsx)(et.A,{className:(0,d.$)(es.reviewedIcon,"fgColor-onEmphasis"),icon:eB,size:32}),k[24]=x):x=k[24],k[25]!==y?(_={heading:"Changes reviewed",subtitle:y,icon:x},k[25]=y,k[26]=_):_=k[26],k[27]!==X?(v=X(eO.REVIEW_REQUESTED),k[27]=X,k[28]=v):v=k[28],k[29]===Symbol.for("react.memo_cache_sentinel")?(S=(0,a.jsx)(et.A,{className:"bgColor-success-emphasis fgColor-onEmphasis",icon:eU,size:32}),k[29]=S):S=k[29],k[30]!==v?(E={heading:"Review requested",subtitle:v,icon:S},k[30]=v,k[31]=E):E=k[31],k[32]!==g||k[33]!==_||k[34]!==E||k[35]!==o||k[36]!==h?(C={APPROVED:o,CHANGES_REQUESTED:h,REVIEW_REQUIRED:g,REVIEWED:_,REVIEW_REQUESTED:E},k[32]=g,k[33]=_,k[34]=E,k[35]=o,k[36]=h,k[37]=C):C=k[37];let J=C,Y=J[U],en=J[U],er=J[U];return k[38]!==J||k[39]!==G||k[40]!==U||k[41]!==V||k[42]!==$?(b=$?{ariaLabel:J[U].heading,isExpanded:G,onToggle:()=>{V(G?"reviewers_section.collapse":"reviewers_section.expand","MERGEBOX_REVIEWERS_SECTION_TOGGLE_BUTTON"),W(!G)}}:void 0,k[38]=J,k[39]=G,k[40]=U,k[41]=V,k[42]=$,k[43]=b):b=k[43],k[44]!==Q||k[45]!==Y.heading||k[46]!==en.subtitle||k[47]!==er.icon||k[48]!==b?(w=(0,a.jsx)(ei,{headerId:Q,title:Y.heading,subtitle:en.subtitle,icon:er.icon,expandableProps:b}),k[44]=Q,k[45]=Y.heading,k[46]=en.subtitle,k[47]=er.icon,k[48]=b,k[49]=w):w=k[49],k[50]!==H||k[51]!==F||k[52]!==B||k[53]!==q?(R=(0,a.jsx)(eL,{viewerCanDismissReviews:B,reviewGroup:m.Qv.Approvals,opinionatedReviews:H,pullRequestId:F,viewerCanReRequestReviews:q}),k[50]=H,k[51]=F,k[52]=B,k[53]=q,k[54]=R):R=k[54],k[55]!==F||k[56]!==z||k[57]!==B||k[58]!==q?(N=(0,a.jsx)(eL,{viewerCanDismissReviews:B,reviewGroup:m.Qv.RequestedChanges,opinionatedReviews:z,pullRequestId:F,viewerCanReRequestReviews:q}),k[55]=F,k[56]=z,k[57]=B,k[58]=q,k[59]=N):N=k[59],k[60]!==O||k[61]!==F||k[62]!==B?(j=(0,a.jsx)(eD,{reviewGroup:m.Qv.PendingReviewRequest,viewerCanDismissReviews:B,pendingRequestedReviews:O,pullRequestId:F}),k[60]=O,k[61]=F,k[62]=B,k[63]=j):j=k[63],k[64]!==R||k[65]!==N||k[66]!==j?(I=(0,a.jsxs)("div",{className:es.reviewerGroupsContainer,children:[R,N,j]}),k[64]=R,k[65]=N,k[66]=j,k[67]=I):I=k[67],k[68]!==G||k[69]!==I?(A=(0,a.jsx)(el,{isExpanded:G,children:I}),k[68]=G,k[69]=I,k[70]=A):A=k[70],k[71]!==Q||k[72]!==w||k[73]!==A?(T=(0,a.jsxs)("section",{"aria-label":"Reviews","aria-describedby":Q,className:"border-bottom color-border-subtle",children:[w,A]}),k[71]=Q,k[72]=w,k[73]=A,k[74]=T):T=k[74],T}function eU(){return(0,a.jsx)(l.CheckIcon,{size:16})}function eB(){return(0,a.jsx)(l.CodeReviewIcon,{size:16})}function eq(){return(0,a.jsx)(l.XIcon,{size:16})}function e$(){return(0,a.jsx)(l.FileDiffIcon,{size:16})}function eG(){return(0,a.jsx)(l.CheckIcon,{size:16})}try{eF.displayName||(eF.displayName="ReviewerSection")}catch{}var eW=new WeakMap,eV=new WeakMap,eQ=new WeakMap,eH=new WeakMap,ez=new WeakMap,eK=new WeakMap;let ReviewerSectionStatus=class ReviewerSectionStatus extends BaseSectionStatus{get shouldRender(){return"DIRTY"!==this.pullRequest.mergeStateStatus&&"UNKNOWN"!==this.pullRequest.mergeStateStatus&&((0,w._)(this,ez).length>0||(0,w._)(this,eK).length>0||this.consolidatedFailureReasons.length>0)}get sectionStatus(){return e1(this.numReviewsRequired,(0,w._)(this,eH),(0,w._)(this,ez),this.consolidatedFailureReasons,(0,w._)(this,eK))}get mergeBoxStatus(){switch(this.sectionStatus){case eO.APPROVED:case eO.REVIEW_REQUESTED:case eO.REVIEWED:return"PASSED";case eO.CHANGES_REQUESTED:return"FAILED";case eO.REVIEW_REQUIRED:default:return"NEUTRAL"}}get numReviewsRequired(){let e=(0,w._)(this,eQ)?.flatMap(e=>e.requiredReviewers||[])||[];return e.length?Math.max(...e):0}get consolidatedFailureReasons(){if(!(0,w._)(this,eV)){let e=(0,w._)(this,eQ)?.flatMap(e=>e.failureReasons||[])||[];(0,N._)(this,eV,[...new Set(e)].filter(e0))}return(0,w._)(this,eV)}constructor(...e){super(...e),(0,R._)(this,eQ,{get:eX,set:void 0}),(0,R._)(this,eH,{get:eJ,set:void 0}),(0,R._)(this,ez,{get:eY,set:void 0}),(0,R._)(this,eK,{get:eZ,set:void 0}),(0,R._)(this,eW,{writable:!0,value:void 0}),(0,R._)(this,eV,{writable:!0,value:void 0})}};function eX(){return(0,w._)(this,eW)||(0,N._)(this,eW,function(e){let t=e&&e.conditions.find(e=>"PULL_REQUEST_RULES"===e.type);return(t?.ruleRollups?.filter(e=>"PULL_REQUEST"===e.ruleType).map(e=>e.metadata)??[]).filter(e=>null!==e).filter(e=>"requiredReviewers"in e&&"requiresCodeowners"in e&&"failureReasons"in e).map(e=>{let t=e.failureReasons.map(e=>e.toUpperCase());return{requiredReviewers:e.requiredReviewers,requiresCodeowners:e.requiresCodeowners,failureReasons:t}})??[]}(this.mergeRequirements)),(0,w._)(this,eW)}function eJ(){return((0,w._)(this,eQ)?.filter(e=>e.requiresCodeowners)||[]).length>0}function eY(){return this.pullRequest.latestOpinionatedReviews}function eZ(){return this.pullRequest.pendingReviewRequests}let e0=e=>"CODE_OWNER_REVIEW_REQUIRED"===e||"SOC2_APPROVAL_PROCESS_REQUIRED"===e||"CHANGES_REQUESTED"===e||"MORE_REVIEWS_REQUIRED"===e||"LAST_PUSH_APPROVAL_REQUIRED"===e,e1=(e,t,n,r,a)=>0===r.length&&n.length>0&&(e>0||t)?eO.APPROVED:r.includes("CODE_OWNER_REVIEW_REQUIRED")||r.includes("SOC2_APPROVAL_PROCESS_REQUIRED")||r.includes("MORE_REVIEWS_REQUIRED")||r.includes("LAST_PUSH_APPROVAL_REQUIRED")?eO.REVIEW_REQUIRED:r.includes("CHANGES_REQUESTED")?eO.CHANGES_REQUESTED:0===e&&a.length>0&&0===n.length?eO.REVIEW_REQUESTED:eO.REVIEWED;var e2=new WeakMap,e3=new WeakMap,e5=new WeakMap,e4=new WeakMap,e6=new WeakSet;let MergeBoxStatusCalculator=class MergeBoxStatusCalculator{get overallStatus(){if("MERGED"===(0,w._)(this,e2).state)return"MERGED";if("CLOSED"===(0,w._)(this,e2).state)return"NEUTRAL";if((0,w._)(this,e2).isInMergeQueue)return"QUEUED";if((0,w._)(this,e2).isDraft)return"NEUTRAL";let e=Object.values(this.sections??[]).filter(e=>e.shouldConsiderStatus),t=e.some(e=>"FAILED"===e.mergeBoxStatus),n=e.every(e=>"PASSED"===e.mergeBoxStatus);return t&&(0,w._)(this,e2).viewerCanUpdate?"SOME_FAILED":n?"ALL_PASSED":"NEUTRAL"}get sections(){return(0,w._)(this,e4)}constructor(e,t,n){(0,I._)(this,e6),(0,R._)(this,e2,{writable:!0,value:void 0}),(0,R._)(this,e3,{writable:!0,value:void 0}),(0,R._)(this,e5,{writable:!0,value:void 0}),(0,R._)(this,e4,{writable:!0,value:void 0}),(0,N._)(this,e2,e),(0,N._)(this,e3,t),(0,N._)(this,e5,n),(0,N._)(this,e4,(0,j._)(this,e6,e7).call(this))}};function e7(){return{BlockedSection:new BlockedSectionStatus((0,w._)(this,e2),(0,w._)(this,e3),(0,w._)(this,e5)),ClosedOrMergedStateMergeBox:new ClosedOrMergedStateSectionStatus((0,w._)(this,e2),(0,w._)(this,e3),(0,w._)(this,e5)),ChecksSection:new ChecksSectionStatus((0,w._)(this,e2),(0,w._)(this,e3),(0,w._)(this,e5)),ConflictsSection:new ConflictsSectionStatus((0,w._)(this,e2),(0,w._)(this,e3),(0,w._)(this,e5)),DraftStateSection:new DraftStateSectionStatus((0,w._)(this,e2),(0,w._)(this,e3),(0,w._)(this,e5)),MergeQueueSection:new MergeQueueSectionStatus((0,w._)(this,e2),(0,w._)(this,e3),(0,w._)(this,e5)),ReviewerSection:new ReviewerSectionStatus((0,w._)(this,e2),(0,w._)(this,e3),(0,w._)(this,e5))}}var e8=n(70170),e9=n(40235),te=n(70263);function tt(e){return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}function tn(){return!document.hidden}function tr(){return!0}let ta=()=>(0,u.useSyncExternalStore)(tt,tn,tr);var ti=n(65510);function ts(e){let t,n=(0,i.c)(3),{pullRequestHeadSha:r}=e,{basePageDataUrl:a}=(0,f.Yu)(),s=`headSha:${r}`,o=`basePageDataURL:${a}`;return n[0]!==s||n[1]!==o?(t=[h.u.statusChecks,s,o],n[0]=s,n[1]=o,n[2]=t):t=n[2],t}function to(e){let t,n,r,a=(0,i.c)(9),{pullRequestHeadSha:s}=e,o=(0,p.e)(h.u.statusChecks);a[0]!==s?(t={pullRequestHeadSha:s},a[0]=s,a[1]=t):t=a[1];let l=ts(t),c=(0,y.jE)();return a[2]!==o||a[3]!==c||a[4]!==l?(n=async()=>(0,g.H)(o,l,c),a[2]=o,a[3]=c,a[4]=l,a[5]=n):n=a[5],a[6]!==l||a[7]!==n?(r={queryKey:l,queryFn:n,staleTime:1e4},a[6]=l,a[7]=n,a[8]=r):r=a[8],(0,ti.U)(r)}var tl=n(42255),tc=n(10396),td=n(97519);let tu={branchName:"ClosedOrMergedStateMergeBox-module__branchName--YOSfM"};var tm=n(4559);function th(e){let t,n,r,s,o,c,m,f,g,x,v,S,E,C,b=(0,i.c)(62),{state:w,isCrossRepo:R,headRefName:N,headRepository:j,baseRepository:I,viewerCanDeleteHeadRef:A,viewerCanRestoreHeadRef:T,deprovisionableCodespaces:k}=e,[L,M]=(0,tl.A)(),D=(0,u.useRef)(null),[P,O]=(0,tl.A)(!1),F=k?k.count:0,U=T&&k&&F>0,B=F>1?"codespaces":"codespace";b[0]!==M?(t={onError:e=>{M(e)}},b[0]=M,b[1]=t):t=b[1];let{mutate:q,isPending:$}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.deleteHeadRef),c=_(),d=(0,y.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eN.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eN.hp)(e);return(0,eN.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>{let e=new CustomEvent("head-ref-deleted");return document.dispatchEvent(e),d.invalidateQueries({queryKey:c},{cancelRefetch:!1})},s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>{o(e)},s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eR.n)(a)}(t);b[2]!==q||b[3]!==M?(n=()=>{M(void 0),q(void 0)},b[2]=q,b[3]=M,b[4]=n):n=b[4];let G=n;b[5]!==M||b[6]!==O?(r={onError:e=>{O(!1),M(e),D.current?.focus()}},b[5]=M,b[6]=O,b[7]=r):r=b[7];let{mutate:W,isPending:V}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.cleanupCodespaces),c=_(),d=(0,y.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eN.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eN.hp)(e);return(0,eN.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>{o(e)},s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eR.n)(a)}(r);b[8]!==B||b[9]!==W||b[10]!==M||b[11]!==O?(s=()=>{M(void 0),W(void 0,{onSuccess:()=>{O(!1),setTimeout(()=>(0,tm.i)(`Deleting ${B}.`),1e3)}})},b[8]=B,b[9]=W,b[10]=M,b[11]=O,b[12]=s):s=b[12];let Q=s;b[13]!==M||b[14]!==O?(o=()=>{M(void 0),O(!0)},b[13]=M,b[14]=O,b[15]=o):o=b[15];let H=o;b[16]!==N||b[17]!==j?(c=()=>j&&j.name?(0,eT.WJ9)({owner:j.ownerLogin,repo:j.name,branch:N}):"",b[16]=N,b[17]=j,b[18]=c):c=b[18];let z=c;b[19]!==U||b[20]!==w?(m=()=>U?"Branch successfully deleted":"MERGED"===w?"Pull request successfully merged and closed":"Closed with unmerged commits",b[19]=U,b[20]=w,b[21]=m):m=b[21];let K=m;b[22]!==$||b[23]!==G?(f=(0,a.jsx)(ed.Q,{loading:$,loadingAnnouncement:"Deleting branch",onClick:G,children:"Delete branch"}),b[22]=$,b[23]=G,b[24]=f):f=b[24];let X=f;b[25]!==B||b[26]!==H?(g=(0,a.jsxs)(ed.Q,{ref:D,onClick:H,children:["Delete ",B]}),b[25]=B,b[26]=H,b[27]=g):g=b[27];let J=g;b[28]===Symbol.for("react.memo_cache_sentinel")?(x=(0,a.jsx)("span",{id:"js-pull-restorable",className:"d-none"}),b[28]=x):x=b[28];let Y=x,Z=`${j?.url}/settings`;b[29]!==X||b[30]!==J||b[31]!==U||b[32]!==A?(v=()=>A?X:U?J:Y,b[29]=X,b[30]=J,b[31]=U,b[32]=A,b[33]=v):v=b[33];let et=v;b[34]!==I?.name||b[35]!==I?.ownerLogin||b[36]!==F||b[37]!==B||b[38]!==k||b[39]!==z||b[40]!==N||b[41]!==R||b[42]!==Z||b[43]!==U||b[44]!==w||b[45]!==A?(S=()=>{if("MERGED"===w)if(A)return(0,a.jsxs)(a.Fragment,{children:["You're all set \u2014 the"," ",(0,a.jsx)(tc.A,{className:(0,d.$)(tu.branchName,"d-inline wb-break-all"),href:z(),children:N})," ","branch can be safely deleted.",R&&(0,a.jsxs)(a.Fragment,{children:[" ","If you wish, you can also delete this fork of"," ",(0,a.jsx)("strong",{children:`${I?.ownerLogin}/${I?.name}`})," in the"," ",(0,a.jsx)(ee.A,{href:Z,inline:!0,children:"settings"}),"."]})]});else if(U)return(0,a.jsxs)(a.Fragment,{children:["You're all set \u2014 the ",F," ",B," for head branch can be safely deleted. You can also manage your codespaces in"," ",(0,a.jsx)(ee.A,{inline:!0,href:k.repositoryCodespacePath||"",children:"settings."})," "]});else return(0,a.jsx)(a.Fragment,{children:"You're all set \u2014 the branch has been merged."});return A?(0,a.jsxs)(a.Fragment,{children:["This pull request is closed, but the ",(0,a.jsx)(tc.A,{href:z(),children:N})," ","branch has unmerged commits."]}):(0,a.jsx)(a.Fragment,{children:"This pull request is closed."})},b[34]=I?.name,b[35]=I?.ownerLogin,b[36]=F,b[37]=B,b[38]=k,b[39]=z,b[40]=N,b[41]=R,b[42]=Z,b[43]=U,b[44]=w,b[45]=A,b[46]=S):S=b[46];let en=S;b[47]!==F||b[48]!==B||b[49]!==V||b[50]!==$||b[51]!==L||b[52]!==et||b[53]!==Q||b[54]!==K||b[55]!==P||b[56]!==M||b[57]!==O||b[58]!==en?(E=()=>{if(!L)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(td.A,{"aria-labelledby":"delete-codespaces-dialog-title",isOpen:P,returnFocusRef:D,onDismiss:()=>O(!1),children:[(0,a.jsx)(td.A.Header,{id:"delete-codespaces-dialog-title",children:"Delete Codespace?"}),(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsxs)("span",{children:["Are you sure you want to delete ",F," ",B," for the head branch?"]}),(0,a.jsxs)("div",{className:"d-flex flex-justify-end mt-3",children:[(0,a.jsx)(ed.Q,{className:"mr-1",inactive:V,onClick:()=>{V||(O(!1),D.current?.focus())},children:"Cancel"}),(0,a.jsx)(ed.Q,{className:"mr-1",variant:"danger",loading:V,loadingAnnouncement:`Deleting ${B}.`,onClick:Q,children:`Delete ${B}`})]})]})]}),(0,a.jsx)(ei,{title:K(),subtitle:en(),rightSideContent:et()})]});{let e=404!==L.cause;return(0,a.jsx)(ei,{title:"Some codespaces could not be deleted."===L.message?`Couldn't delete ${B} `:"Couldn't update branch",subtitle:L.message,rightSideContent:e?(0,a.jsx)(ed.Q,{disabled:$,leadingVisual:l.SyncIcon,onClick:()=>M(void 0),children:"Try again"}):void 0})}},b[47]=F,b[48]=B,b[49]=V,b[50]=$,b[51]=L,b[52]=et,b[53]=Q,b[54]=K,b[55]=P,b[56]=M,b[57]=O,b[58]=en,b[59]=E):E=b[59];let er=E;return b[60]!==er?(C=er(),b[60]=er,b[61]=C):C=b[61],C}try{th.displayName||(th.displayName="ClosedOrMergedStateMergeBox")}catch{}var tp=n(75177);let tf={mergeabilityIcon:"MergeabilityIcon-module__mergeabilityIcon--CV3kc"};function tg(e){let t,n,r,s,o=(0,i.c)(9),{icon:l,ariaLabel:c,iconBackgroundColor:u}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,d.$)("d-flex flex-justify-center flex-items-center mr-2 rounded-2 height-2 width-2 position-absolute",tf.mergeabilityIcon),o[0]=t):t=o[0],o[1]!==u?(n={backgroundColor:u},o[1]=u,o[2]=n):n=o[2],o[3]!==c||o[4]!==l?(r=(0,a.jsx)(eI.A,{className:"fgColor-onEmphasis",icon:l,size:24,"aria-label":c}),o[3]=c,o[4]=l,o[5]=r):r=o[5],o[6]!==n||o[7]!==r?(s=(0,a.jsx)(tp.A,{className:t,sx:n,children:r}),o[6]=n,o[7]=r,o[8]=s):s=o[8],s}try{tg.displayName||(tg.displayName="MergeabilityIcon")}catch{}let ty={mergeboxLoading:"MergeBox-module__mergeboxLoading--OhnXd",mergePartialContainer:"MergeBox-module__mergePartialContainer--psYdf",mergeBoxAdjustBorders:"MergeBox-module__mergeBoxAdjustBorders--vMX1B"};var tx=n(88657);let t_={boundaryContainer:"MergeBoxErrorState-module__boundaryContainer--QgJ7i"};function tv(e){let t,n,r,s,o,c=(0,i.c)(7),{hideIcon:d}=e;return c[0]!==d?(t=!d&&(0,a.jsx)(tg,{icon:l.GitMergeIcon,ariaLabel:"Merge status cannot be loaded",iconBackgroundColor:"neutral.emphasis"}),c[0]=d,c[1]=t):t=c[1],c[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(tx.E.Visual,{children:(0,a.jsx)(l.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),c[2]=n):n=c[2],c[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)(tx.E.Heading,{children:(0,a.jsx)("strong",{children:"Merge status cannot be loaded"})}),c[3]=r):r=c[3],c[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsxs)(tx.E,{border:!0,children:[n,r,(0,a.jsx)("div",{className:"mb-n2",children:(0,a.jsxs)(tx.E.Description,{children:["Try reloading the page, or if the problem persists"," ",(0,a.jsxs)("a",{className:"fgColor-muted",href:"https://support.github.com/",children:[(0,a.jsx)("u",{children:"contact support"}),"."]})]})}),(0,a.jsx)(tx.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status "})]}),c[4]=s):s=c[4],c[5]!==t?(o=(0,a.jsxs)("div",{className:`position-relative ${t_.boundaryContainer}`,children:[t,s]}),c[5]=t,c[6]=o):o=c[6],o}try{tv.displayName||(tv.displayName="MergeBoxErrorState")}catch{}function tS(e){let t,n=(0,i.c)(3),{bgColor:r,color:s}=e,o=void 0===r?"neutral.emphasis":r,l=void 0===s?"fg.onEmphasis":s;return n[0]!==o||n[1]!==l?(t=(0,a.jsx)(et.A,{icon:tE,size:32,sx:{bg:o,color:l}}),n[0]=o,n[1]=l,n[2]=t):t=n[2],t}function tE(){return(0,a.jsx)(l.AlertFillIcon,{size:16})}try{tS.displayName||(tS.displayName="AlertIcon")}catch{}var tC=n(73017);let tb={BlockedSectionMessage:"BlockedSection-module__BlockedSectionMessage--kuN11"};function tw(e){let t,n,r,s=(0,i.c)(5),{failingConditionsAndRules:o}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(tS,{bgColor:"danger.emphasis"}),s[0]=t):t=s[0],s[1]!==o?(n=o.map(tR),s[1]=o,s[2]=n):n=s[2],s[3]!==n?(r=(0,a.jsx)("section",{"aria-label":"Merging is blocked",className:"border-bottom borderColor-muted",children:(0,a.jsx)(ei,{title:"Merging is blocked",icon:t,children:(0,a.jsx)("ul",{className:"list-style-none",children:n})})}),s[3]=n,s[4]=r):r=s[4],r}function tR(e){return e&&"message"in e&&(0,a.jsxs)("li",{className:tb.BlockedSectionMessage,children:[(0,a.jsx)(tC.JR,{html:e.message||""})," ",(0,a.jsx)(tN,{ruleName:e.displayName})]},e.displayName)}function tN(e){let t=(0,i.c)(1),{ruleName:n}=e;if("UNVERIFIED_EMAIL"===n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)(a.Fragment,{children:["You will be able to merge this pull request after you"," ",(0,a.jsx)(ee.A,{href:"/settings/emails",inline:!0,children:"verify your email address"}),"."]}),t[0]=e):e=t[0],e}return null}try{tw.displayName||(tw.displayName="BlockedSection")}catch{}try{tN.displayName||(tN.displayName="AdditionalMessaging")}catch{}let tj={ACTION_REQUIRED:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},CANCELLED:{icon:l.StopIcon,iconColor:"var(--fgColor-muted, var(--color-fg-muted))",isPending:!1,isSuccess:!1},COMPLETED:{icon:l.CheckIcon,iconColor:"var(--fgColor-success, var(--color-success-fg))",isSuccess:!0,isPending:!1},ERROR:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},EXPECTED:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},FAILURE:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},IN_PROGRESS:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},NEUTRAL:{icon:l.SquareFillIcon,iconColor:"var(--fgColor-muted, var(--color-fg-muted))",isPending:!1,isSuccess:!1},PENDING:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},QUEUED:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},REQUESTED:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",backgroundColor:"none",isPending:!1,isSuccess:!1},SKIPPED:{icon:l.SkipIcon,iconColor:"var(--fgColor-muted, var(--color-fg-muted))",isPending:!1,isSuccess:!1},STALE:{icon:l.MoonIcon,iconColor:"var(--fgColor-muted, var(--color-fg-muted))",isPending:!1,isSuccess:!1},STARTUP_FAILURE:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},SUCCESS:{icon:l.CheckIcon,iconColor:"var(--fgColor-success, var(--color-success-fg))",isSuccess:!0,isPending:!1},TIMED_OUT:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},WAITING:{icon:l.ClockIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},_UNKNOWN_VALUE:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1}},tI={FAILURE:"failing",NEUTRAL:"neutral",TIMED_OUT:"timed out",CANCELLED:"cancelled",STALE:"stale",PENDING:"pending",IN_PROGRESS:"in progress",REQUESTED:"requested",QUEUED:"queued",SKIPPED:"skipped",EXPECTED:"expected",SUCCESS:"successful",ALL:"all"};Object.keys(tj);let tA=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});function tT(e,t){return tA.compare(e.displayName,t.displayName)}function tk(e,t,n,r){if(r?.statusChecksGrouping==="ungrouped")return{ALL:e};let a={};for(let e of Object.keys(t))a[e]=[];return e.reduce((e,r)=>{let a=n(r),i=Object.keys(t).find(e=>t[e].includes(a));if(i){let t=e[i];t&&t.push(r)}return e},a)}function tL(e,t,n){if(n?.statusChecksGrouping==="ungrouped")return{ALL:e.reduce((e,t)=>e+t.count,0)};let r=tk(e,t,e=>e.state,n);return Object.fromEntries(Object.keys(r).map(e=>{let t;return[e,(t=r[e],t?.reduce((e,t)=>e+t.count,0)??0)]}))}function tM(e){let t={};for(let n of e)t[n.state]=n.count;return{statusCheckCounts:JSON.stringify(t)}}var tD=n(72931);let tP={PASSED:"success",PENDING:"pending",PENDING_APPROVAL:"pending",PENDING_FAILED:"failure",PENDING_CONFLICTS:"pending",SOME_FAILED:"failure",FAILED:"failure"};function tO(){(0,tD.gd)()}function tF(){return(0,tD.iD)("merge-queue"),tU}function tU(){(0,tD.gd)()}var tB=n(91747),tq=n(5945),t$=n(87330);let tG={status_checks_grouping_preference:["grouped_by_status","ungrouped"]},tW={checksGroupHeadingButton:"ExpandedChecks-module__checksGroupHeadingButton--PCfYf",checksContainer:"ExpandedChecks-module__checksContainer--ZfNYB",containPaint:"ExpandedChecks-module__containPaint--TRfkR",expandableWrapper:"ExpandedChecks-module__expandableWrapper--aGEIv",expandableListView:"ExpandedChecks-module__expandableListView--QDJPW",isExpanded:"ExpandedChecks-module__isExpanded--pq8Vj",groupHeader:"ExpandedChecks-module__groupHeader--jZHKD",totalChecksCountText:"ExpandedChecks-module__totalChecksCountText--buDCm",checkSettingsButton:"ExpandedChecks-module__checkSettingsButton--MONZT"},tV={ErrorFlash:"ChecksGroup-module__ErrorFlash--WJCJc",ErrorOcticon:"ChecksGroup-module__ErrorOcticon--JPT2T"};function tQ(e){let t,n,r,s,o,c,m=(0,i.c)(30),{children:f,count:g,groupStatus:x,isToggleVisible:v,analyticsMetadata:S,showSettingsIcon:E,setUserPreferences:C,pullRequestId:b,userPreferences:w}=e;m[0]!==g||m[1]!==w?.statusChecksGrouping?(t=function(e){return w?.statusChecksGrouping==="ungrouped"?g>1?`${g} checks`:`${g} check`:`${g} ${e} check${g>1?"s":""}`},m[0]=g,m[1]=w?.statusChecksGrouping,m[2]=t):t=m[2];let R=t,[N,j]=(0,em.Fo)(`${b}:checksGroup:${x}Expanded`,!0),{sendAnalyticsEvent:I}=(0,Z.s)(),A=tI[x],T=(0,u.useId)(),k=N||!v,L=R(A),M=!v||N,[D,P]=(0,tl.A)(null);m[3]!==P?(n={onError:e=>{P(e.message)}},m[3]=P,m[4]=n):n=m[4];let{mutate:O}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.updateMergeBoxUserPreference),c=_(),d=(0,y.jE)();return s[0]!==l?(t=async e=>{if(!e.preferenceName||!e.preference)throw Error("Preference name and value must be provided.");if(!(e.preferenceName in tG))throw Error("Invalid preference name.");if(!tG[e.preferenceName].includes(e.preference))throw Error("Invalid preference value.");let t=await (0,eN.q$)(l,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eN.hp)(t);return(0,eN.R)(t,n),n},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>{o(e)},s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eR.n)(a)}(n);return m[5]!==S||m[6]!==T||m[7]!==x||m[8]!==L||m[9]!==N||m[10]!==I||m[11]!==j||m[12]!==C||m[13]!==v||m[14]!==E||m[15]!==O||m[16]!==w?(r=v&&(0,a.jsxs)("div",{className:tW.groupHeader,children:[w?.statusChecksGrouping==="ungrouped"?(0,a.jsxs)("span",{className:(0,d.$)(tW.totalChecksCountText,"pl-2 text-semibold f6"),children:[" ",L," "]}):(0,a.jsx)(ed.Q,{"aria-controls":T,"aria-expanded":N,"aria-label":N?`Collapse ${L} group`:`Expand ${L} group`,className:tW.checksGroupHeadingButton,variant:"invisible",size:"small",trailingVisual:()=>(0,a.jsx)(eh,{isExpanded:N}),onClick:()=>{I(N?"checks_group.collapse":"checks_group.expand","MERGEBOX_CHECKS_GROUP_TOGGLE_BUTTON",{...S,group:x}),j(!N)},children:L}),E&&C&&(0,a.jsxs)(tq.W,{children:[(0,a.jsx)(tq.W.Anchor,{children:(0,a.jsx)(t$.K,{icon:l.GearIcon,variant:"invisible","aria-label":"Checks settings",className:tW.checkSettingsButton})}),(0,a.jsx)(tq.W.Overlay,{width:"auto",children:(0,a.jsxs)(eS.l,{selectionVariant:"single",children:[(0,a.jsx)(eS.l.Item,{onSelect:()=>{w?.statusChecksGrouping!=="grouped_by_status"&&(O({preferenceName:"status_checks_grouping_preference",preference:"grouped_by_status"}),C({...w,statusChecksGrouping:"grouped_by_status"}))},selected:w?.statusChecksGrouping==="grouped_by_status",children:"Group by status"}),(0,a.jsx)(eS.l.Item,{onSelect:()=>{w?.statusChecksGrouping!=="ungrouped"&&(O({preferenceName:"status_checks_grouping_preference",preference:"ungrouped"}),C({...w,statusChecksGrouping:"ungrouped"}))},selected:w?.statusChecksGrouping==="ungrouped",children:"No grouping"})]})})]})]}),m[5]=S,m[6]=T,m[7]=x,m[8]=L,m[9]=N,m[10]=I,m[11]=j,m[12]=C,m[13]=v,m[14]=E,m[15]=O,m[16]=w,m[17]=r):r=m[17],m[18]!==D?(s=D&&(0,a.jsxs)(eE.A,{variant:"danger",className:tV.ErrorFlash,children:[(0,a.jsx)(eI.A,{icon:l.StopIcon,className:tV.ErrorOcticon}),D]}),m[18]=D,m[19]=s):s=m[19],m[20]!==f||m[21]!==T||m[22]!==A||m[23]!==M||m[24]!==k?(o=M&&(0,a.jsx)("div",{className:(0,d.$)(tW.expandableWrapper,k&&tW.isExpanded),id:T,"aria-label":`${A} checks`,role:"group",children:(0,a.jsx)("div",{className:tW.expandableListView,children:(0,a.jsx)(ec.u,{title:`${A} checks`,titleHeaderTag:"h3",strictFocusZone:!1,children:f})})}),m[20]=f,m[21]=T,m[22]=A,m[23]=M,m[24]=k,m[25]=o):o=m[25],m[26]!==r||m[27]!==s||m[28]!==o?(c=(0,a.jsxs)("div",{children:[r,s,o]}),m[26]=r,m[27]=s,m[28]=o,m[29]=c):c=m[29],c}try{tQ.displayName||(tQ.displayName="ChecksGroup")}catch{}var tH=n(89169),tz=n(21654),tK=n(12908),tX=n(51880),tJ=n(4929);let tY={spinnerWrapper:"StatusCheckRow-module__spinnerWrapper--AjdFv",spinnerInner:"StatusCheckRow-module__spinnerInner--KITho",staticSpinner:"StatusCheckRow-module__staticSpinner--zUcDB",checksSpinnerWrapper:"StatusCheckRow-module__checksSpinnerWrapper--HgboO",title:"StatusCheckRow-module__title--KooFt",titleHeader:"StatusCheckRow-module__titleHeader--Qx8JS",titleDescription:"StatusCheckRow-module__titleDescription--sgUXB",leadingVisual:"StatusCheckRow-module__leadingVisual--JETy5",requiredLabel:"StatusCheckRow-module__requiredLabel--cYbp_"};var tZ=n(39619),t0=n(51213);let t1={statusCheckActionBar:"StatusCheckRowActionBar-module__statusCheckActionBar--Ipu3V"};var t2=n(68637);function t3(e){let t,n,r,s=(0,i.c)(5),{failureContext:o}=e;s[0]!==o.jobId?(t=()=>(0,tZ.qR)({id:"copilot-explain-error-action",intent:t0.wh.actionsAgent,content:(0,t2.oo)(o.jobId),references:[]}),s[0]=o.jobId,s[1]=t):t=s[1];let c=t;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(eS.l.LeadingVisual,{children:(0,a.jsx)(l.CopilotIcon,{})}),s[2]=n):n=s[2],s[3]!==c?(r=(0,a.jsxs)(eS.l.Item,{onSelect:c,children:["Explain error",n]}),s[3]=c,s[4]=r):r=s[4],r}function t5(e){let t,n,r,s=(0,i.c)(6),{targetUrl:o}=e,{sendAnalyticsEvent:c}=(0,Z.s)();s[0]!==c?(t=()=>{c("status_check_row_action_bar.view_details_click","VIEW_DETAILS_MENU_ITEM")},s[0]=c,s[1]=t):t=s[1];let d=t;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(eS.l.LeadingVisual,{children:(0,a.jsx)(l.ArrowRightIcon,{})}),s[2]=n):n=s[2],s[3]!==d||s[4]!==o?(r=(0,a.jsxs)(eS.l.LinkItem,{href:o,onClick:d,children:["View details",n]}),s[3]=d,s[4]=o,s[5]=r):r=s[5],r}function t4(e){let t,n=(0,i.c)(7),{copilotCheckRunFailureContext:r,targetUrl:s}=e;if(n[0]!==r||n[1]!==s){let e=[];if(null!=r){let t;n[3]!==r?(t={key:"copilot-explain-error",render:()=>(0,a.jsx)(t3,{failureContext:r})},n[3]=r,n[4]=t):t=n[4],e.push(t)}if(s){let t;n[5]!==s?(t={key:"view-details",render:()=>(0,a.jsx)(t5,{targetUrl:s})},n[5]=s,n[6]=t):t=n[6],e.push(t)}t=(0,a.jsx)(ej.L,{label:"actions",staticMenuActions:e,className:t1.statusCheckActionBar}),n[0]=r,n[1]=s,n[2]=t}else t=n[2];return t}try{t3.displayName||(t3.displayName="CopilotExplainErrorMenuItem")}catch{}try{t5.displayName||(t5.displayName="ViewDetailsMenuItem")}catch{}try{t4.displayName||(t4.displayName="StatusCheckRowActionBar")}catch{}function t6(e){let t,n,r=(0,i.c)(5),{iconColor:s,icon:o}=e;return r[0]!==s?(t={color:s},r[0]=s,r[1]=t):t=r[1],r[2]!==o||r[3]!==t?(n=(0,a.jsx)(eI.A,{icon:o,sx:t}),r[2]=o,r[3]=t,r[4]=n):n=r[4],n}function t7(e){let t,n,r,s=(0,i.c)(5),{animated:o}=e,d=void 0===o||o;return s[0]!==d?(t=d?(0,a.jsx)(c.A,{size:"small"}):(0,a.jsx)(l.CircleIcon,{size:"small",className:tY.staticSpinner}),s[0]=d,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("div",{className:tY.spinnerWrapper,children:(0,a.jsx)("div",{className:tY.spinnerInner})}),s[2]=n):n=s[2],s[3]!==t?(r=(0,a.jsxs)("div",{className:tY.checksSpinnerWrapper,children:[t,n]}),s[3]=t,s[4]=r):r=s[4],r}let t8=(0,u.memo)(function(e){let t,n,r,s,o,l,c,m,h,p,f,g,y,x,_,v,S=(0,i.c)(48),{additionalContext:E,avatarUrl:C,avatarBackgroundColor:b,copilotCheckRunFailureContext:w,description:R,displayName:N,state:j,stateChangedAt:I,targetUrl:A,isRequired:T,reserveSpaceForRequiredBadge:k,reserveSpaceForActionBar:L,shouldAnimate:M}=e,D=void 0===M||M,P=tj[j],O=`${N} ${E?E.charAt(0).toLowerCase()+E.slice(1):""}`,F=k&&!L,[U,B]=(0,u.useState)(!1),q=(0,u.useRef)(null),$=(0,u.useRef)(null);S[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=new ResizeObserver(()=>{if(q.current&&$.current){let e=$.current.offsetWidth;B(q.current.offsetWidth+31>e)}});return $.current&&e.observe($.current),()=>{e.disconnect()}},S[0]=t):t=S[0],S[1]!==N?(n=[N],S[1]=N,S[2]=n):n=S[2],(0,u.useEffect)(t,n),S[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)("div",{}),S[3]=r):r=S[3],S[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,d.$)(ev.listItem),S[4]=s):s=S[4],S[5]!==w||S[6]!==L||S[7]!==A?(o=L?(0,a.jsx)(t4,{copilotCheckRunFailureContext:w,targetUrl:A}):(0,a.jsx)(a.Fragment,{}),S[5]=w,S[6]=L,S[7]=A,S[8]=o):o=S[8],S[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,d.$)(tY.leadingVisual,"mt-2"),S[9]=l):l=S[9],S[10]!==D||S[11]!==j||S[12]!==P?(c="IN_PROGRESS"===j?(0,a.jsx)(t7,{animated:D}):(0,a.jsx)(t6,{icon:P.icon,iconColor:P.iconColor}),S[10]=D,S[11]=j,S[12]=P,S[13]=c):c=S[13],S[14]!==b||S[15]!==C||S[16]!==N?(m=C?(0,a.jsx)(e_.r,{alt:N,size:20,square:!0,src:C,className:"flex-shrink-0 ml-2 mr-2",style:b?{backgroundColor:b}:void 0}):(0,a.jsx)(tK.N,{size:20,square:!0,className:"flex-shrink-0 ml-2 mr-2"}),S[14]=b,S[15]=C,S[16]=N,S[17]=m):m=S[17],S[18]!==c||S[19]!==m?(h=(0,a.jsx)(tX.B,{children:(0,a.jsxs)(ex.e,{className:l,children:[c,m]})}),S[18]=c,S[19]=m,S[20]=h):h=S[20];let G=N??"",W=A??void 0,V=U?`${N} ${E} ${R}`:void 0;S[21]!==V?(p={title:V},S[21]=V,S[22]=p):p=S[22];let Q=("IN_PROGRESS"===j||"QUEUED"===j)&&"text-italic";S[23]!==Q?(f=(0,d.$)(tY.titleDescription,Q),S[23]=Q,S[24]=f):f=S[24],S[25]!==E||S[26]!==j||S[27]!==I?(g=function({state:e,stateChangedAt:t,additionalContext:n}){switch(e){case"IN_PROGRESS":return(0,a.jsxs)("span",{children:["Started ",(0,a.jsx)(tH.A,{datetime:t})]});case"SKIPPED":return(0,a.jsxs)("span",{children:["Skipped ",(0,a.jsx)(tH.A,{datetime:t})]});case"QUEUED":return(0,a.jsx)("span",{children:"Queued"});default:return(0,a.jsx)("span",{children:n})}}({state:j,stateChangedAt:I,additionalContext:E}),S[25]=E,S[26]=j,S[27]=I,S[28]=g):g=S[28];let H=R&&`\u{2014} ${R}`;return S[29]!==f||S[30]!==g||S[31]!==H?(y=(0,a.jsxs)("span",{className:f,children:[g," ",H]}),S[29]=f,S[30]=g,S[31]=H,S[32]=y):y=S[32],S[33]!==G||S[34]!==W||S[35]!==p||S[36]!==y?(x=(0,a.jsx)(ey.ao,{containerClassName:tY.title,headingClassName:tY.titleHeader,value:G,href:W,linkProps:p,headingRef:q,headerContainerRef:$,children:y}),S[33]=G,S[34]=W,S[35]=p,S[36]=y,S[37]=x):x=S[37],S[38]!==T||S[39]!==F||S[40]!==k?(_=k?(0,a.jsx)(tJ.V,{children:T&&(0,a.jsx)("div",{className:(0,d.$)(tY.requiredLabel,"flex-shrink-0 fgColor-default",F&&"pr-3"),children:(0,a.jsx)(tz.A,{children:"Required"})})}):(0,a.jsx)("div",{className:"px-5"}),S[38]=T,S[39]=F,S[40]=k,S[41]=_):_=S[41],S[42]!==O||S[43]!==h||S[44]!==x||S[45]!==_||S[46]!==o?(v=(0,a.jsxs)(eg.c,{title:r,"aria-label":O,className:s,secondaryActions:o,children:[h,x,_]}),S[42]=O,S[43]=h,S[44]=x,S[45]=_,S[46]=o,S[47]=v):v=S[47],v});try{t6.displayName||(t6.displayName="StatusIcon")}catch{}try{t7.displayName||(t7.displayName="CheckSpinner")}catch{}try{t8.displayName||(t8.displayName="StatusCheckRow")}catch{}let t9={FAILURE:["CANCELLED","ERROR","FAILURE","STALE","STARTUP_FAILURE","TIMED_OUT"],PENDING:["ACTION_REQUIRED","EXPECTED","PENDING","QUEUED","REQUESTED","WAITING","_UNKNOWN_VALUE"],IN_PROGRESS:["IN_PROGRESS"],SKIPPED:["SKIPPED"],NEUTRAL:["NEUTRAL"],SUCCESS:["SUCCESS","COMPLETED"]};function ne({pullRequestId:e,statusChecks:t,statusRollupSummary:n,mergeBoxUserPreferences:r}){let[i,s]=(0,u.useState)(r||null),o=(0,u.useMemo)(()=>t.sort(tT),[t]),l=tL(n,t9,i),c=tk(o,t9,e=>e.state,i),m=(0,tB.u)("mergebox_smarter_checks_keys"),h=(0,tB.u)("mergebox_paint_containment"),p=t.some(e=>e.isRequired),f=t.some(e=>e.copilotCheckRunFailureContext||!!e.targetUrl),g=Object.entries(l).reduce((e,[,t])=>t>0?e+1:e,0),y=t.length>0&&t.every(e=>e.state===t[0]?.state),x=g>1||i?.statusChecksGrouping==="ungrouped"&&!y;return(0,a.jsx)("div",{className:(0,d.$)(tW.checksContainer,{[tW.containPaint]:h}),children:Object.entries(l).filter(([,e])=>e>0).map(([t,r],o)=>{let l=r<50;return(0,a.jsx)(tQ,{count:r,groupStatus:t,isToggleVisible:x,pullRequestId:e,analyticsMetadata:tM(n),setUserPreferences:s,userPreferences:i,showSettingsIcon:i&&0===o,children:c[t]?.map(e=>{if(!e)return null;let t=m?`${e.displayName}-${e.state}-${e.targetUrl}-${e.stateChangedAt}`:crypto.randomUUID();return(0,a.jsx)(t8,{...e,shouldAnimate:l,reserveSpaceForActionBar:f,reserveSpaceForRequiredBadge:p},t)})},t)})})}try{ne.displayName||(ne.displayName="ExpandedChecksList")}catch{}let nt={iconWrapper:"StatusCheckStatesIcon-module__iconWrapper--LPiWu",icon:"StatusCheckStatesIcon-module__icon--trJdb","icon-animate":"StatusCheckStatesIcon-module__icon-animate--U9a0b"},nn={PASSING:(0,a.jsx)(et.A,{icon:()=>(0,a.jsx)(l.CheckIcon,{size:16}),className:"bgColor-success-emphasis fgColor-onEmphasis",size:32}),FAILING:(0,a.jsx)(et.A,{icon:()=>(0,a.jsx)(l.XIcon,{size:16}),className:"bgColor-danger-emphasis fgColor-onEmphasis",size:32})},nr={FAILURE:["CANCELLED","ERROR","FAILURE","STALE","STARTUP_FAILURE","TIMED_OUT"],PENDING:["_UNKNOWN_VALUE","EXPECTED","QUEUED","PENDING","WAITING","REQUESTED","ACTION_REQUIRED","IN_PROGRESS"],SKIPPED:["SKIPPED","NEUTRAL"],SUCCESS:["SUCCESS","COMPLETED"]},na={length:1e3,delay:0},ni={FAILURE:"var(--fgColor-danger)",SUCCESS:"var(--fgColor-success)",PENDING:"var(--fgColor-attention)",SKIPPED:"var(--fgColor-neutral)"},ns=2*Math.PI*44,no={gapPercent:5,strokeWidth:12,size:32,circleSize:100,circumference:ns,percentToDegree:3.6,percentToPx:ns/100};function nl({statusRollupSummary:e}){let[t,n]=(0,u.useState)(!1),r=(0,u.useRef)(void 0),i=(0,u.useMemo)(()=>(function(e){let t,n=tL(e,nr),r=[{name:"SUCCESS",count:n.SUCCESS??0},{name:"SKIPPED",count:n.SKIPPED??0},{name:"PENDING",count:n.PENDING??0},{name:"FAILURE",count:n.FAILURE??0}].flatMap(e=>e?[e]:[]).filter(e=>!!e.count&&e.count>0),a=r.reduce((e,t)=>e+t.count,0),i=[],s=r.length??0,o=r.filter(({count:e})=>e/a*100<6).map(e=>e.name),l=(t=0,3===o.length?t=15/(s-3):2===o.length?t=10/(s-2):1===o.length&&(t=5/(s-1)),t);return r.map((e,t)=>{var n,r;let c;if(n=e.name,!Object.keys(nr).includes(n))return null;let d=e.count;if(!d)return null;let u=(r=e.name,c=d/a*100,(s>1&&(c-=no.gapPercent),o.includes(r))?c+5:c-l),m={name:e.name,percentage:u,dashArray:`${Math.max(u*no.percentToPx,0)} ${no.circumference}`,transform:function(e,t,n,r){let a=0;((0!==n||n!==r-1)&&r>1||2===r)&&(a=2.5);let i=((e,t)=>{if(0===e)return e;let n=0;for(let e=0;e<t.length;e++){let r=t[e];r&&(n+=r+no.gapPercent)}return n})(e,t);return`rotate(${-90+(i+a)*no.percentToDegree}deg)`}(u,i,t,s),stroke:ni[e.name]};return i.push(u),m}).flatMap(e=>e?[e]:[])})(e),[e]),s=1===e.length&&e[0]?.state==="SUCCESS",o=1===e.length&&e[0]?.state==="FAILURE",l=!s&&!o||t;return(0,u.useMemo)(()=>{void 0!==r.current&&e.length>0&&n(!0),r.current=e},[e]),(0,a.jsxs)("div",{className:nt.iconWrapper,children:[s&&(0,a.jsx)("div",{className:(0,d.$)(nt.icon,t&&nt["icon-animate"]),children:nn.PASSING}),o&&(0,a.jsx)("div",{className:(0,d.$)(nt.icon,t&&nt["icon-animate"]),children:nn.FAILING}),l&&(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${no.circleSize} ${no.circleSize}`,shapeRendering:"crispEdges",width:no.size,height:no.size,style:{userSelect:"none",zoom:"reset"},fill:"none","aria-hidden":"true",children:i.map(e=>(0,a.jsx)("circle",{cx:no.circleSize/2,cy:no.circleSize/2,r:44,style:{strokeLinecap:"round",strokeLinejoin:"round",strokeDashoffset:0,strokeWidth:no.strokeWidth,transition:`all ${na.length}ms ease ${na.delay}ms`,transformOrigin:"50% 50%",shapeRendering:"geometricPrecision",strokeDasharray:e.dashArray,transform:e.transform,stroke:e.stroke}},e.name))})]})}try{nl.displayName||(nl.displayName="StatusCheckStatesIcon")}catch{}let nc={FAILURE:["ERROR","FAILURE","STARTUP_FAILURE"],TIMED_OUT:["TIMED_OUT"],CANCELLED:["CANCELLED"],SUCCESS:["SUCCESS"],STALE:["STALE"],PENDING:["ACTION_REQUIRED","PENDING","WAITING","_UNKNOWN_VALUE"],IN_PROGRESS:["IN_PROGRESS"],QUEUED:["QUEUED"],NEUTRAL:["NEUTRAL"],SKIPPED:["SKIPPED"],EXPECTED:["EXPECTED"],REQUESTED:["REQUESTED"]};function nd(e){let t,n,r,s,o,c,d,u,m=(0,i.c)(27),{checkSectionAriaId:f,pendingWorkflowApprovalRollup:g,statusRollup:x,statusChecks:_,pullRequestHeadSha:v,pullRequestId:S,focusPrimaryMergeButton:E,mergeBoxUserPreferences:C}=e;m[0]!==v?(t={pullRequestHeadSha:v},m[0]=v,m[1]=t):t=m[1];let{isPending:b,mutate:w}=function(e){let t,n,r,a,s=(0,i.c)(10),{pullRequestHeadSha:o}=e,l=(0,p.e)(h.u.runActionRequiredWorkflows);s[0]!==o?(t={pullRequestHeadSha:o},s[0]=o,s[1]=t):t=s[1];let c=ts(t),d=(0,y.jE)();return s[2]!==l?(n=async()=>{let e=await (0,eN.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eN.hp)(e);return(0,eN.R)(e,t),t},s[2]=l,s[3]=n):n=s[3],s[4]!==d||s[5]!==c?(r=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[4]=d,s[5]=c,s[6]=r):r=s[6],s[7]!==n||s[8]!==r?(a={mutationFn:n,onSuccess:r},s[7]=n,s[8]=r,s[9]=a):a=s[9],(0,eR.n)(a)}(t),R=()=>{I(null),w(void 0,{onSuccess:()=>{setTimeout(nu,1e3),E()},onError:e=>I(e.message)})},[N,j]=(0,tl.A)(null),I=j,{workflowsRequiringApprovalCount:A,hasExpiredWorkflowRuns:T,approvalRequiredMessage:k,helpLink:L,viewerCanApproveWorkflowRuns:M}=g,D=`${A} workflow${1===A?"":"s"} awaiting approval`;m[2]!==k||m[3]!==T||m[4]!==L?(n=T?"Unable to re-run one or more workflows because they were created over a month ago.":(0,a.jsxs)(a.Fragment,{children:[k," ",(0,a.jsx)(ee.A,{inline:!0,href:L,children:"Learn more about approving workflows."})]}),m[2]=k,m[3]=T,m[4]=L,m[5]=n):n=m[5];let P=n;return m[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)(tS,{bgColor:"attention.emphasis",color:"fg.onEmphasis"}),m[6]=r):r=m[6],m[7]!==R||m[8]!==b||m[9]!==M?(s=M?(0,a.jsx)(ed.Q,{loading:b,loadingAnnouncement:"Re-running workflows",onClick:R,children:"Approve workflows to run"}):void 0,m[7]=R,m[8]=b,m[9]=M,m[10]=s):s=m[10],m[11]!==f||m[12]!==P||m[13]!==s||m[14]!==D?(o=(0,a.jsx)(ei,{headerId:f,title:D,subtitle:P,icon:r,rightSideContent:s}),m[11]=f,m[12]=P,m[13]=s,m[14]=D,m[15]=o):o=m[15],m[16]!==N?(c=N&&(0,a.jsxs)(eE.A,{className:"m-3",variant:"danger",children:[(0,a.jsx)(eI.A,{className:"mr-2",icon:l.StopIcon}),N]}),m[16]=N,m[17]=c):c=m[17],m[18]!==C||m[19]!==S||m[20]!==_||m[21]!==x.summary?(d=x.summary.length>0&&(0,a.jsx)(el,{isExpanded:!0,children:(0,a.jsx)(ne,{pullRequestId:S,statusChecks:_,statusRollupSummary:x.summary,mergeBoxUserPreferences:C})}),m[18]=C,m[19]=S,m[20]=_,m[21]=x.summary,m[22]=d):d=m[22],m[23]!==o||m[24]!==c||m[25]!==d?(u=(0,a.jsxs)(a.Fragment,{children:[o,c,d]}),m[23]=o,m[24]=c,m[25]=d,m[26]=u):u=m[26],u}function nu(){return(0,tm.i)("Successfully approved and re-requested workflows.")}let nm={PASSED:"All checks have passed",PENDING:"Some checks haven't completed yet",PENDING_APPROVAL:"Some checks are waiting for approval",PENDING_FAILED:"Some checks were not successful",SOME_FAILED:"Some checks were not successful",FAILED:"All checks have failed",PENDING_CONFLICTS:"Checks awaiting conflict resolution",UNKNOWN:"Checks status is unknown"};function nh(e){let t,n,r,s,o,l=(0,i.c)(18),{pullRequestId:c,pullRequestHeadSha:d,focusPrimaryMergeButton:m,sectionStatus:h,shouldRender:p,mergeBoxUserPreferences:f}=e;l[0]!==d?(t={pullRequestHeadSha:d},l[0]=d,l[1]=t):t=l[1];let{data:g}=to(t),{aliveChannels:y,statusRollup:x,statusChecks:_}=g,v="PASSED"===x.combinedState,[S,E]=(0,em.Fo)(`${c}:checksExpanded`,!v),{sendAnalyticsEvent:C}=(0,Z.s)(),b=(0,u.useId)();!function(e,t){let n,r,a,s,o,l=(0,i.c)(10);l[0]!==t?(n={pullRequestHeadSha:t},l[0]=t,l[1]=n):n=l[1];let{refetch:c}=to(n),d=(0,te.A)(),u=ta()?2e3:1e4;l[2]!==d||l[3]!==c?(a=()=>{d()&&c()},l[2]=d,l[3]=c,l[4]=a):a=l[4],l[5]!==a||l[6]!==u?(s=(0,e8.n)(a,u),l[5]=a,l[6]=u,l[7]=s):s=l[7],r=s,l[8]!==r?(o=e=>{window.setTimeout(r,e.wait||0)},l[8]=r,l[9]=o):o=l[9];let m=o;(0,e9.x)(e,m)}(y.commitHeadShaChannel,d);let w=(0,i.c)(4);w[0]!==x.combinedState||w[1]!==x.summary.length?(s=()=>{if(0===x.summary.length)(0,tD.gd)();else{let e=tP[x.combinedState];(0,tD.iD)(e)}return tO},o=[x.combinedState,x.summary.length],w[0]=x.combinedState,w[1]=x.summary.length,w[2]=s,w[3]=o):(s=w[2],o=w[3]),(0,u.useEffect)(s,o);let R=x.pendingWorkflowApprovalRollup;return p?(l[2]!==b||l[3]!==S||l[4]!==m||l[5]!==f||l[6]!==d||l[7]!==c||l[8]!==h||l[9]!==C||l[10]!==E||l[11]!==_||l[12]!==x||l[13]!==R?(n="PENDING_APPROVAL"===x.combinedState&&R?(0,a.jsx)(nd,{checkSectionAriaId:b,pendingWorkflowApprovalRollup:R,statusRollup:x,statusChecks:_,pullRequestHeadSha:d,pullRequestId:c,focusPrimaryMergeButton:m,mergeBoxUserPreferences:f}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ei,{headerId:b,title:nm[h],subtitle:function(e){if(0===e.length)return"No checks available.";let t=tL(e,nc),n=Object.keys(t).reduce((e,n)=>{let r=t[n];return r?e+r:e},0),r=Object.keys(tI).map(e=>{let n=t[e]??0,r=tI[e];return n>0?`${n} ${r}`:void 0}).filter(Boolean).join(", ");return`${r} ${n>1?"checks":"check"}`}(x.summary),icon:(0,a.jsx)(nl,{statusRollupSummary:x.summary}),expandableProps:{ariaLabel:S?"Collapse checks":"Expand checks",isExpanded:S,onToggle:()=>{C(S?"checks_section.collapse":"checks_section.expand","MERGEBOX_CHECKS_SECTION_TOGGLE_BUTTON",tM(x.summary)),E(!S)}}}),(0,a.jsx)(el,{isExpanded:S,children:(0,a.jsx)(ne,{statusChecks:_,statusRollupSummary:x.summary,pullRequestId:c,mergeBoxUserPreferences:f})})]}),l[2]=b,l[3]=S,l[4]=m,l[5]=f,l[6]=d,l[7]=c,l[8]=h,l[9]=C,l[10]=E,l[11]=_,l[12]=x,l[13]=R,l[14]=n):n=l[14],l[15]!==b||l[16]!==n?(r=(0,a.jsx)("section",{"aria-label":"Checks","aria-describedby":b,className:"border-bottom color-border-subtle",children:n}),l[15]=b,l[16]=n,l[17]=r):r=l[17],r):null}try{nd.displayName||(nd.displayName="PendingApprovalChecksSection")}catch{}try{nh.displayName||(nh.displayName="ChecksSection")}catch{}function np(){let e,t,n,r,s=(0,i.c)(6),{basePageDataUrl:o}=(0,f.Yu)();s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(ee.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),s[0]=e):e=s[0];let c=`${o}/checks`;return s[1]!==c?(t=(0,a.jsxs)(a.Fragment,{children:["Try again or if the problem persists"," ",e," ","or"," ",(0,a.jsx)(ee.A,{href:c,inline:!0,children:"view the Checks tab."})]}),s[1]=c,s[2]=t):t=s[2],s[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(l.AlertIcon,{className:"mx-1",size:24}),s[3]=n):n=s[3],s[4]!==t?(r=(0,a.jsx)("section",{"aria-label":"Checks",className:"border-bottom borderColor-muted",children:(0,a.jsx)(ei,{title:"Checks cannot be loaded right now",subtitle:t,icon:n})}),s[4]=t,s[5]=r):r=s[5],r}try{np.displayName||(np.displayName="ChecksSectionFetchFailure")}catch{}var nf=n(3614),ng=n(10871);let ny={selectable:"ConflictsSection-module__selectable--BT2Oj",ConflictsSectionLoadingSpinner:"ConflictsSection-module__ConflictsSectionLoadingSpinner--tkJ8X",ConflictsSectionStatusSpinner:"ConflictsSection-module__ConflictsSectionStatusSpinner--qtsen"},nx={SpinnerContainer:"CenteredLoadingSpinner-module__SpinnerContainer--Kwt8t"};function n_(e){let t,n,r,s=(0,i.c)(5),{className:o}=e;return s[0]!==o?(t=(0,d.$)(nx.SpinnerContainer,o),s[0]=o,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(c.A,{}),s[2]=n):n=s[2],s[3]!==t?(r=(0,a.jsx)("div",{className:t,children:n}),s[3]=t,s[4]=r):r=s[4],r}try{n_.displayName||(n_.displayName="CenteredLoadingSpinner")}catch{}var nv=n(73189),nS=n(83294);function nE(e){let t,n,r,s,o,c,d=(0,i.c)(29),{className:m,children:h,actionList:p,inactive:f,inactiveTooltipText:g,inactiveTooltipDirection:y,loading:x,loadingAnnouncement:_,secondaryButtonActive:v,secondaryButtonAriaLabel:S,onPrimaryButtonClick:E,shouldFocusPrimaryButton:C,onFocusPrimaryButton:b,isPrimary:w,hideSecondaryButton:R}=e,N=void 0===y?"ne":y,j=void 0!==R&&R,I=(0,u.useRef)(null);d[0]!==b||d[1]!==C?(t=()=>{C&&(I.current?.focus(),b?.())},n=[C,b],d[0]=b,d[1]=C,d[2]=t,d[3]=n):(t=d[2],n=d[3]),(0,u.useEffect)(t,n);let A=void 0!==w&&w?"primary":"default",[T,k]=(0,u.useState)(!1),L=f&&!v;d[4]!==f||d[5]!==x?(r=void 0!==x?{}:{inactive:f,"aria-disabled":f},d[4]=f,d[5]=x,d[6]=r):r=d[6];let M=r,D=f?nv.l:E;d[7]!==A||d[8]!==h||d[9]!==M||d[10]!==x||d[11]!==_||d[12]!==D?(s=(0,a.jsx)(ed.Q,{className:"flex-1",variant:A,ref:I,loading:x,loadingAnnouncement:_,onClick:D,...M,children:h}),d[7]=A,d[8]=h,d[9]=M,d[10]=x,d[11]=_,d[12]=D,d[13]=s):s=d[13],d[14]!==p||d[15]!==A||d[16]!==j||d[17]!==T||d[18]!==S||d[19]!==L?(o=!j&&(0,a.jsxs)(tq.W,{open:T,onOpenChange:L?nv.l:e=>k(e),children:[(0,a.jsx)(tq.W.Anchor,{children:(0,a.jsx)(t$.K,{className:"flex-0",variant:A,"aria-label":S,"aria-disabled":L,inactive:L,icon:l.TriangleDownIcon})}),(0,a.jsx)(tq.W.Overlay,{align:"end",sx:{width:"320px"},children:p})]}),d[14]=p,d[15]=A,d[16]=j,d[17]=T,d[18]=S,d[19]=L,d[20]=o):o=d[20],d[21]!==m||d[22]!==s||d[23]!==o?(c=(0,a.jsxs)(nS.A,{className:m,children:[s,o]}),d[21]=m,d[22]=s,d[23]=o,d[24]=c):c=d[24];let P=c;if(f&&g){let e;return d[25]!==P||d[26]!==N||d[27]!==g?(e=(0,a.jsx)(nf.m,{text:g,direction:N,children:P}),d[25]=P,d[26]=N,d[27]=g,d[28]=e):e=d[28],e}return P}try{nE.displayName||(nE.displayName="ButtonWithDropdown")}catch{}var nC=n(30923);function nb(e){let t,n,r=(0,i.c)(8),{description:s,onSelect:o,selected:l,text:c,inactiveText:d}=e;return r[0]!==s?(t=(0,a.jsx)(eS.l.Description,{variant:"block",children:s}),r[0]=s,r[1]=t):t=r[1],r[2]!==d||r[3]!==o||r[4]!==l||r[5]!==t||r[6]!==c?(n=(0,a.jsxs)(eS.l.Item,{selected:l,onSelect:o,inactiveText:d,children:[c,t]}),r[2]=d,r[3]=o,r[4]=l,r[5]=t,r[6]=c,r[7]=n):n=r[7],n}function nw(e){let t,n=(0,i.c)(5),{conflictsWebEditorPath:r,conflictsState:s,webEditorConflictResolution:o}=e;if("HAS_CONFLICTS"!==s||!o)return null;if(!o.viewerCanResolve){let e,t,r=o.viewerCannotResolve?.message||"";return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(ed.Q,{inactive:!0,children:"Resolve conflicts"}),n[0]=e):e=n[0],n[1]!==r?(t=(0,a.jsx)(nf.m,{direction:"nw",text:r,children:e}),n[1]=r,n[2]=t):t=n[2],t}return n[3]!==r?(t=(0,a.jsx)(ng.z,{href:r,children:"Resolve conflicts"}),n[3]=r,n[4]=t):t=n[4],t}function nR(e){let t=(0,i.c)(3),{conflictsWebEditorPath:n,webEditorConflictResolution:r}=e;switch(r?.viewerCannotResolve?.reason){case"INSUFFICIENT_ACCESS":return null;case"TOO_COMPLEX":case"HEAD_BRANCH_PROTECTED":case"ADMIN_DISABLED":{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("span",{children:"Use the command line to resolve conflicts before continuing."}),t[0]=e):e=t[0],e}default:{let e;return t[1]!==n?(e=(0,a.jsxs)("span",{children:["Use the"," ",(0,a.jsx)(ee.A,{inline:!0,href:n,children:"web editor"})," ","or the command line to resolve conflicts before continuing."]}),t[1]=n,t[2]=e):e=t[2],e}}}function nN(e){let t,n=(0,i.c)(3),{advisoryWorkspacePath:r,advisoryWorkspaceId:s}=e,o=r||"";return n[0]!==s||n[1]!==o?(t=(0,a.jsxs)("span",{children:["Merging must be performed from the"," ",(0,a.jsx)(ee.A,{inline:!0,href:o,children:s})," ","advisory."]}),n[0]=s,n[1]=o,n[2]=t):t=n[2],t}let nj={NO_CONFLICTS:{heading:"No conflicts with base branch",subtitle:()=>"Merging can be performed automatically.",icon:(0,a.jsx)(et.A,{icon:()=>(0,a.jsx)(l.CheckIcon,{size:16}),className:"bgColor-success-emphasis fgColor-onEmphasis",size:32})},PENDING:{heading:"Checking for the ability to merge automatically...",subtitle:()=>"Hang in there while we check the branch's status.",icon:(0,a.jsx)(n_,{className:ny.ConflictsSectionLoadingSpinner})},OUT_OF_DATE:{heading:"This branch is out-of-date with the base branch",subtitle:({baseRefName:e,viewerLogin:t})=>`Merge the latest changes from ${e} into this branch. This merge commit will be associated with ${t}.`,icon:(0,a.jsx)(tS,{})},HAS_CONFLICTS:{heading:"This branch has conflicts that must be resolved",subtitle:({conflictsWebEditorPath:e,conflictsCondition:t})=>(0,a.jsx)(nR,{conflictsWebEditorPath:e,webEditorConflictResolution:t?.webEditorConflictResolution}),icon:(0,a.jsx)(tS,{})},HAS_REBASE_CONFLICTS:{heading:"This branch cannot be rebased due to conflicts",subtitle:()=>"",icon:(0,a.jsx)(tS,{})},HAS_ADVISORY_WORKSPACE:{heading:"No conflicts with base branch",subtitle:({advisoryWorkspaceId:e,advisoryWorkspacePath:t})=>(0,a.jsx)(nN,{advisoryWorkspaceId:e,advisoryWorkspacePath:t}),icon:(0,a.jsx)(et.A,{icon:()=>(0,a.jsx)(l.CheckIcon,{size:16}),className:"bgColor-success-emphasis fgColor-onEmphasis",size:32})}};function nI(e){let t,n,r,s,o,d,m,f,g,x,v,S,E,C,b,w,R,N,j,I,A,T,k,L,M,D=(0,i.c)(92),{baseRefName:P,headRefOid:O,resourcePath:F,viewerCanUpdateBranch:U,viewerUpdateMethods:B,viewerLogin:q,conflictsCondition:$,conflictsState:G,canUserPushToBase:W,advisoryWorkspace:V}=e;D[0]!==B?(t=B?.find(nP)?.name||"MERGE",D[0]=B,D[1]=t):t=D[1];let Q=t,[H,z]=(0,u.useState)(Q),[K,X]=(0,tl.A)(!1),[J,Y]=(0,tl.A)(null),{sendAnalyticsEvent:ee}=(0,Z.s)(),et=(0,u.useId)(),en=_(),er=(0,y.jE)();D[2]!==en||D[3]!==er||D[4]!==X?(n=async()=>{await er.refetchQueries({queryKey:en},{cancelRefetch:!1}),X(!1)},D[2]=en,D[3]=er,D[4]=X,D[5]=n):n=D[5];let ea=n;D[6]!==Y||D[7]!==X?(r=e=>{X(!1),Y(e.message)},D[6]=Y,D[7]=X,D[8]=r):r=D[8];let es=r;D[9]!==es||D[10]!==ea?(s={onSuccess:ea,onError:es},D[9]=es,D[10]=ea,D[11]=s):s=D[11];let{mutate:eo}=function(e){let t,n,r,a,s=(0,i.c)(10),{onSuccess:o,onError:l}=e,c=(0,p.e)(h.u.updatePullRequestBranch);return s[0]!==c?(t=async e=>{let{updateMethod:t,expectedHeadOid:n}=e;return(0,eN.q$)(c,{method:"POST",headers:{Accept:"application/json"},body:{updateMethod:t,expectedHeadOid:n}})},s[0]=c,s[1]=t):t=s[1],s[2]!==o?(n=async e=>{let t=await (0,eN.hp)(e);e.ok||(0,eN.R)(e,t);let n=await (await (0,nC.Ee)(t.orchestration.url,{headers:{accept:"application/json"}})).json();if(n.orchestration.error_message)throw Error(n.orchestration.error_message);o()},s[2]=o,s[3]=n):n=s[3],s[4]!==l?(r=e=>{l(e)},s[4]=l,s[5]=r):r=s[5],s[6]!==t||s[7]!==n||s[8]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[6]=t,s[7]=n,s[8]=r,s[9]=a):a=s[9],(0,eR.n)(a)}(s);D[12]!==O||D[13]!==K||D[14]!==H||D[15]!==ee||D[16]!==Y||D[17]!==X||D[18]!==eo?(o=()=>{K||(X(!0),Y(null),eo({updateMethod:H,expectedHeadOid:O}),ee("conflicts_section.update_branch","MERGEBOX_CONFLICTS_SECTION_UPDATE_BRANCH_BUTTON"))},D[12]=O,D[13]=K,D[14]=H,D[15]=ee,D[16]=Y,D[17]=X,D[18]=eo,D[19]=o):o=D[19];let el=o,ec=`${F}/conflicts`;D[20]!==$.conflicts?(d=$.conflicts??[],D[20]=$.conflicts,D[21]=d):d=D[21];let ed=d;D[22]!==H?(m=function(){return"MERGE"===H?"Update branch":"Rebase branch"},D[22]=H,D[23]=m):m=D[23];let eu=m;D[24]!==H?(f=function(){return"MERGE"===H?"Updating branch":"Rebasing branch"},D[24]=H,D[25]=f):f=D[25];let em=f,eh=("OUT_OF_DATE"===G||"NO_CONFLICTS"===G||"PENDING"===G)&&U,ep="HAS_CONFLICTS"===G&&($.webEditorConflictResolution?.viewerCanResolve||$.webEditorConflictResolution?.viewerCannotResolve?.reason!=="INSUFFICIENT_ACCESS"),ef=V?.advisoryWorkspaceId,eg=V?.advisoryWorkspacePath;D[26]!==B?(g=B?.filter(nD),D[26]=B,D[27]=g):g=D[27];let ey=g;D[28]!==B?(x=B?.find(nM),D[28]=B,D[29]=x):x=D[29];let ex=x;D[30]!==B?(v=B?.find(nL),D[30]=B,D[31]=v):v=D[31];let e_=v;D[32]!==B?(S=B?.find(nk),D[32]=B,D[33]=S):S=D[33];let ev=S;D[34]!==B?(E=B?.find(nT)?.failureReason,D[34]=B,D[35]=E):E=D[35];let eC=E;D[36]!==Q||D[37]!==eC||D[38]!==ev||D[39]!==H||D[40]!==ee||D[41]!==ex||D[42]!==e_||D[43]!==B?(C=function(){return B?(0,a.jsxs)(eS.l,{selectionVariant:"single",showDividers:!0,children:[ex&&(0,a.jsx)(nb,{description:"The merge commit will be associated with your account.",selected:"MERGE"===Q,text:"Update with merge commit",onSelect:()=>{ee("conflicts_section.select_merge_commit_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),z("MERGE")}}),e_&&(0,a.jsx)(nb,{description:"This pull request will be rebased on top of the latest changes and then force pushed.",selected:"REBASE"===Q,text:"Update with rebase",onSelect:()=>{ee("conflicts_section.select_rebase_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),z("REBASE")}}),ev&&(0,a.jsx)(nb,{inactiveText:eC||"This branch cannot be rebased at this time.",selected:"REBASE"===Q,text:"Update with rebase",onSelect:()=>{ee("conflicts_section.select_rebase_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),z("REBASE")}})]}):(0,a.jsxs)(eS.l,{selectionVariant:"single",showDividers:!0,children:[(0,a.jsx)(nb,{description:"The merge commit will be associated with your account.",selected:"MERGE"===H,text:"Update with merge commit",onSelect:()=>{ee("conflicts_section.select_merge_commit_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),z("MERGE")}}),(0,a.jsx)(nb,{description:"This pull request will be rebased on top of the latest changes and then force pushed.",selected:"REBASE"===H,text:"Update with rebase",onSelect:()=>{ee("conflicts_section.select_rebase_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),z("REBASE")}})]})},D[36]=Q,D[37]=eC,D[38]=ev,D[39]=H,D[40]=ee,D[41]=ex,D[42]=e_,D[43]=B,D[44]=C):C=D[44];let eb=C,ew=nj[G],ej=nj[G];return D[45]!==K?(b=K&&(0,a.jsx)(c.A,{size:"small",className:ny.ConflictsSectionStatusSpinner}),D[45]=K,D[46]=b):b=D[46],D[47]!==ej.heading||D[48]!==b?(w=(0,a.jsxs)(a.Fragment,{children:[ej.heading,b]}),D[47]=ej.heading,D[48]=b,D[49]=w):w=D[49],D[50]!==ef||D[51]!==eg||D[52]!==P||D[53]!==W||D[54]!==$||D[55]!==G||D[56]!==ec||D[57]!==q?(R=W?nj[G].subtitle({baseRefName:P,viewerLogin:q,conflictsWebEditorPath:ec,conflictsCondition:$,advisoryWorkspaceId:ef,advisoryWorkspacePath:eg}):"Changes can be cleanly merged.",D[50]=ef,D[51]=eg,D[52]=P,D[53]=W,D[54]=$,D[55]=G,D[56]=ec,D[57]=q,D[58]=R):R=D[58],D[59]!==el||D[60]!==K||D[61]!==eh||D[62]!==ey?.length||D[63]!==em||D[64]!==eu||D[65]!==eb?(N=eh&&(0,a.jsx)(nE,{hideSecondaryButton:ey?.length===1,loading:K,loadingAnnouncement:em(),secondaryButtonAriaLabel:"Update branch options",actionList:eb(),onPrimaryButtonClick:el,children:eu()}),D[59]=el,D[60]=K,D[61]=eh,D[62]=ey?.length,D[63]=em,D[64]=eu,D[65]=eb,D[66]=N):N=D[66],D[67]!==$.webEditorConflictResolution||D[68]!==G||D[69]!==ec?(j=(0,a.jsx)(nw,{conflictsWebEditorPath:ec,conflictsState:G,webEditorConflictResolution:$.webEditorConflictResolution}),D[67]=$.webEditorConflictResolution,D[68]=G,D[69]=ec,D[70]=j):j=D[70],D[71]!==N||D[72]!==j?(I=(0,a.jsxs)(a.Fragment,{children:[N,j]}),D[71]=N,D[72]=j,D[73]=I):I=D[73],D[74]!==ed||D[75]!==ep?(A=ep&&(0,a.jsx)("div",{className:"ml-n3",children:(0,a.jsx)(eS.l,{className:"py-0 overflow-hidden",children:ed.map(nA)})}),D[74]=ed,D[75]=ep,D[76]=A):A=D[76],D[77]!==et||D[78]!==ew.icon||D[79]!==w||D[80]!==R||D[81]!==I||D[82]!==A?(T=(0,a.jsx)(ei,{headerId:et,icon:ew.icon,title:w,subtitle:R,rightSideContent:I,children:A}),D[77]=et,D[78]=ew.icon,D[79]=w,D[80]=R,D[81]=I,D[82]=A,D[83]=T):T=D[83],D[84]!==J?(k=J&&(0,a.jsxs)(eE.A,{className:"m-3",variant:"danger",children:[(0,a.jsx)(eI.A,{className:"mr-2",icon:l.StopIcon}),J]}),D[84]=J,D[85]=k):k=D[85],D[86]!==T||D[87]!==k?(L=(0,a.jsxs)("div",{className:"d-flex flex-column width-full overflow-hidden",children:[T,k]}),D[86]=T,D[87]=k,D[88]=L):L=D[88],D[89]!==et||D[90]!==L?(M=(0,a.jsx)("section",{"aria-label":"Conflicts",className:"border-bottom borderColor-muted","aria-describedby":et,children:L}),D[89]=et,D[90]=L,D[91]=M):M=D[91],M}function nA(e){return(0,a.jsxs)(eS.l.Item,{children:[(0,a.jsx)(eS.l.LeadingVisual,{className:"fgColor-muted",children:(0,a.jsx)(l.FileIcon,{})}),(0,a.jsx)("span",{className:`input-monospace f6 ${ny.selectable}`,children:e})]},e)}function nT(e){return"REBASE"===e.name}function nk(e){return"REBASE"===e.name&&"UNAVAILABLE"===e.allowableStatus}function nL(e){return"REBASE"===e.name&&"ALLOWED"===e.allowableStatus}function nM(e){return"MERGE"===e.name&&"ALLOWED"===e.allowableStatus}function nD(e){return"ALLOWED"===e.allowableStatus||"UNAVAILABLE"===e.allowableStatus}function nP(e){return!0===e.isDefault}try{nb.displayName||(nb.displayName="UpdateBranchOption")}catch{}try{nw.displayName||(nw.displayName="ResolveConflictsButton")}catch{}try{nR.displayName||(nR.displayName="ConflictResolutionSubtitle")}catch{}try{nN.displayName||(nN.displayName="AdvisoryWorkspaceSubtitle")}catch{}try{nI.displayName||(nI.displayName="ConflictsSection")}catch{}let nO={DraftStateCircleIcon:"DraftStateSection-module__DraftStateCircleIcon--APxWt",DraftStateFlashMessage:"DraftStateSection-module__DraftStateFlashMessage--XlMkr",DraftStateIcon:"DraftStateSection-module__DraftStateIcon--_Co24"};function nF(e){let t,n,r,s,o,c,d,m,f=(0,i.c)(24),{viewerCanUpdate:g,helpUrl:x}=e,[v,S]=(0,tl.A)(null);f[0]!==S?(t={onError:e=>{S(e.message)}},f[0]=S,f[1]=t):t=f[1];let{mutate:E,isPending:C}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.markReadyForReview),c=_(),d=(0,y.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eN.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eN.hp)(e);return(0,eN.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>o(e),s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eR.n)(a)}(t),{sendAnalyticsEvent:b}=(0,Z.s)(),w=(0,u.useId)();f[2]!==C||f[3]!==E||f[4]!==b?(n=function(){C||(E(),b("draft_state_section.mark_ready_for_review","MERGEBOX_DRAFT_STATE_SECTION_MARK_READY_FOR_REVIEW_BUTTON"))},f[2]=C,f[3]=E,f[4]=b,f[5]=n):n=f[5];let R=n,N=`${x}/get-started/learning-about-github/access-permissions-on-github`;return f[6]!==N||f[7]!==g?(r=g?"Draft pull requests cannot be merged.":(0,a.jsxs)("span",{children:["Only those with ",(0,a.jsx)("a",{href:N,children:"write access"})," to this repository can mark a draft pull request as ready for review."]}),f[6]=N,f[7]=g,f[8]=r):r=f[8],f[9]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(et.A,{size:32,icon:nU,className:nO.DraftStateCircleIcon}),f[9]=s):s=f[9],f[10]!==R||f[11]!==C||f[12]!==g?(o=g?(0,a.jsx)(ed.Q,{onClick:R,loading:C,loadingAnnouncement:"Marking ready for review",children:"Ready for review"}):void 0,f[10]=R,f[11]=C,f[12]=g,f[13]=o):o=f[13],f[14]!==v?(c=v&&(0,a.jsxs)(eE.A,{variant:"danger",className:nO.DraftStateFlashMessage,children:[(0,a.jsx)(eI.A,{icon:l.StopIcon,className:nO.DraftStateIcon}),v]}),f[14]=v,f[15]=c):c=f[15],f[16]!==w||f[17]!==r||f[18]!==o||f[19]!==c?(d=(0,a.jsx)(ei,{headerId:w,title:"This pull request is still a work in progress",subtitle:r,icon:s,rightSideContent:o,children:c}),f[16]=w,f[17]=r,f[18]=o,f[19]=c,f[20]=d):d=f[20],f[21]!==w||f[22]!==d?(m=(0,a.jsx)("section",{"aria-label":"Draft state","aria-describedby":w,className:"border-bottom color-border-subtle",children:d}),f[21]=w,f[22]=d,f[23]=m):m=f[23],m}function nU(){return(0,a.jsx)(l.GitPullRequestDraftIcon,{size:16})}try{nF.displayName||(nF.displayName="DraftStateSection")}catch{}let nB={MergeQueueSectionText:"MergeQueueSection-module__MergeQueueSectionText--rEy7Y"};function nq(e){let t,n,r,s,o,c,d,m,f,g,x,v,S,E,C,b,w,R,N=(0,i.c)(52),{mergeQueue:j,mergeQueueEntry:I,viewerCanAddAndRemoveFromMergeQueue:A,focusPrimaryMergeButton:T}=e,k=I?.position,L=j?.url,M=(0,u.useRef)(null),[D,P]=(0,tl.A)(!1),[O,F]=(0,tl.A)(null),U=(0,i.c)(1);U[0]===Symbol.for("react.memo_cache_sentinel")?(R=[],U[0]=R):R=U[0],(0,u.useEffect)(tF,R);let{sendAnalyticsEvent:B}=(0,Z.s)();N[0]!==F||N[1]!==P?(t={onError:e=>{P(!1),F(e.message),M.current?.focus(),setTimeout(nG,1e3)}},N[0]=F,N[1]=P,N[2]=t):t=N[2];let{mutate:q,isPending:$}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.dequeuePullRequest),c=_(),d=(0,y.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eN.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eN.hp)(e);return(0,eN.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>{o(e)},s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eR.n)(a)}(t);N[3]!==T||N[4]!==$||N[5]!==q||N[6]!==B||N[7]!==F||N[8]!==P?(n=()=>{$||(F(null),B("merge_queue_section.dequeue_pull_request","MERGEBOX_MERGE_QUEUE_SECTION_REMOVE_FROM_QUEUE_BUTTON"),q(void 0,{onSuccess:()=>{P(!1),setTimeout(n$,1e3),T()}}))},N[3]=T,N[4]=$,N[5]=q,N[6]=B,N[7]=F,N[8]=P,N[9]=n):n=N[9];let G=n;N[10]!==F||N[11]!==P?(r=()=>{F(null),P(!0)},N[10]=F,N[11]=P,N[12]=r):r=N[12];let W=r;N[13]!==P?(s=()=>P(!1),N[13]=P,N[14]=s):s=N[14],N[15]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)(td.A.Header,{id:"remove-from-queue-dialog-title",children:"Remove from the queue?"}),N[15]=o):o=N[15],N[16]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)("span",{children:"Removing this pull request from the queue could impact other pull requests in the queue. Are you sure?"}),N[16]=c):c=N[16],N[17]!==$||N[18]!==P?(d=()=>{$||(P(!1),M.current?.focus())},N[17]=$,N[18]=P,N[19]=d):d=N[19],N[20]!==$||N[21]!==d?(m=(0,a.jsx)(ed.Q,{className:"mr-1",inactive:$,onClick:d,children:"Cancel"}),N[20]=$,N[21]=d,N[22]=m):m=N[22],N[23]!==G||N[24]!==$?(f=(0,a.jsx)(ed.Q,{variant:"danger",loading:$,loadingAnnouncement:"Removing from the queue",onClick:G,children:"Remove from the queue"}),N[23]=G,N[24]=$,N[25]=f):f=N[25],N[26]!==m||N[27]!==f?(g=(0,a.jsxs)("div",{className:"p-3",children:[c,(0,a.jsxs)("div",{className:"d-flex flex-justify-end mt-3",children:[m,f]})]}),N[26]=m,N[27]=f,N[28]=g):g=N[28],N[29]!==D||N[30]!==g||N[31]!==s?(x=(0,a.jsxs)(td.A,{"aria-labelledby":"remove-from-queue-dialog-title",isOpen:D,returnFocusRef:M,onDismiss:s,children:[o,g]}),N[29]=D,N[30]=g,N[31]=s,N[32]=x):x=N[32],N[33]!==O?(v=O&&(0,a.jsxs)(eE.A,{className:"mx-3 my-2",variant:"danger",children:[(0,a.jsx)(eI.A,{className:"mr-2",icon:l.StopIcon}),O]}),N[33]=O,N[34]=v):v=N[34],N[35]!==W||N[36]!==I?.isLocked||N[37]!==A?(S=A&&!I?.isLocked&&(0,a.jsx)(ed.Q,{ref:M,onClick:W,children:"Remove from queue"}),N[35]=W,N[36]=I?.isLocked,N[37]=A,N[38]=S):S=N[38],N[39]!==S?(E=(0,a.jsx)(a.Fragment,{children:S}),N[39]=S,N[40]=E):E=N[40];let V=I?.isLocked;return N[41]!==k||N[42]!==L||N[43]!==V?(C=(0,a.jsx)(nW,{position:k,resourcePath:L,entryIsLocked:V}),N[41]=k,N[42]=L,N[43]=V,N[44]=C):C=N[44],N[45]!==E||N[46]!==C?(b=(0,a.jsx)(ei,{title:"Queued to merge...",rightSideContent:E,children:C}),N[45]=E,N[46]=C,N[47]=b):b=N[47],N[48]!==x||N[49]!==v||N[50]!==b?(w=(0,a.jsxs)(a.Fragment,{children:[x,v,b]}),N[48]=x,N[49]=v,N[50]=b,N[51]=w):w=N[51],w}function n$(){return(0,tm.i)("The pull request was successfully removed from the queue.")}function nG(){return(0,tm.i)("Failed to remove pull request from the merge queue")}function nW(e){let t,n,r,s,o=(0,i.c)(8),{position:l,resourcePath:c,entryIsLocked:d}=e;if(!l||!c){let e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(a.Fragment,{}),o[0]=e):e=o[0],e}let u=l-1;return t=d?"This pull request is locked for deployment by the":0===u?"This pull request is next up in the":1===u?`There is ${u} pull request ahead of this one in the`:`There are ${u} pull requests ahead of this one in the`,o[1]!==t?(n=(0,a.jsx)("span",{className:nB.MergeQueueSectionText,children:t}),o[1]=t,o[2]=n):n=o[2],o[3]!==c?(r=(0,a.jsx)(ee.A,{inline:!0,href:c,children:"merge queue"}),o[3]=c,o[4]=r):r=o[4],o[5]!==n||o[6]!==r?(s=(0,a.jsxs)(a.Fragment,{children:[n," ",r,"."]}),o[5]=n,o[6]=r,o[7]=s):s=o[7],s}try{nq.displayName||(nq.displayName="MergeQueueSection")}catch{}try{nW.displayName||(nW.displayName="MergeQueuePositionText")}catch{}function nV({mergeMethod:e,confirming:t,isBypassMerge:n=!1,inProgress:r=!1,isAutoMergeAllowed:a=!1}){if(r)return a?"Confirming...":"Merging...";let i=t?"Confirm auto-merge":"Enable auto-merge",s=t?"Confirm bypass rules and merge":"Bypass rules and merge";switch(e){case m.q$.MERGE:if(a)return i;if(n)return s;if(t)return"Confirm merge";else return"Merge pull request";case m.q$.SQUASH:if(a)return`${i} (squash)`;if(n)return`${s} (squash)`;if(t)return"Confirm squash and merge";else return"Squash and merge";case m.q$.REBASE:if(a)return`${i} (rebase)`;if(n)return`${s} (rebase)`;if(t)return"Confirm rebase and merge";else return"Rebase and merge"}}function nQ({mergeMethod:e,confirming:t,inProgress:n}){if(n)return"Adding to merge queue...";switch(e){case m.lD.GROUP:return t?"Confirm merge when ready":"Merge when ready";case m.lD.SOLO:return t?"Confirm queue and force solo merge":"Queue and force solo merge"}}var nH=n(24815),nz=n(16567),nK=n(39820);let MergeError=class MergeError extends Error{constructor(e,t=[],n){super(e),(0,A._)(this,"ruleErrors",void 0),this.name="MergeError",this.ruleErrors=t,this.cause=n}};function nX(e){let t,n,r,a,s,o=(0,i.c)(14);o[0]!==e?(t=void 0===e?{}:e,o[0]=e,o[1]=t):t=o[1];let{onError:l,onSuccess:c}=t,d=(0,p.e)(h.u.enableAutoMerge),u=_(),m=(0,y.jE)();return o[2]!==d?(n=async e=>{let t=await (0,eN.q$)(d,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eN.hp)(t),r=new MergeError(n?.error||"Unknown error occurred",n?.metadata?.ruleErrors||[],t.status);return(0,eN.R)(t,n,r),n},o[2]=d,o[3]=n):n=o[3],o[4]!==u||o[5]!==c||o[6]!==m?(r=()=>(c?.(),m.refetchQueries({queryKey:u},{cancelRefetch:!1})),o[4]=u,o[5]=c,o[6]=m,o[7]=r):r=o[7],o[8]!==l?(a=e=>{l?.(e)},o[8]=l,o[9]=a):a=o[9],o[10]!==n||o[11]!==r||o[12]!==a?(s={mutationFn:n,onSuccess:r,onError:a},o[10]=n,o[11]=r,o[12]=a,o[13]=s):s=o[13],(0,eR.n)(s)}var nJ=n(65025);function nY(e){let t,n=(0,i.c)(3),{children:r,className:s}=e,o=`d-flex flex-items-start flex-sm-items-center flex-column flex-sm-row gap-2 ${s}`;return n[0]!==r||n[1]!==o?(t=(0,a.jsx)("div",{className:o,children:r}),n[0]=r,n[1]=o,n[2]=t):t=n[2],t}nY.Slot=function({children:e}){var t;let n=u.Children.only(e);return u.isValidElement(n)&&(n=(t=n).type===nE||t.type===ed.Q?(0,u.cloneElement)(t,{className:`flex-self-stretch flex-shrink-0 ${t.props.className}`}):t),n};try{nY.displayName||(nY.displayName="MergeSectionActions")}catch{}try{(r=MergeSectionsActionsSlot).displayName||(r.displayName="MergeSectionsActionsSlot")}catch{}let nZ={ConfirmMergeContainer:"ConfirmMerge-module__ConfirmMergeContainer--svghz",ConfirmMergeText:"ConfirmMerge-module__ConfirmMergeText--Lq1XQ"};function n0(e){let t,n,r,s=(0,i.c)(5),{errorMessage:o}=e;return(s[0]!==o?(t=()=>{o&&o.length>0&&(0,tm.i)(o)},n=[o],s[0]=o,s[1]=t,s[2]=n):(t=s[1],n=s[2]),(0,u.useEffect)(t,n),o)?(s[3]!==o?(r=(0,a.jsx)(nK.l,{className:"mt-3","aria-label":"Merge error warning banner",variant:"warning",title:"Merge error",hideTitle:!0,description:o}),s[3]=o,s[4]=r):r=s[4],r):null}function n1(e){let t,n,r,s,o,l,c,d,f,g,x,v,S,E,C,b,w,R,N=(0,i.c)(67),{defaultCommitAuthorEmail:j,commitMessageBody:I,commitMessageHeadline:A,defaultBranchName:T,handleConfirmingMergeInfo:k,isBypassMerge:L,onCancel:M,selectedMergeMethod:D,isAutoMergeAllowed:P,possibleCommitAuthorEmails:O}=e,F=void 0!==P&&P,U=(0,u.useRef)(null),B=(0,u.useRef)(null);N[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{U.current?.focus(),B.current?.scrollIntoView({behavior:"smooth",block:"nearest"})},n=[],N[0]=t,N[1]=n):(t=N[0],n=N[1]),(0,u.useEffect)(t,n);let[q,$]=(0,u.useState)(A||""),[G,W]=(0,u.useState)(I||""),{sendAnalyticsEvent:V}=(0,Z.s)(),[Q,H]=(0,tl.A)("");N[2]===Symbol.for("react.memo_cache_sentinel")?(r=[],N[2]=r):r=N[2];let[z,K]=(0,tl.A)(r),X=O.length>0,J=D===m.q$.REBASE?"":j||"",[Y,ee]=(0,u.useState)(J);N[3]!==H||N[4]!==K?(s={onError:e=>{e instanceof MergeError&&e.ruleErrors.length>0?K(e.ruleErrors):(K([]),H(e.message))}},N[3]=H,N[4]=K,N[5]=s):s=N[5];let{mutate:et,isPending:en}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.merge),c=_(),d=(0,y.jE)();return s[0]!==l?(t=async e=>{let t=await (0,eN.q$)(l,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eN.hp)(t),r=new MergeError(n?.error||"Unknown error occurred",n?.metadata?.ruleErrors||[],t.status);return(0,eN.R)(t,n,r),n},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>o(e),s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eR.n)(a)}(s);N[6]!==H||N[7]!==K?(o=e=>{e instanceof MergeError&&e.ruleErrors.length>0?K(e.ruleErrors):(K([]),H(e.message))},N[6]=H,N[7]=K,N[8]=o):o=N[8],N[9]!==k?(l=()=>{k(!1)},N[9]=k,N[10]=l):l=N[10],N[11]!==o||N[12]!==l?(c={onError:o,onSuccess:l},N[11]=o,N[12]=l,N[13]=c):c=N[13];let{mutate:er,isPending:ea}=nX(c),ei=en||ea;N[14]!==Y||N[15]!==G||N[16]!==q||N[17]!==er||N[18]!==F||N[19]!==L||N[20]!==ei||N[21]!==et||N[22]!==D||N[23]!==V||N[24]!==X||N[25]!==H?(d=()=>{ei||(H(""),F?(er({...X?{authorEmail:Y}:{},commitMessage:G,commitTitle:q,mergeMethod:D}),V("direct_merge_section.confirm_auto_merge","MERGEBOX_AUTO_MERGE_CONFIRMATION_BUTTON")):(et({...X?{authorEmail:Y}:{},bypassBranchProtections:L,commitMessage:G,commitTitle:q,mergeMethod:D}),V("direct_merge_section.confirm_direct_merge","MERGEBOX_DIRECT_MERGE_CONFIRMATION_BUTTON")))},N[14]=Y,N[15]=G,N[16]=q,N[17]=er,N[18]=F,N[19]=L,N[20]=ei,N[21]=et,N[22]=D,N[23]=V,N[24]=X,N[25]=H,N[26]=d):d=N[26];let es=d;N[27]!==z?(f=z.length>0&&(0,a.jsx)(nJ.r,{prefix:"",helpUrl:"",errorMessageNotUsingPrefix:"Repository rule violations found",hideRuleErrorsTitle:!0,ruleErrors:z}),N[27]=z,N[28]=f):f=N[28],N[29]!==X||N[30]!==G||N[31]!==q||N[32]!==J||N[33]!==es||N[34]!==O||N[35]!==D?(g=D!==m.q$.REBASE&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eC.A,{children:[(0,a.jsx)(eC.A.Label,{children:"Commit message"}),(0,a.jsx)(nH.A,{ref:U,block:!0,defaultValue:q,onChange:e=>$(e.currentTarget.value)})]}),(0,a.jsxs)(eC.A,{className:"mt-3 width-full",children:[(0,a.jsx)(eC.A.Label,{children:"Extended description"}),(0,a.jsx)(eb.Ay,{block:!0,placeholder:"Add an optional extended description\u2026",defaultValue:G,onChange:e=>W(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),es())}})]}),X?(0,a.jsx)("div",{className:nZ.ConfirmMergeContainer,children:(0,a.jsxs)(eC.A,{children:[(0,a.jsx)(eC.A.Label,{children:"Commit email"}),(0,a.jsx)(nz.A,{defaultValue:J,onChange:e=>ee(e.target.value),"aria-label":"Select commit author email",children:O.map(n2)})]})}):(0,a.jsx)("div",{className:nZ.ConfirmMergeContainer,children:(0,a.jsxs)("span",{className:nZ.ConfirmMergeText,children:["This commit will be authored by ",J,"."]})})]}),N[29]=X,N[30]=G,N[31]=q,N[32]=J,N[33]=es,N[34]=O,N[35]=D,N[36]=g):g=N[36],N[37]!==T||N[38]!==D?(x=D===m.q$.REBASE&&(0,a.jsxs)("span",{className:nZ.ConfirmMergeText,children:["This will rebase your changes and merge them into ",T,"."]}),N[37]=T,N[38]=D,N[39]=x):x=N[39],N[40]!==F||N[41]!==L||N[42]!==D?(v=nV({mergeMethod:D,confirming:!0,isBypassMerge:L,inProgress:!0,isAutoMergeAllowed:F}),N[40]=F,N[41]=L,N[42]=D,N[43]=v):v=N[43];let eo=L?"danger":F?"default":"primary";return N[44]!==F||N[45]!==L||N[46]!==D?(S=nV({mergeMethod:D,confirming:!0,isBypassMerge:L,inProgress:!1,isAutoMergeAllowed:F}),N[44]=F,N[45]=L,N[46]=D,N[47]=S):S=N[47],N[48]!==es||N[49]!==ei||N[50]!==v||N[51]!==eo||N[52]!==S?(E=(0,a.jsx)(nY.Slot,{children:(0,a.jsx)(ed.Q,{ref:B,loading:ei,loadingAnnouncement:v,variant:eo,onClick:es,children:S})}),N[48]=es,N[49]=ei,N[50]=v,N[51]=eo,N[52]=S,N[53]=E):E=N[53],N[54]!==M?(C=(0,a.jsx)(nY.Slot,{children:(0,a.jsx)(ed.Q,{onClick:M,children:"Cancel"})}),N[54]=M,N[55]=C):C=N[55],N[56]!==E||N[57]!==C?(b=(0,a.jsxs)(nY,{className:"mt-3",children:[E,C]}),N[56]=E,N[57]=C,N[58]=b):b=N[58],N[59]!==Q?(w=(0,a.jsx)(n0,{errorMessage:Q}),N[59]=Q,N[60]=w):w=N[60],N[61]!==f||N[62]!==g||N[63]!==x||N[64]!==b||N[65]!==w?(R=(0,a.jsxs)("div",{children:[f,g,x,b,w]}),N[61]=f,N[62]=g,N[63]=x,N[64]=b,N[65]=w,N[66]=R):R=N[66],R}function n2(e){return(0,a.jsx)(nz.A.Option,{value:e,children:e},e)}try{n0.displayName||(n0.displayName="MergeErrorMessage")}catch{}try{n1.displayName||(n1.displayName="ConfirmMerge")}catch{}function n3(e){let t,n,r=(0,i.c)(7),{onSelect:s,primaryText:o,secondaryText:l,selected:c}=e;return r[0]!==l?(t=(0,a.jsx)(eS.l.Description,{variant:"block",children:l}),r[0]=l,r[1]=t):t=r[1],r[2]!==s||r[3]!==o||r[4]!==c||r[5]!==t?(n=(0,a.jsxs)(eS.l.Item,{selected:c,onSelect:s,children:[o,t]}),r[2]=s,r[3]=o,r[4]=c,r[5]=t,r[6]=n):n=r[6],n}try{n3.displayName||(n3.displayName="MergeDropdownOption")}catch{}let n5=(0,u.lazy)(()=>Promise.all([n.e("primer-react"),n.e("packages_mergebox_components_sections_merge-section_command-line-instructions_CommandLineInst-cc1118")]).then(n.bind(n,44712)));function n4(e){let t,n,r,o,l,c,d,h,p,f,g,y,x,_,v,S,C,b,w,R=(0,i.c)(82),{baseRefName:N,canUserPushToBase:j,defaultCommitAuthorEmail:I,commitMessageBody:A,commitMessageHeadline:T,conflictsCondition:k,handleConfirmingMergeInfo:L,headRepository:M,helpUrl:D,isAdminBypassToggleChecked:P,isAdminBypassToggleVisible:O,isAutoMergeAllowed:F,isConfirmingMergeInfo:U,isCrossRepo:B,mergeable:$,numberOfCommits:G,mergeBoxRollupStatus:W,setShouldFocusPrimaryMergeButton:V,shouldFocusPrimaryMergeButton:Q,status:H,viewerMergeActions:z,possibleCommitAuthorEmails:K}=e,X=void 0!==F&&F,{mergeMethod:J,setMergeMethod:Y}=E(),{sendAnalyticsEvent:et}=(0,Z.s)(),[en,er]=(0,tl.A)(!1),ea=(0,u.useRef)(null);if(!k)return null;if(R[0]!==z){let e=z.find(n6);s(e),n=(t=function({mergeMethods:e}){return e.reduce((e,t)=>((t?.allowableStatus==="ALLOWED"||t?.allowableStatus==="ALLOWED_WITH_BYPASS")&&e.push(t.name),e),[])}({mergeMethods:e.mergeMethods})).includes(m.q$.MERGE),r=t.includes(m.q$.SQUASH),o=t.includes(m.q$.REBASE),R[0]=z,R[1]=t,R[2]=n,R[3]=r,R[4]=o}else t=R[1],n=R[2],r=R[3],o=R[4];let ei=o,es=O&&P,eo=H===q.ChecksPending?"pending":"failing",el=`Merging is blocked due to ${eo} merge requirements`;R[5]!==L||R[6]!==X||R[7]!==et?(l=()=>{L(!0),et(X?"direct_merge_section.auto_merge_click":"direct_merge_section.direct_merge_click",X?"MERGEBOX_AUTO_MERGE_SECTION_MERGE_BUTTON":"MERGEBOX_DIRECT_MERGE_SECTION_MERGE_BUTTON")},R[5]=L,R[6]=X,R[7]=et,R[8]=l):l=R[8];let ec=l;R[9]!==L||R[10]!==X||R[11]!==et||R[12]!==V?(c=()=>{L(!1),V(!0),et(X?"direct_merge_section.cancel_auto_merge":"direct_merge_section.cancel_direct_merge",X?"MERGEBOX_AUTO_MERGE_CANCEL_CONFIRMATION_BUTTON":"MERGEBOX_DIRECT_MERGE_CANCEL_CONFIRMATION_BUTTON")},R[9]=L,R[10]=X,R[11]=et,R[12]=V,R[13]=c):c=R[13];let ed=c;R[14]!==et||R[15]!==er?(d=()=>{er(!0),et("direct_merge_section.view_command_line_instructions","MERGEBOX_DIRECT_MERGE_SECTION_VIEW_COMMAND_LINE_INSTRUCTIONS_BUTTON")},R[14]=et,R[15]=er,R[16]=d):d=R[16];let eu=d;R[17]!==et||R[18]!==Y?(h=(e,t)=>{Y(e),et(t,"MERGEBOX_DIRECT_MERGE_SECTION_MERGE_METHOD_MENU_ITEM")},R[17]=et,R[18]=Y,R[19]=h):h=R[19];let em=h;if(U){let e,t=I||"",n=A||"",r=T||"";return R[20]!==N||R[21]!==ed||R[22]!==L||R[23]!==P||R[24]!==X||R[25]!==J||R[26]!==K||R[27]!==t||R[28]!==n||R[29]!==r?(e=(0,a.jsx)(n1,{defaultCommitAuthorEmail:t,commitMessageBody:n,commitMessageHeadline:r,defaultBranchName:N,handleConfirmingMergeInfo:L,isBypassMerge:P,selectedMergeMethod:J,onCancel:ed,isAutoMergeAllowed:X,possibleCommitAuthorEmails:K}),R[20]=N,R[21]=ed,R[22]=L,R[23]=P,R[24]=X,R[25]=J,R[26]=K,R[27]=t,R[28]=n,R[29]=r,R[30]=e):e=R[30],e}R[31]!==N||R[32]!==k||R[33]!==M||R[34]!==en||R[35]!==B||R[36]!==er?(p=en&&ea&&(0,a.jsx)(u.Suspense,{children:(0,a.jsx)(n5,{baseRefName:N,conflictsCondition:k,headRepository:M,isCrossRepo:B,returnFocusRef:ea,onClose:()=>er(!1)})}),R[31]=N,R[32]=k,R[33]=M,R[34]=en,R[35]=B,R[36]=er,R[37]=p):p=R[37];let eh=1===t.length,ep=!X&&!$&&!es,ef=$&&"ALL_PASSED"===W;return R[38]!==n||R[39]!==J||R[40]!==em?(f=n&&(0,a.jsx)(n3,{primaryText:"Create a merge commit",secondaryText:"All commits from this branch will be added to the base branch via a merge commit.",selected:J===m.q$.MERGE,onSelect:()=>em(m.q$.MERGE,"direct_merge_section.select_create_a_merge_commit")}),R[38]=n,R[39]=J,R[40]=em,R[41]=f):f=R[41],R[42]!==r||R[43]!==J||R[44]!==G||R[45]!==em?(g=r&&(0,a.jsx)(n3,{primaryText:"Squash and merge",secondaryText:1===G?"The 1 commit from this branch will be added to the base branch.":`The ${G} commits from this branch will be combined into one commit in the base branch.`,selected:J===m.q$.SQUASH,onSelect:()=>em(m.q$.SQUASH,"direct_merge_section.select_squash_and_merge")}),R[42]=r,R[43]=J,R[44]=G,R[45]=em,R[46]=g):g=R[46],R[47]!==ei||R[48]!==J||R[49]!==G||R[50]!==em?(y=ei&&(0,a.jsx)(n3,{primaryText:"Rebase and merge",secondaryText:`The ${G} commit${1!==G?"s":""} from this branch will be rebased and added to the base branch.`,selected:J===m.q$.REBASE,onSelect:()=>em(m.q$.REBASE,"direct_merge_section.select_rebase_and_merge")}),R[47]=ei,R[48]=J,R[49]=G,R[50]=em,R[51]=y):y=R[51],R[52]!==f||R[53]!==g||R[54]!==y?(x=(0,a.jsxs)(eS.l,{selectionVariant:"single",showDividers:!0,children:[f,g,y]}),R[52]=f,R[53]=g,R[54]=y,R[55]=x):x=R[55],R[56]!==V?(_=()=>V(!1),R[56]=V,R[57]=_):_=R[57],R[58]!==X||R[59]!==es||R[60]!==J?(v=nV({mergeMethod:J,confirming:!1,isBypassMerge:es,isAutoMergeAllowed:X}),R[58]=X,R[59]=es,R[60]=J,R[61]=v):v=R[61],R[62]!==ec||R[63]!==el||R[64]!==Q||R[65]!==ef||R[66]!==x||R[67]!==_||R[68]!==v||R[69]!==eh||R[70]!==ep?(S=(0,a.jsx)(nY.Slot,{children:(0,a.jsx)(nE,{hideSecondaryButton:eh,inactive:ep,inactiveTooltipText:el,inactiveTooltipDirection:"se",isPrimary:ef,secondaryButtonActive:!0,secondaryButtonAriaLabel:"Select merge method",shouldFocusPrimaryButton:Q,actionList:x,onFocusPrimaryButton:_,onPrimaryButtonClick:ec,children:v})}),R[62]=ec,R[63]=el,R[64]=Q,R[65]=ef,R[66]=x,R[67]=_,R[68]=v,R[69]=eh,R[70]=ep,R[71]=S):S=R[71],R[72]!==j||R[73]!==eu||R[74]!==D?(C=(0,a.jsx)(nY.Slot,{children:(0,a.jsx)("span",{className:"f6 fgColor-muted",children:j?(0,a.jsxs)(a.Fragment,{children:["You can also merge this with the command line."," ",(0,a.jsx)(ee.A,{as:"button",ref:ea,inline:!0,onClick:eu,children:"View command line instructions."})]}):(0,a.jsxs)(a.Fragment,{children:["Only those with"," ",(0,a.jsx)(ee.A,{href:`${D}/en/get-started/learning-about-github/access-permissions-on-github`,inline:!0,children:"write access"})," ","to this repository can merge pull requests."]})})}),R[72]=j,R[73]=eu,R[74]=D,R[75]=C):C=R[75],R[76]!==S||R[77]!==C?(b=(0,a.jsxs)(nY,{children:[S,C]}),R[76]=S,R[77]=C,R[78]=b):b=R[78],R[79]!==b||R[80]!==p?(w=(0,a.jsxs)(a.Fragment,{children:[p,b]}),R[79]=b,R[80]=p,R[81]=w):w=R[81],w}function n6(e){return e.name===m.tw.DIRECT_MERGE}try{n5.displayName||(n5.displayName="CommandLineInstructionsDialog")}catch{}try{n4.displayName||(n4.displayName="DirectMergeActionsSection")}catch{}var n7=n(87826);function n8(e){let t,n,r,s=(0,i.c)(6),{checked:o,onToggleChecked:l}=e;return s[0]!==o||s[1]!==l?(t=(0,a.jsx)(n7.A,{onChange:l,checked:o}),s[0]=o,s[1]=l,s[2]=t):t=s[2],s[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(eC.A.Label,{children:(0,a.jsx)("span",{className:"fgColor-danger",children:" Merge without waiting for requirements to be met (bypass rules) "})}),s[3]=n):n=s[3],s[4]!==t?(r=(0,a.jsxs)(eC.A,{children:[t,n]}),s[4]=t,s[5]=r):r=s[5],r}try{n8.displayName||(n8.displayName="BypassMergeRequirementsToggle")}catch{}function n9(e,t,n){return"MERGEABLE_IF_STATUSES_PASS"===e&&"BEHIND"!==n&&t!==q.ChecksPending&&t!==q.ChecksFailing&&t!==q.UnableToMerge||"MERGEABLE"===e}function re(e){let t,n,r,s,o,c,d,h,p,f,g=(0,i.c)(44),{autoMergeRequest:y,baseRefName:x,handleConfirmingMergeInfo:_,isDraft:v,isInMergeQueue:S,mergeQueue:E,mergeRequirementsState:C,mergeStateStatus:b,mergeBoxRollupStatus:w,status:R,viewerCanAddAndRemoveFromMergeQueue:N,viewerCanAddToMergeQueueSolo:j,shouldFocusPrimaryMergeButton:I,setShouldFocusPrimaryMergeButton:A}=e,T=E?.url,[k,L]=(0,u.useState)(m.lD.GROUP),[M,D]=(0,u.useState)(!1),[P,O]=(0,tl.A)(),{sendAnalyticsEvent:F}=(0,Z.s)();g[0]!==O?(t={onError:e=>{O(e.message)}},g[0]=O,g[1]=t):t=g[1];let{mutate:U,isPending:B}=nX(t);g[2]!==_||g[3]!==F?(n=()=>{D(!0),_(!0),F("auto_merge_section.merge_click","MERGEBOX_AUTO_MERGE_BUTTON")},g[2]=_,g[3]=F,g[4]=n):n=g[4];let q=n;g[5]!==U||g[6]!==_||g[7]!==B||g[8]!==k||g[9]!==F||g[10]!==O?(r=()=>{B||(O(void 0),U({mergeMethod:k===m.lD.SOLO?"SOLO":"GROUP"}),_(!1),F("auto_merge_section.confirm_direct_merge","MERGEBOX_AUTO_MERGE_CONFIRMATION_BUTTON"))},g[5]=U,g[6]=_,g[7]=B,g[8]=k,g[9]=F,g[10]=O,g[11]=r):r=g[11];let $=r;g[12]!==F?(s=(e,t)=>{L(e),F(t,"MERGEBOX_MERGE_QUEUE_SECTION_MERGE_METHOD_MENU_ITEM")},g[12]=F,g[13]=s):s=g[13];let G=s;g[14]!==C||g[15]!==b||g[16]!==R?(o=n9(C,R,b),g[14]=C,g[15]=b,g[16]=R,g[17]=o):o=g[17];let W=o,V=!N||"UNKNOWN"===b||v||S||!!y,Q=(0,u.useRef)(null);return g[18]!==M?(c=()=>{M&&Q?.current&&Q?.current.focus()},d=[M],g[18]=M,g[19]=c,g[20]=d):(c=g[19],d=g[20]),(0,u.useEffect)(c,d),g[21]!==P?(h=P&&(0,a.jsxs)(eE.A,{className:"mb-3",variant:"danger",children:[(0,a.jsx)(eI.A,{className:"mr-2",icon:l.StopIcon}),P]}),g[21]=P,g[22]=h):h=g[22],g[23]!==$||g[24]!==x||g[25]!==q||g[26]!==_||g[27]!==W||g[28]!==B||g[29]!==w||g[30]!==T||g[31]!==C||g[32]!==V||g[33]!==k||g[34]!==F||g[35]!==A||g[36]!==I||g[37]!==M||g[38]!==G||g[39]!==j?(p=M?(0,a.jsxs)(nY,{children:[(0,a.jsx)(nY.Slot,{children:(0,a.jsx)(ed.Q,{ref:Q,variant:"primary",loading:B,loadingAnnouncement:nQ({mergeMethod:k,confirming:!0,inProgress:!0}),onClick:$,children:nQ({mergeMethod:k,confirming:!0,inProgress:!1})})}),(0,a.jsx)(nY.Slot,{children:(0,a.jsx)(ed.Q,{onClick:()=>{_(!1),D(!1),F("auto_merge_section.cancel_auto_merge","MERGEBOX_AUTO_MERGE_CANCEL_CONFIRMATION_BUTTON")},children:"Cancel"})})]}):(0,a.jsxs)(nY,{children:[(0,a.jsx)(nY.Slot,{children:(0,a.jsx)(nE,{inactive:V,inactiveTooltipText:"UNKNOWN"===C?"Checking for the ability to merge automatically":"Merging is blocked due to failing merge requirements",inactiveTooltipDirection:"se",hideSecondaryButton:!j,secondaryButtonAriaLabel:"Select merge queue method",isPrimary:W&&"ALL_PASSED"===w,shouldFocusPrimaryButton:I,onFocusPrimaryButton:()=>A(!1),actionList:(0,a.jsx)(eS.l,{selectionVariant:"single",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n3,{primaryText:"Queue and merge in a group",secondaryText:`This pull request will be automatically grouped with other pull requests and merged into ${x}.`,selected:k===m.lD.GROUP,onSelect:()=>G(m.lD.GROUP,"merqe_queue_section.select_queue_and_merge_in_a_group")}),(0,a.jsx)(n3,{primaryText:"Queue and force solo merge",secondaryText:`This pull request will be merged into ${x} by itself.`,selected:k===m.lD.SOLO,onSelect:()=>G(m.lD.SOLO,"merqe_queue_section.select_queue_and_force_solo_merge")})]})}),onPrimaryButtonClick:q,children:nQ({mergeMethod:k,confirming:!1,inProgress:B})})}),(0,a.jsx)(nY.Slot,{children:(0,a.jsxs)("span",{className:"f6 fgColor-muted pl-2",children:["This repository uses the"," ",(0,a.jsx)(ee.A,{href:T,inline:!0,children:"merge queue"})," ","for all merges into the ",x," branch."]})})]}),g[23]=$,g[24]=x,g[25]=q,g[26]=_,g[27]=W,g[28]=B,g[29]=w,g[30]=T,g[31]=C,g[32]=V,g[33]=k,g[34]=F,g[35]=A,g[36]=I,g[37]=M,g[38]=G,g[39]=j,g[40]=p):p=g[40],g[41]!==h||g[42]!==p?(f=(0,a.jsxs)(a.Fragment,{children:[h,p]}),g[41]=h,g[42]=p,g[43]=f):f=g[43],f}function rt(e){let t,n,r,s,o,c,d,u,m,f=(0,i.c)(25),{autoMergeRequest:g,viewerCanDisableAutoMerge:x,isMergeQueueEnabled:v,handleConfirmingMergeInfo:S}=e,{sendAnalyticsEvent:E}=(0,Z.s)(),[C,b]=(0,tl.A)();f[0]!==b?(t={onError:e=>{b(e.message)}},f[0]=b,f[1]=t):t=f[1];let{mutate:w,isPending:R}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.disableAutoMerge),c=_(),d=(0,y.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eN.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eN.hp)(e);return(0,eN.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.refetchQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>{o(e)},s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eR.n)(a)}(t);f[2]!==w||f[3]!==S||f[4]!==R||f[5]!==E||f[6]!==b?(n=()=>{R||(b(void 0),S(!1),w(),E("auto_merge_section.disable_auto_merge","MERGEBOX_AUTO_MERGE_DISABLE_BUTTON"))},f[2]=w,f[3]=S,f[4]=R,f[5]=E,f[6]=b,f[7]=n):n=f[7];let N=n,j=g?.mergeMethod.toLowerCase()??"merge",I=v?"be added to the merge queue":`${j} automatically`;f[8]!==C?(r=C&&(0,a.jsxs)(eE.A,{className:"mx-3 my-2",variant:"danger",children:[(0,a.jsx)(eI.A,{className:"mr-2",icon:l.StopIcon}),C]}),f[8]=C,f[9]=r):r=f[9];let A=!x;return f[10]!==N||f[11]!==R||f[12]!==A?(s=(0,a.jsx)(nY.Slot,{children:(0,a.jsx)(ed.Q,{disabled:A,onClick:N,loading:R,loadingAnnouncement:"Disabling auto-merge",children:"Disable auto-merge"})}),f[10]=N,f[11]=R,f[12]=A,f[13]=s):s=f[13],f[14]!==I?(o=(0,a.jsx)("span",{className:"text-semibold",children:I}),f[14]=I,f[15]=o):o=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)(ee.A,{inline:!0,href:"https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/incorporating-changes-from-a-pull-request/automatically-merging-a-pull-request",children:"Learn more about automatically merging a pull request."}),f[16]=c):c=f[16],f[17]!==o?(d=(0,a.jsx)(nY.Slot,{children:(0,a.jsxs)("div",{className:"flex-1",children:["This pull request will ",o," when all requirements are met."," ",c]})}),f[17]=o,f[18]=d):d=f[18],f[19]!==s||f[20]!==d?(u=(0,a.jsxs)(nY,{children:[s,d]}),f[19]=s,f[20]=d,f[21]=u):u=f[21],f[22]!==r||f[23]!==u?(m=(0,a.jsxs)(a.Fragment,{children:[r,u]}),f[22]=r,f[23]=u,f[24]=m):m=f[24],m}function rn(e){let t,n,r,s,o,l,c,m,h,p,f,g,y,x,_,v,S,E,C,b=(0,i.c)(68);b[0]!==e?({advisoryWorkspace:t,autoMergeRequest:n,handleConfirmingMergeInfo:r,id:s,isConfirmingMergeInfo:o,isInMergeQueue:l,mergeQueue:c,mergeStateStatus:m,viewerCanAddAndRemoveFromMergeQueue:p,viewerCanAddToMergeQueueSolo:f,viewerCanDisableAutoMerge:y,viewerCanEnableAutoMerge:x,viewerCanAdminBypassMergeRequirements:g,...h}=e,b[0]=e,b[1]=t,b[2]=n,b[3]=r,b[4]=s,b[5]=o,b[6]=l,b[7]=c,b[8]=m,b[9]=h,b[10]=p,b[11]=f,b[12]=g,b[13]=y,b[14]=x):(t=b[1],n=b[2],r=b[3],s=b[4],o=b[5],l=b[6],c=b[7],m=b[8],h=b[9],p=b[10],f=b[11],g=b[12],y=b[13],x=b[14]);let[w,R]=(0,u.useState)(!1),N=h.viewerMergeActions,j=N.find(ra),I=N.find(rr);b[15]!==m||b[16]!==h.mergeRequirementsState||b[17]!==h.status?(_=n9(h.mergeRequirementsState,h.status,m),b[15]=m,b[16]=h.mergeRequirementsState,b[17]=h.status,b[18]=_):_=b[18];let A=_,T=j?.allowableStatus==="ALLOWED",k=I?.allowableStatus==="ALLOWED",L=!!n,M=g&&!L&&(!!T||!A),D=x&&!A;if(t)return null;if(L){let e;b[19]!==n||b[20]!==r||b[21]!==T||b[22]!==y?(e=(0,a.jsx)(rt,{autoMergeRequest:n,isMergeQueueEnabled:T,viewerCanDisableAutoMerge:y,handleConfirmingMergeInfo:r}),b[19]=n,b[20]=r,b[21]=T,b[22]=y,b[23]=e):e=b[23],v=e}else if(T||k)if(T&&M&&w){let e;b[28]!==r||b[29]!==o||b[30]!==A||b[31]!==h||b[32]!==M?(e=(0,a.jsx)(n4,{mergeable:A,handleConfirmingMergeInfo:r,isAdminBypassToggleVisible:M,isAdminBypassToggleChecked:!0,isConfirmingMergeInfo:o,...h}),b[28]=r,b[29]=o,b[30]=A,b[31]=h,b[32]=M,b[33]=e):e=b[33],v=e}else if(T){let e;b[34]!==n||b[35]!==r||b[36]!==s||b[37]!==l||b[38]!==c||b[39]!==m||b[40]!==h||b[41]!==p||b[42]!==f?(e=(0,a.jsx)(re,{autoMergeRequest:n,pullRequestId:s,handleConfirmingMergeInfo:r,isInMergeQueue:l,mergeQueue:c,mergeStateStatus:m,viewerCanAddAndRemoveFromMergeQueue:p,viewerCanAddToMergeQueueSolo:f,...h}),b[34]=n,b[35]=r,b[36]=s,b[37]=l,b[38]=c,b[39]=m,b[40]=h,b[41]=p,b[42]=f,b[43]=e):e=b[43],v=e}else if(x&&!w){let e;b[44]!==r||b[45]!==o||b[46]!==A||b[47]!==h||b[48]!==M||b[49]!==D?(e=(0,a.jsx)(n4,{handleConfirmingMergeInfo:r,mergeable:A,isAdminBypassToggleChecked:!1,isAdminBypassToggleVisible:M,isAutoMergeAllowed:D,isConfirmingMergeInfo:o,...h}),b[44]=r,b[45]=o,b[46]=A,b[47]=h,b[48]=M,b[49]=D,b[50]=e):e=b[50],v=e}else{let e;b[51]!==r||b[52]!==w||b[53]!==o||b[54]!==A||b[55]!==h||b[56]!==M?(e=(0,a.jsx)(n4,{handleConfirmingMergeInfo:r,isAdminBypassToggleChecked:w,isAdminBypassToggleVisible:M,isConfirmingMergeInfo:o,mergeable:A,...h}),b[51]=r,b[52]=w,b[53]=o,b[54]=A,b[55]=h,b[56]=M,b[57]=e):e=b[57],v=e}else{let e;b[24]!==r||b[25]!==o||b[26]!==h?(e=(0,a.jsx)(n4,{mergeable:!1,handleConfirmingMergeInfo:r,isAdminBypassToggleChecked:!1,isAdminBypassToggleVisible:!1,isConfirmingMergeInfo:o,...h}),b[24]=r,b[25]=o,b[26]=h,b[27]=e):e=b[27],v=e}let P=o?"rounded-2":"rounded-bottom-2";return b[58]!==P?(S=(0,d.$)("p-3 bgColor-muted borderColor-muted",P),b[58]=P,b[59]=S):S=b[59],b[60]!==w||b[61]!==o||b[62]!==M?(E=M&&!o&&(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(n8,{checked:w,onToggleChecked:()=>R(!w)})}),b[60]=w,b[61]=o,b[62]=M,b[63]=E):E=b[63],b[64]!==v||b[65]!==S||b[66]!==E?(C=(0,a.jsxs)("div",{className:S,children:[E,v]}),b[64]=v,b[65]=S,b[66]=E,b[67]=C):C=b[67],C}function rr(e){return e.name===m.tw.DIRECT_MERGE}function ra(e){let{name:t}=e;return t===m.tw.MERGE_QUEUE}try{re.displayName||(re.displayName="AddToMergeQueueSection")}catch{}try{rt.displayName||(rt.displayName="DisableAutoMerge")}catch{}try{rn.displayName||(rn.displayName="MergeSection")}catch{}function ri(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:ty.mergeboxLoading,children:(0,a.jsx)(c.A,{})}),t[0]=e):e=t[0],e}let rs=(0,u.memo)(function(e){let t,n,r,s,l,c=(0,i.c)(11);c[0]!==e?({hideIcon:n,...t}=e,c[0]=e,c[1]=t,c[2]=n):(t=c[1],n=c[2]);let d=void 0!==n&&n;return c[3]!==d?(r=(0,a.jsx)(tv,{hideIcon:d}),c[3]=d,c[4]=r):r=c[4],c[5]!==d||c[6]!==t?(s=(0,a.jsx)(u.Suspense,{children:(0,a.jsx)(ro,{hideIcon:d,...t})}),c[5]=d,c[6]=t,c[7]=s):s=c[7],c[8]!==r||c[9]!==s?(l=(0,a.jsx)(o.t,{critical:!0,fallback:r,children:s}),c[8]=r,c[9]=s,c[10]=l):l=c[10],l});function ro(e){let t,n,r,s,o,l,c,d,m,f,v=(0,i.c)(20);v[0]!==e?({viewerLogin:r,channels:t,...n}=e,v[0]=e,v[1]=t,v[2]=n,v[3]=r):(t=v[1],n=v[2],r=v[3]);let{mergeMethod:S}=E();v[4]!==S?(s={mergeMethod:S,bypassRequirements:!1},v[4]=S,v[5]=s):s=v[5];let{data:C,refetch:b,isLoading:w,error:R}=function(e){let t,n,r=(0,i.c)(7),{mergeMethod:a,bypassRequirements:s}=e,o=new URLSearchParams;o.append("merge_method",a),o.append("bypass_requirements",(void 0!==s&&s).toString());let l=`${(0,p.e)(h.u.mergeBox)}?${o.toString()}`,c=_(),d=(0,y.jE)();return r[0]!==l||r[1]!==d||r[2]!==c?(t=async()=>(0,g.H)(l,c,d),r[0]=l,r[1]=d,r[2]=c,r[3]=t):t=r[3],r[4]!==c||r[5]!==t?(n={queryKey:c,queryFn:t,staleTime:1/0},r[4]=c,r[5]=t,r[6]=n):n=r[6],(0,x.I)(n)}(s);e:{if(C?.pullRequest.mergeBoxAliveChannels){o=C?.pullRequest.mergeBoxAliveChannels;break e}o=t}let N=o;v[6]!==b?(l=()=>{(0,u.startTransition)(()=>{b({cancelRefetch:!1})})},v[6]=b,v[7]=l):l=v[7];let j=l;if(v[8]!==N||v[9]!==j?(c={refetchQuery:j,channels:N},v[8]=N,v[9]=j,v[10]=c):c=v[10],!function({channels:e,refetchQuery:t}){let n=(0,u.useMemo)(()=>Object.values(e).filter(e=>null!==e),[e]),r=(0,te.A)(),[a,i]=(0,u.useState)(!1),s=ta(),o=(0,u.useMemo)(()=>(0,e8.n)(()=>{r()&&t()},2e3),[t,r]),l=(0,u.useMemo)(()=>e=>{s?window.setTimeout(()=>o(),e.wait||0):i(!0)},[s,o]);for(let e of((0,u.useEffect)(()=>{r()&&s&&a&&(i(!1),t())},[s,a,i,r,t]),n))(0,e9.x)(e,l)}(c),w){let e;return v[11]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(ri,{}),v[11]=e):e=v[11],e}if(R)throw R;if(!C)return null;v[12]===Symbol.for("react.memo_cache_sentinel")?(d=(0,a.jsx)(ri,{}),m=(0,a.jsx)("h2",{className:"sr-only",children:"Merge info"}),v[12]=d,v[13]=m):(d=v[12],m=v[13]);let I=C.pullRequest.numberOfCommits||0;return v[14]!==C.mergeRequirements||v[15]!==C.pullRequest||v[16]!==n||v[17]!==I||v[18]!==r?(f=(0,a.jsxs)(u.Suspense,{fallback:d,children:[m,(0,a.jsx)(rl,{mergeRequirements:C.mergeRequirements,numberOfCommits:I,pullRequest:C.pullRequest,viewerLogin:r,...n})]}),v[14]=C.mergeRequirements,v[15]=C.pullRequest,v[16]=n,v[17]=I,v[18]=r,v[19]=f):f=v[19],f}function rl(e){let t,n,r,c,m,f,_,v,S,E,w,R,N,j,I,A,T,k,L,M,D,P=(0,i.c)(90),{helpUrl:O,hideIcon:F,mergeRequirements:U,numberOfCommits:B,pullRequest:K,viewerLogin:X}=e;s(K.viewerMergeActions.find(rd));let[J,Y]=(0,u.useState)(!1),Z=!J,[ee,et]=(0,u.useState)(!1),{isInMergeQueue:en,state:er,viewerCanDeleteHeadRef:ea,viewerCanRestoreHeadRef:ei}=K,es=void 0!==F&&F||("CLOSED"===er||"MERGED"===er)&&!ea&&!ei;P[0]!==K.headRefOid?(t={pullRequestHeadSha:K.headRefOid},P[0]=K.headRefOid,P[1]=t):t=P[1];let eo=function(e){let t,n,r,a=(0,i.c)(9),{pullRequestHeadSha:s}=e,o=(0,p.e)(h.u.statusChecks);a[0]!==s?(t={pullRequestHeadSha:s},a[0]=s,a[1]=t):t=a[1];let l=ts(t),c=(0,y.jE)();return a[2]!==o||a[3]!==c||a[4]!==l?(n=async()=>(0,g.H)(o,l,c),a[2]=o,a[3]=c,a[4]=l,a[5]=n):n=a[5],a[6]!==l||a[7]!==n?(r={queryKey:l,throwOnError:!1,queryFn:n,staleTime:1e4},a[6]=l,a[7]=n,a[8]=r):r=a[8],(0,x.I)(r)}(t).data;if(P[2]!==U||P[3]!==K||P[4]!==Z||P[5]!==eo){w=function({pullRequest:e,mergeRequirements:t,statusChecksData:n}){if("MERGED"===e.state)return q.Merged;if("CLOSED"===e.state)return q.Closed;if(function(e){let t=$(e);return t.includes("PULL_REQUEST_REPO_STATE")||t.includes("PULL_REQUEST_USER_STATE")}(t))return q.NonactionableFailure;if(e.isInMergeQueue)return q.InMergeQueue;if(e.isDraft&&!W(n))return q.DraftReadyForReview;if(e.isDraft)return q.DraftNotReadyForReview;if(W(n))return q.ChecksFailing;if(G(n))return q.ChecksPending;if(Q(t,n))return q.NonRequiredChecksUnsuccessful;if(t?.state==="MERGEABLE"||t?.state==="MERGEABLE_IF_STATUSES_PASS"&&V(n))return q.Mergeable;if((function(e){let t=e?.conditions.find(e=>"PULL_REQUEST_RULES"===e.type);if(!t)return[];let n=t?.ruleRollups?.filter(e=>"FAILED"===e.result);return n?n.map(e=>e.ruleType):[]})(t).includes("PULL_REQUEST")&&!H(t).includes("CHANGES_REQUESTED"))return q.AwaitingReview;if(H(t).includes("CHANGES_REQUESTED"))return q.ChangesRequested;else if(t?.state==="UNKNOWN"&&!z(t))return q.Unknown;else if(z(t))return q.MergeConflicts;else return q.UnableToMerge}({pullRequest:K,mergeRequirements:U,statusChecksData:eo});let e=new MergeBoxStatusCalculator(K,U,eo);_=e.overallStatus,n=e.sections.BlockedSection,r=e.sections.ChecksSection,c=e.sections.ClosedOrMergedStateMergeBox,m=e.sections.ConflictsSection,f=e.sections.DraftStateSection,v=e.sections.MergeQueueSection,E=e.sections.ReviewerSection,S=function(e){switch(e){case q.Mergeable:return{icon:l.CheckCircleFillIcon,iconColor:"success.emphasis",title:"Merge pull request"};case q.DraftReadyForReview:case q.DraftNotReadyForReview:return{icon:l.GitPullRequestDraftIcon,iconColor:"neutral.emphasis",title:"Draft"};case q.InMergeQueue:return{icon:l.GitMergeQueueIcon,iconColor:"attention.emphasis",title:"Queued"};case q.ChecksPending:return{icon:l.DotFillIcon,iconColor:"neutral.emphasis",title:"Checks pending"};case q.ChecksFailing:return{icon:l.XCircleFillIcon,iconColor:"danger.emphasis",title:"Checks failing"};case q.NonRequiredChecksUnsuccessful:return{icon:l.DotFillIcon,iconColor:"neutral.emphasis",title:"Non-required checks unsuccessful"};case q.AwaitingReview:return{icon:l.DotFillIcon,iconColor:"danger.emphasis",title:"Awaiting reviews"};case q.ChangesRequested:return{icon:l.XCircleFillIcon,iconColor:"danger.emphasis",title:"Changes requested"};case q.MergeConflicts:return{icon:l.XCircleFillIcon,iconColor:"danger.emphasis",title:"Merge conflicts"};case q.Unknown:return{icon:l.DotFillIcon,iconColor:"neutral.emphasis",title:"Unknown"};case q.Merged:return{icon:l.GitMergeIcon,iconColor:"done.emphasis",title:"Merged"};case q.Closed:return{icon:l.GitPullRequestClosedIcon,iconColor:"neutral.emphasis",title:"Closed"};default:return{icon:l.XCircleFillIcon,iconColor:"danger.emphasis",title:"Unable to merge"}}}(w),R=function(e,t){let n;switch(e){case"ALL_PASSED":n={iconColor:"success.emphasis",borderColor:"borderColor-success-emphasis"};break;case"MERGED":n={iconColor:"done.emphasis",borderColor:"borderColor-done-emphasis"};break;case"QUEUED":n={iconColor:"attention.emphasis",borderColor:"borderColor-attention-emphasis"};break;default:n={iconColor:"neutral.emphasis",borderColor:"borderColor-default"}}return t&&(n.borderColor="borderColor-default"),n}(_,!Z),P[2]=U,P[3]=K,P[4]=Z,P[5]=eo,P[6]=n,P[7]=r,P[8]=c,P[9]=m,P[10]=f,P[11]=_,P[12]=v,P[13]=S,P[14]=E,P[15]=w,P[16]=R}else n=P[6],r=P[7],c=P[8],m=P[9],f=P[10],_=P[11],v=P[12],S=P[13],E=P[14],w=P[15],R=P[16];let el=R,ec=U?.conditions.find(rc),ed=ec?.result==="PASSED";P[17]!==U?(N=function(e){let t=b(e);if(t.length<1)return!1;let n=t[0]?.ruleRollups.find(e=>"AUTHORIZATION"===e.ruleType);return n?.result==="FAILED"}(U),P[17]=U,P[18]=N):N=P[18];let eu=N;P[19]!==U?(j=C(U),P[19]=U,P[20]=j):j=P[20];let em=j,eh=en?l.GitMergeQueueIcon:l.GitMergeIcon;P[21]===Symbol.for("react.memo_cache_sentinel")?(I=()=>{et(!0)},P[21]=I):I=P[21];let ep=I,ef=!ed||eu,eg=K.mergeBoxUserPreferences;P[22]===Symbol.for("react.memo_cache_sentinel")?(A=(0,d.$)(ty.mergePartialContainer,"position-relative partial-pull-merging-analytics-js"),P[22]=A):A=P[22],P[23]!==eh||P[24]!==el.iconColor||P[25]!==S||P[26]!==es?(T=!es&&(0,a.jsx)("div",{className:"d-none d-lg-block","data-testid":"mergeability-icon-wrapper",children:(0,a.jsx)(tg,{icon:eh,ariaLabel:S.title,iconBackgroundColor:el.iconColor})}),P[23]=eh,P[24]=el.iconColor,P[25]=S,P[26]=es,P[27]=T):T=P[27];let ey=ef?ty.mergeBoxAdjustBorders:"",ex=`border rounded-2 ${el.borderColor}`;return P[28]!==ex||P[29]!==ey?(k=(0,d.$)(ey,ex),P[28]=ex,P[29]=ey,P[30]=k):k=P[30],P[31]!==n||P[32]!==ed||P[33]!==r||P[34]!==c.shouldRender||P[35]!==em||P[36]!==m||P[37]!==f||P[38]!==O||P[39]!==J||P[40]!==_||P[41]!==eg||P[42]!==v||P[43]!==U||P[44]!==B||P[45]!==K.advisoryWorkspace||P[46]!==K.autoMergeRequest||P[47]!==K.baseRefName||P[48]!==K.baseRepository||P[49]!==K.deprovisionableCodespaces||P[50]!==K.headRefName||P[51]!==K.headRefOid||P[52]!==K.headRepository||P[53]!==K.id||P[54]!==K.isCrossRepo||P[55]!==K.isDraft||P[56]!==K.isInMergeQueue||P[57]!==K.latestOpinionatedReviews||P[58]!==K.mergeQueue||P[59]!==K.mergeQueueEntry||P[60]!==K.mergeStateStatus||P[61]!==K.pendingReviewRequests||P[62]!==K.resourcePath||P[63]!==K.state||P[64]!==K.viewerCanAddAndRemoveFromMergeQueue||P[65]!==K.viewerCanAddToMergeQueueSolo||P[66]!==K.viewerCanAdminBypassMergeRequirements||P[67]!==K.viewerCanDeleteHeadRef||P[68]!==K.viewerCanDisableAutoMerge||P[69]!==K.viewerCanDismissReviews||P[70]!==K.viewerCanEnableAutoMerge||P[71]!==K.viewerCanReRequestReviews||P[72]!==K.viewerCanRestoreHeadRef||P[73]!==K.viewerCanUpdate||P[74]!==K.viewerCanUpdateBranch||P[75]!==K.viewerMergeActions||P[76]!==K.viewerUpdateMethods||P[77]!==E||P[78]!==ee||P[79]!==ef||P[80]!==Z||P[81]!==w||P[82]!==X?(L=c.shouldRender||!U?(0,a.jsx)(th,{isCrossRepo:K.isCrossRepo,state:K.state,headRefName:K.headRefName,headRepository:K.headRepository,baseRepository:K.baseRepository,viewerCanDeleteHeadRef:K.viewerCanDeleteHeadRef,viewerCanRestoreHeadRef:K.viewerCanRestoreHeadRef,deprovisionableCodespaces:K.deprovisionableCodespaces}):v.shouldRender?(0,a.jsx)(nq,{viewerCanAddAndRemoveFromMergeQueue:K.viewerCanAddAndRemoveFromMergeQueue,mergeQueueEntry:K.mergeQueueEntry,mergeQueue:K.mergeQueue,focusPrimaryMergeButton:ep}):(0,a.jsxs)(a.Fragment,{children:[Z&&(0,a.jsxs)(a.Fragment,{children:[E.shouldRender&&(0,a.jsx)(eF,{consolidatedFailureReasons:E.consolidatedFailureReasons,helpUrl:O,latestOpinionatedReviews:K.latestOpinionatedReviews,numReviewsRequired:E.numReviewsRequired,pendingRequestedReviews:K.pendingReviewRequests,pullRequestId:K.id,reviewsState:E.sectionStatus,viewerCanDismissReviews:K.viewerCanDismissReviews,viewerCanReRequestReviews:K.viewerCanReRequestReviews}),(0,a.jsx)(o.t,{fallback:(0,a.jsx)(np,{}),children:(0,a.jsx)(nh,{pullRequestId:K.id,pullRequestHeadSha:K.headRefOid,focusPrimaryMergeButton:ep,sectionStatus:r.sectionStatus,shouldRender:r.shouldRender,mergeBoxUserPreferences:eg})}),m.shouldRender&&m.conflictsCondition&&(0,a.jsx)(nI,{advisoryWorkspace:K.advisoryWorkspace,baseRefName:K.baseRefName,headRefOid:K.headRefOid,conflictsCondition:m.conflictsCondition,conflictsState:m.sectionStatus,mergeStateStatus:K.mergeStateStatus,resourcePath:K.resourcePath,canUserPushToBase:ed,viewerCanUpdateBranch:K.viewerCanUpdateBranch,viewerLogin:X,viewerUpdateMethods:K.viewerUpdateMethods}),n.shouldRender&&(0,a.jsx)(tw,{failingConditionsAndRules:n.failingConditionsAndRules}),f.shouldRender&&(0,a.jsx)(nF,{viewerCanUpdate:K.viewerCanUpdate,helpUrl:O})]}),ef?null:(0,a.jsx)(rn,{advisoryWorkspace:K.advisoryWorkspace,autoMergeRequest:K.autoMergeRequest,baseRefName:K.baseRefName,numberOfCommits:B,conflictsCondition:em,headRepository:K.headRepository,helpUrl:O,id:K.id,isConfirmingMergeInfo:J,isCrossRepo:K.isCrossRepo,isDraft:K.isDraft,isInMergeQueue:K.isInMergeQueue,mergeQueue:K.mergeQueue,canUserPushToBase:ed,defaultCommitAuthorEmail:U.defaultCommitAuthorEmail,commitMessageBody:U.commitMessageBody,commitMessageHeadline:U.commitMessageHeadline,mergeRequirementsState:U.state,mergeStateStatus:K.mergeStateStatus,mergeBoxRollupStatus:_,viewerCanAddAndRemoveFromMergeQueue:K.viewerCanAddAndRemoveFromMergeQueue,viewerCanAdminBypassMergeRequirements:K.viewerCanAdminBypassMergeRequirements,viewerCanAddToMergeQueueSolo:K.viewerCanAddToMergeQueueSolo,viewerCanDisableAutoMerge:K.viewerCanDisableAutoMerge,viewerMergeActions:K.viewerMergeActions,viewerCanEnableAutoMerge:K.viewerCanEnableAutoMerge,shouldFocusPrimaryMergeButton:ee,setShouldFocusPrimaryMergeButton:et,status:w,possibleCommitAuthorEmails:U.possibleCommitAuthorEmails,handleConfirmingMergeInfo:Y})]}),P[31]=n,P[32]=ed,P[33]=r,P[34]=c.shouldRender,P[35]=em,P[36]=m,P[37]=f,P[38]=O,P[39]=J,P[40]=_,P[41]=eg,P[42]=v,P[43]=U,P[44]=B,P[45]=K.advisoryWorkspace,P[46]=K.autoMergeRequest,P[47]=K.baseRefName,P[48]=K.baseRepository,P[49]=K.deprovisionableCodespaces,P[50]=K.headRefName,P[51]=K.headRefOid,P[52]=K.headRepository,P[53]=K.id,P[54]=K.isCrossRepo,P[55]=K.isDraft,P[56]=K.isInMergeQueue,P[57]=K.latestOpinionatedReviews,P[58]=K.mergeQueue,P[59]=K.mergeQueueEntry,P[60]=K.mergeStateStatus,P[61]=K.pendingReviewRequests,P[62]=K.resourcePath,P[63]=K.state,P[64]=K.viewerCanAddAndRemoveFromMergeQueue,P[65]=K.viewerCanAddToMergeQueueSolo,P[66]=K.viewerCanAdminBypassMergeRequirements,P[67]=K.viewerCanDeleteHeadRef,P[68]=K.viewerCanDisableAutoMerge,P[69]=K.viewerCanDismissReviews,P[70]=K.viewerCanEnableAutoMerge,P[71]=K.viewerCanReRequestReviews,P[72]=K.viewerCanRestoreHeadRef,P[73]=K.viewerCanUpdate,P[74]=K.viewerCanUpdateBranch,P[75]=K.viewerMergeActions,P[76]=K.viewerUpdateMethods,P[77]=E,P[78]=ee,P[79]=ef,P[80]=Z,P[81]=w,P[82]=X,P[83]=L):L=P[83],P[84]!==k||P[85]!==L?(M=(0,a.jsx)("div",{className:k,children:L}),P[84]=k,P[85]=L,P[86]=M):M=P[86],P[87]!==M||P[88]!==T?(D=(0,a.jsxs)("div",{className:A,children:[T,M]}),P[87]=M,P[88]=T,P[89]=D):D=P[89],D}function rc(e){return"PULL_REQUEST_USER_STATE"===e.type}function rd(e){return e.name===m.tw.DIRECT_MERGE}try{ri.displayName||(ri.displayName="MergeBoxLoading")}catch{}try{rs.displayName||(rs.displayName="MergeBoxWithSuspense")}catch{}try{ro.displayName||(ro.displayName="MergeBoxWrapper")}catch{}try{rl.displayName||(rl.displayName="MergeBox")}catch{}function ru(e){return Object.values(m.q$).includes(e)}},17645:(e,t,n)=>{n.d(t,{Qv:()=>s,TW:()=>l,iG:()=>o,jw:()=>d,lD:()=>i,nw:()=>c,q$:()=>a,tw:()=>r});let r={DIRECT_MERGE:"DIRECT_MERGE",AUTO_MERGE:"AUTO_MERGE",MERGE_QUEUE:"MERGE_QUEUE"},a={MERGE:"MERGE",SQUASH:"SQUASH",REBASE:"REBASE"},i={GROUP:"GROUP",SOLO:"SOLO"},s={Approvals:"approvals",RequestedChanges:"requested changes",PendingReviewRequest:"pending reviews"},o=["PULL_REQUEST_RULES"],l=["PULL_REQUEST_USER_STATE"],c=["PULL_REQUEST_MERGE_CONFLICT_STATE"],d=["PULL_REQUEST_STATE","PULL_REQUEST_MERGE_METHOD","PULL_REQUEST_REPO_STATE","UNKNOWN"]},69759:(e,t,n)=>{n.d(t,{B:()=>r});function r(e,t){let n=e.createElement("template");return n.innerHTML=t,e.importNode(n.content,!0)}},53885:(e,t,n)=>{n.d(t,{e:()=>i});var r=n(37285),a=n(50129);function i(e,t){let{basePageDataUrl:n}=(0,a.Yu)(),i=`${n}/page_data/${e}`;return t&&(i+=`?${t}`),(0,r.RD)(i)}},20622:(e,t,n)=>{n.d(t,{u:()=>r});let r={codeButton:"code_button",codeowners:"codeowners",commits:"commits",diffEntries:"diff_entries",diffstat:"diffstat",header:"header",mergeBox:"merge_box",mergeInstructions:"merge_instructions",pendingReview:"pending_review",statusChecks:"status_checks",tabCounts:"tab_counts",threadPreviews:"thread_previews",viewedFilesCount:"viewed_files_count",viewedFilesCount2:"viewed_files_count2",diffSummaries:"diff_summaries",diffViewUserSettings:"user_diff_view_settings",tableOfContents:"table_of_contents",diffCollapsedStatus:"diff_collapsed_status",diffContextLines:"diff_entry_lines",richDiff:"rich_diff",abandonReview:"abandon_review",addCommentReaction:"add_comment_reaction",changeBase:"change_base",cleanupCodespaces:"cleanup_codespaces",createReviewComment:"create_review_comment",deleteHeadRef:"delete_head_ref",dequeuePullRequest:"dequeue_pull_request",disableAutoMerge:"disable_auto_merge",enableAutoMerge:"enable_auto_merge",dismissReview:"dismiss_review",markReadyForReview:"mark_ready_for_review",merge:"merge",removeCommentReaction:"remove_comment_reaction",reRequestReviewFromUser:"re_request_review_from_user",restoreHeadRef:"restore_head_ref",resolveThread:"resolve_thread",runActionRequiredWorkflows:"run_action_required_workflows",submitReview:"submit_review",unresolveThread:"unresolve_thread",updateReviewComment:"update_review_comment",updatePullRequestBranch:"update_pull_request_branch",updateTitle:"update_title",updateDiffViewUserSettings:"update_diff_view_user_settings",updateViewedFiles:"update_viewed_files",updateMergeBoxUserPreference:"update_merge_box_user_preference",updateWhitespacePreference:"update_whitespace_preference",hideComment:"hide_comment",unhideComment:"unhide_comment",submitSuggestedChanges:"apply_suggestions"}},48845:(e,t,n)=>{n.d(t,{R:()=>i,hp:()=>a,ol:()=>AuthSessionExpiredError,q$:()=>s});var r=n(96379);let FetchRequestError=class FetchRequestError extends Error{constructor(e){super("Unable to perform this operation. Please try again later."),this.name="FetchRequestError",this.cause=e}};let ServerUnavailableError=class ServerUnavailableError extends Error{constructor(e){super("Unable to perform this operation. Please try again later."),this.name="ServerUnavailableError",this.cause=e}};let JSONParseFetchError=class JSONParseFetchError extends Error{constructor(e){super("Unable to read response from the server. Please try again later."),this.name="JSONParseFetchError",this.cause=e}};let AuthSessionExpiredError=class AuthSessionExpiredError extends Error{constructor(){super("Unable to perform this operation. Please try again later."),this.name="AuthSessionExpiredError"}};async function a(e){try{return await e.json()}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw new JSONParseFetchError(e)}}function i(e,t,n){if(!e.ok){if(e.status>=500)throw new ServerUnavailableError(e.status);if(n)throw n;if(t)throw Error(t?.error||"Unknown error occurred",{cause:e.status});throw Error(`HTTP ${e.status}`)}}async function s(e,t){try{return await (0,r.Sr)(e,t)}catch(e){throw new FetchRequestError(e)}}},40235:(e,t,n)=>{n.d(t,{x:()=>h});var r,a=n(96540),i=n(70263),s=n(11418),o=n(73056),l=n(74848),c=n(10204);let d=(0,a.createContext)(null),u=null;function m(e,t){let n=c.KK.parse(e);if(!n)throw Error(`Invalid channel name. Did you forget to sign it with \`signChannel("${e}")\`?`);return u||(u=new c.m0),u.add({topic:n,subscriber:t}),{unsubscribe:()=>{u?.delete({topic:n,subscriber:t})}}}try{d.displayName||(d.displayName="AliveTestContext")}catch{}try{(r=function({children:e,initialMessages:t}){return(0,a.useEffect)(()=>{let e=[];if(t)for(let[n,r]of t){let t=window.setTimeout(()=>{var e=n,t=r;if(null===u)throw Error('Test helper `dispatchAliveTestMessage` called outside `AliveTestProvider`. Please wrap your component under test in `AliveTestProvider` from "@github-ui/use-alive/test-utils".');for(let n of Array.from(u.subscribers(e)))n(t)},0);e.push(t)}return()=>{for(let t of(u=null,e))window.clearTimeout(t)}}),(0,l.jsx)(d.Provider,{value:m,children:e})}).displayName||(r.displayName="AliveTestProvider")}catch{}function h(e,t){let n=(0,i.A)(),r=(0,a.useContext)(d);(0,a.useEffect)(()=>{let a=()=>{},i=!1;return async function(){if(e){if("function"==typeof r){let n=await r(e,t);n&&(a=n.unsubscribe);return}try{let r=await (0,s.H)();if(i)return;let l=(0,o.$)(r,e,t);l?.unsubscribe&&(n()?a=l.unsubscribe:l.unsubscribe())}catch(e){console.error(e)}}}(),()=>{i=!0,a()}},[e,t,n,r])}},30459:(e,t,n)=>{n.d(t,{S:()=>l,s:()=>o});var r=n(21728),a=n(96540),i=n(53419),s=n(49936);function o(){let e,t,n=(0,r.c)(6),o=(0,a.useContext)(s.I);if(!o)throw Error("useAnalytics must be used within an AnalyticsContext");let{appName:l,category:c,metadata:d}=o;n[0]!==l||n[1]!==c||n[2]!==d?(e=(e,t,n)=>{let r={react:!0,app_name:l,category:c,...d};(0,i.BI)(e,{...r,...void 0===n?{}:n,target:t})},n[0]=l,n[1]=c,n[2]=d,n[3]=e):e=n[3];let u=e;return n[4]!==u?(t={sendAnalyticsEvent:u},n[4]=u,n[5]=t):t=n[5],t}function l(){let e,t,n=(0,r.c)(4),{sendAnalyticsEvent:a}=o();n[0]!==a?(e=e=>{a("analytics.click",void 0,void 0===e?{}:e)},n[0]=a,n[1]=e):e=n[1];let i=e;return n[2]!==i?(t={sendClickAnalyticsEvent:i},n[2]=i,n[3]=t):t=n[3],t}},34535:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(96540);function a({focusRowRef:e,mouseRowRef:t}){let[n,a]=r.useState(!1);return r.useEffect(()=>{if(e.current&&t.current){let n=()=>{let t=e.current?.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&a(!0)};e.current.onfocus=()=>{n()},e.current.onblur=()=>{a(!1)},t.current.onmouseenter=()=>{n()},t.current.onmouseleave=()=>{a(!1)}}},[e,t]),n}},8625:(e,t,n)=>{n.d(t,{H:()=>a});var r=n(96540);let a=({inputRef:e,fallbackEventHandler:t})=>(0,r.useCallback)((n,r,a)=>{let i=e.current;if(!i)return;let s=document.activeElement;i.focus();let o=r??[i.selectionStart??i.value.length,i.selectionEnd??i.value.length],l=void 0===a?((e,t,n)=>{let r=t[1]-t[0];return e<t[0]?e:e<t[1]?t[0]+n:e+(n-r)})(i.selectionStart??i.value.length,o,n.length):Array.isArray(a)?a[0]:a,c=Array.isArray(a)?a[1]:l,d=!1;try{if(document.activeElement!==i)throw Error("Input must be focused to use execCommand");i.setSelectionRange(o[0],o[1]),d=""===n?document.execCommand("delete",!1):document.execCommand("insertText",!1,n),i.setSelectionRange(l,c)}catch{d=!1}if((s instanceof HTMLInputElement||s instanceof HTMLTextAreaElement)&&s.focus(),!d){let r=i.value.slice(0,o[0])+n+i.value.slice(o[1]),a=new InputEvent("input",{bubbles:!1});e.current.value=r,e.current.setSelectionRange(l,c),e.current.dispatchEvent(a),t(((e,t)=>({...e,nativeEvent:e,target:t,currentTarget:t,preventDefault:()=>e.preventDefault(),isDefaultPrevented:()=>e.defaultPrevented,isPropagationStopped:()=>!1,persist:()=>({})}))(a,e.current))}},[e,t])},5106:(e,t,n)=>{n.d(t,{eB:()=>S,ZL:()=>v,TO:()=>_});var r,a=n(74848),i=n(21728),s=n(80679),o=n(89169),l=n(38621);let c={description:"TaskListItem-module__description--UXlQ1",iconTransition:"TaskListItem-module__iconTransition--qlkQV",fadeOut:"TaskListItem-module__fadeOut--HZHZN",fadeText:"TaskListItem-module__fadeText--S_0MH",entering:"TaskListItem-module__entering--mxeSa",exiting:"TaskListItem-module__exiting--DO7Ic"};var d=n(96540),u=n(67154),m=n(30388),h=n(82595),p=n(84511);let f={animatedDot:"WithAnimatedEllipsis-module__animatedDot--Dbgsr"},g=e=>{let t,n,r,s=(0,i.c)(4),{children:o}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("style",{children:`
    @keyframes dot1 {
      0%, 75% { opacity: 1; }
      100% { opacity: 0; }
    }
    @keyframes dot2 {
      0% { opacity: 0; }
      15% { opacity: 0; }
      25%, 75% { opacity: 1; }
      100% { opacity: 0; }
    }
    @keyframes dot3 {
      0% { opacity: 0; }
      40% { opacity: 0; }
      50%, 75% { opacity: 1; }
      100% { opacity: 0; }
    }
  `}),n=[1,2,3].map(y),s[0]=t,s[1]=n):(t=s[0],n=s[1]),s[2]!==o?(r=(0,a.jsxs)(a.Fragment,{children:[o,t,n]}),s[2]=o,s[3]=r):r=s[3],r};try{g.displayName||(g.displayName="WithAnimatedEllipsis")}catch{}function y(e){return(0,a.jsx)(p.A,{sx:{animationName:`dot${e}`},className:f.animatedDot,children:"."},`dot${e}`)}let x=e=>{let t,n,r,s=(0,i.c)(7),{text:o}=e,[l,u]=(0,d.useState)(null),[m,h]=(0,d.useState)("none");s[0]!==l||s[1]!==o?(t=()=>{if(null===l)return void u(o);if(o!==l){h("exiting");let e=setTimeout(()=>{u(o),h("entering")},400);return()=>clearTimeout(e)}},n=[o,l],s[0]=l,s[1]=o,s[2]=t,s[3]=n):(t=s[2],n=s[3]),(0,d.useEffect)(t,n);let p=`${c.fadeText} ${"entering"===m?c.entering:"exiting"===m?c.exiting:null}`;return s[4]!==l||s[5]!==p?(r=(0,a.jsx)("span",{className:p,children:l}),s[4]=l,s[5]=p,s[6]=r):r=s[6],r};function _(e,t,n){if(t)return{icon:l.GitMergeQueueIcon,color:"var(--fgColor-attention)","data-testid":"icon-git-merge-queue"};if("queued"===n)return{icon:l.ClockIcon,color:"var(--fgColor-attention)","data-testid":"icon-clock"};if("open"===e){if("waiting_for_user"===n||"completed"===n)return{icon:l.CheckCircleFillIcon,color:"var(--fgColor-success)","data-testid":"icon-check-circle-fill"};if("failed"===n||"timed_out"===n)return{icon:l.StopIcon,color:"var(--fgColor-danger)","data-testid":"icon-stop"};if("in_progress"===n)return{icon:()=>(0,a.jsx)(s.gX,{animated:!0}),color:"attention.fg","data-testid":"icon-spinning-circle"};if("idle"===n)return{icon:l.DotFillIcon,color:"var(--fgColor-muted)","data-testid":"icon-dot"};if("cancelled"===n)return{icon:l.SkipIcon,color:"var(--fgColor-muted)","data-testid":"icon-skip"}}return"merged"===e?{icon:l.GitMergeIcon,color:"var(--fgColor-done)","data-testid":"icon-git-merge"}:"closed"===e?{icon:l.GitPullRequestClosedIcon,color:"var(--fgColor-danger)","data-testid":"icon-skip"}:{icon:l.DotFillIcon,color:"var(--fgColor-muted)","data-testid":"icon-idle"}}function v(e){let t,n,r,s,l,p,f,g,y,v,S,E,C=(0,i.c)(32),{state:b,revisionCount:w,startedAt:R,prState:N,prUrl:j,prTitle:I,prNwo:A,prNumber:T,prInMergeQueue:k}=e,[L,M]=(0,d.useState)(null),[D,P]=(0,d.useState)(!1);C[0]!==k||C[1]!==N||C[2]!==b?(n="merged"===N?"Merged":"closed"===N?"Closed":k?"Queued to merge":b&&(0,u.w)(b)||"",C[0]=k,C[1]=N,C[2]=b,C[3]=n):n=C[3],t=n,C[4]!==k||C[5]!==N||C[6]!==b?(s=_(N,k,b),C[4]=k,C[5]=N,C[6]=b,C[7]=s):s=C[7],r=s,C[8]!==L||C[9]!==r?(l=()=>{if(!L)return void M(r);if(L.icon!==r.icon){P(!0);let e=setTimeout(()=>{M(r),P(!1)},300);return()=>clearTimeout(e)}},p=[r,L],C[8]=L,C[9]=r,C[10]=l,C[11]=p):(l=C[10],p=C[11]),(0,d.useEffect)(l,p);let O=w>0?`${w} revision${w>1?"s":""} \xb7 `:null,F=`${c.iconTransition} ${D?c.fadeOut:""}`;return C[12]!==r||C[13]!==F?(f=(0,a.jsx)(m.qJ.Item.LeadingVisual,{children:(0,a.jsx)(h.I,{...r,className:F})}),C[12]=r,C[13]=F,C[14]=f):f=C[14],C[15]!==I?(g=(0,a.jsx)(m.qJ.Item.Title,{children:I}),C[15]=I,C[16]=g):g=C[16],C[17]!==R?(y=(0,a.jsx)(o.A,{format:"micro",datetime:R}),C[17]=R,C[18]=y):y=C[18],C[19]!==t?(v=(0,a.jsx)(x,{text:t}),C[19]=t,C[20]=v):v=C[20],C[21]!==T||C[22]!==A||C[23]!==O||C[24]!==y||C[25]!==v?(S=(0,a.jsx)(m.qJ.Item.Description,{children:(0,a.jsxs)("span",{className:c.description,children:[A,"#",T," \xb7 started ",y," ago \xb7"," ",O,v]})}),C[21]=T,C[22]=A,C[23]=O,C[24]=y,C[25]=v,C[26]=S):S=C[26],C[27]!==j||C[28]!==S||C[29]!==f||C[30]!==g?(E=(0,a.jsxs)(m.qJ.Item,{href:j,isExternalLink:!0,children:[f,g,S]}),C[27]=j,C[28]=S,C[29]=f,C[30]=g,C[31]=E):E=C[31],E}function S(e){let t,n,r,s,o=(0,i.c)(7),{repositoryNwo:d}=e,u=`Creating task in ${d}`;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(m.qJ.Item.LeadingVisual,{children:(0,a.jsx)(h.I,{icon:l.DotFillIcon,color:"var(--fgColor-attention)"})}),o[0]=t):t=o[0],o[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(m.qJ.Item.Title,{children:(0,a.jsx)(g,{children:"Creating task"})}),o[1]=n):n=o[1],o[2]!==d?(r=(0,a.jsxs)(m.qJ.Item.Description,{children:[(0,a.jsx)("span",{className:c.description,children:d})," \xb7 Initializing pull request\u2026"]}),o[2]=d,o[3]=r):r=o[3],o[4]!==u||o[5]!==r?(s=(0,a.jsxs)(m.qJ.Item,{"aria-label":u,children:[t,n,r]}),o[4]=u,o[5]=r,o[6]=s):s=o[6],s}try{x.displayName||(x.displayName="FadeText")}catch{}try{v.displayName||(v.displayName="TaskListItem")}catch{}try{(r=function(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(m.qJ.Item.Skeleton,{}),t[0]=e):e=t[0],e}).displayName||(r.displayName="LoadingTaskListItem")}catch{}try{S.displayName||(S.displayName="OptimisticTaskListItem")}catch{}},47865:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(21728),a=n(97665),i=n(94747),s=n(69599),o=n(51120),l=n(55899),c=n(93654);function d(e){let t,n,o,d,m,h,p,f,g,y=(0,r.c)(22),{apiURL:x,onError:_}=e,v=(0,a.jE)();y[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.G7)("copilot_immersive_agent_branch_selection"),y[0]=t):t=y[0];let S=t;y[1]===Symbol.for("react.memo_cache_sentinel")?(n=["createTask"],y[1]=n):n=y[1],y[2]!==v?(o=async e=>{await v.cancelQueries({queryKey:c.ZL});let t=v.getQueryData(c.ZL)??[],n=function({clientGeneratedId:e,nwo:t,problemStatement:n,baseRef:r,eventType:a,subagent:i}){return{resource_type:"pull",resource_id:-1,session_count:1,latest_session_updated_at:new Date().toISOString(),latest_session_state:"in_progress",event_identifiers:[e],event_type:a,isOptimistic:!0,clientGeneratedId:e,nwo:t,problemStatement:n,baseRef:r,subagent:i}}(e);return v.setQueryData(c.ZL,[n,...t]),{previousTasks:t}},y[2]=v,y[3]=o):o=y[3],y[4]!==x?(d=async e=>{if(!(await u({...e,apiURL:x,isBranchSelectionEnabled:S,title:e.problemStatement})).ok)throw Error(`Failed to create task: ${e.clientGeneratedId}`);return e.clientGeneratedId},y[4]=x,y[5]=d):d=y[5],y[6]!==_||y[7]!==v?(m=(e,t)=>{let n=(v.getQueryData(c.ZL)??[]).filter(e=>e.clientGeneratedId!==t.clientGeneratedId);v.setQueryData(c.ZL,n),_?.(e,t)},y[6]=_,y[7]=v,y[8]=m):m=y[8],y[9]!==v?(h=()=>{v.invalidateQueries({queryKey:c.ZL})},y[9]=v,y[10]=h):h=y[10],y[11]!==o||y[12]!==d||y[13]!==m||y[14]!==h?(p={mutationKey:n,onMutate:o,mutationFn:d,onError:m,onSuccess:h},y[11]=o,y[12]=d,y[13]=m,y[14]=h,y[15]=p):p=y[15];let E=(0,i.n)(p);y[16]!==E?(f=e=>{let t=(0,l.u)();E.mutate({...e,clientGeneratedId:t})},y[16]=E,y[17]=f):f=y[17];let C=f;return y[18]!==C||y[19]!==E.error||y[20]!==E.isPending?(g={createTask:C,isCreating:E.isPending,createError:E.error},y[18]=C,y[19]=E.error,y[20]=E.isPending,y[21]=g):g=y[21],g}async function u({clientGeneratedId:e,nwo:t,problemStatement:n,baseRef:r,apiURL:a,isBranchSelectionEnabled:i,eventType:s,title:l,subagent:c}){let d=`/agents/swe/jobs/${t}`;return await (0,o.I)({apiURL:a,path:d,method:"POST",body:{problem_statement:n,pull_request:{...i&&{base_ref:`refs/heads/${r}`},...l&&{title:l}},event_identifiers:[e],event_type:s,subagent:c}})}},64846:(e,t,n)=>{n.d(t,{Q:()=>s});var r=n(69599),a=n(82075),i=n(96540);function s(e){let t=(0,a.D)("localStorage"),n=(0,r.G7)("copilot_agent_task_caching");return{value:(0,i.useMemo)(()=>{if(n)return t.getItem(e)??void 0},[n,t,e]),setValue:r=>{n&&t.setItem(e,r)},removeItem:()=>{n&&t.removeItem(e)}}}},91865:(e,t,n)=>{n.d(t,{ET:()=>s,Iw:()=>l,V4:()=>c,ms:()=>o});var r=n(96540),a=n(97286),i=n(64846);let s="AGENT_SESSIONS_PR_MAP";function o(e){return Array.from(new Set(e?e.map(e=>e.resource_id):[])).sort((e,t)=>Number(e)-Number(t)).join(",")}let l=async(e,t)=>{let n=o(e);if(!n)return{};let r=await fetch(`/copilot/agent-sessions/pull-requests?pull_request_ids=${encodeURIComponent(n)}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!r.ok)throw Error("Failed to fetch pull requests");let a=(await r.json()).pull_requests;return t(a),a};function c({tasks:e,sessionsPollingInterval:t=3e3,initialPullRequestsMap:n}){let c=o(e),{value:d,setValue:u}=(0,i.Q)(s),m=(0,r.useRef)(n??{}),h=(0,a.I)({queryKey:["agent-sessions-pull-requests",c],queryFn:async()=>await l(e,u),initialData:n??d,refetchInterval:t,refetchIntervalInBackground:!1,enabled:c.length>0});h.data&&(m.current={...m.current,...h.data});let p=(0,r.useMemo)(()=>m.current,[h.data]);return{...h,data:p}}},93654:(e,t,n)=>{n.d(t,{ZL:()=>c,j:()=>u,si:()=>m,xZ:()=>d});var r=n(21728),a=n(97665),i=n(42455),s=n(51120),o=n(91865),l=n(64846);let c=["agent-tasks"],d="AGENT_SESSIONS_TASKS",u=async(e,t,n)=>{let r=await (0,s.I)({apiURL:n,path:"/agents/sessions"}),a=function(e,t){let n=e.map(e=>{let n=t.find(t=>e.event_identifiers?.includes(t.clientGeneratedId));return{...e,isOptimistic:!!n,...n&&{problemStatement:n.problemStatement,nwo:n.nwo,baseRef:n.baseRef,clientGeneratedId:n.clientGeneratedId}}}),r=t.filter(e=>!n.some(t=>t.event_identifiers?.includes(e.clientGeneratedId)));return[...n,...r].sort((e,t)=>new Date(t.latest_session_updated_at).getTime()-new Date(e.latest_session_updated_at).getTime())}(function(e){let t=new Map;for(let n of e){let e=t.get(n.resource_id.toString());e?(e.session_count+=1,new Date(n.last_updated_at)>new Date(e.latest_session_updated_at)&&(e.latest_session_updated_at=n.last_updated_at,e.latest_session_state=n.state)):t.set(n.resource_id.toString(),{resource_type:n.resource_type,resource_id:n.resource_id,session_count:1,latest_session_updated_at:n.last_updated_at,latest_session_state:n.state,event_identifiers:n.event_identifiers})}return Array.from(t.values()).sort((e,t)=>new Date(t.latest_session_updated_at).getTime()-new Date(e.latest_session_updated_at).getTime())}((await r.json()).sessions),(e.getQueryData(c)||[]).filter(e=>!0===e.isOptimistic));return t(a),a};function m(e){let t,n,s,m,f,g,y,x,_=(0,r.c)(25),{apiURL:v,sessionsPollingInterval:S,initialTasks:E,initialPullRequestsMap:C}=e,b=void 0===S?3e3:S,{value:w,setValue:R}=(0,l.Q)(d),N=(0,a.jE)();_[0]!==v||_[1]!==N||_[2]!==R?(t=async()=>await u(N,R,v),_[0]=v,_[1]=N,_[2]=R,_[3]=t):t=_[3];let j=E??w;_[4]!==b||_[5]!==t||_[6]!==j?(n={queryKey:c,queryFn:t,initialData:j,refetchInterval:b,refetchIntervalInBackground:!1},_[4]=b,_[5]=t,_[6]=j,_[7]=n):n=_[7];let I=(0,i.b)(n);_[8]!==I.data?(m=I.data||[],_[8]=I.data,_[9]=m):m=_[9],s=m,_[10]!==s?(f=s.filter(p),_[10]=s,_[11]=f):f=_[11];let A=f;_[12]!==C||_[13]!==b||_[14]!==A?(g={tasks:A,sessionsPollingInterval:b,initialPullRequestsMap:C},_[12]=C,_[13]=b,_[14]=A,_[15]=g):g=_[15];let{data:T,isError:k,isLoading:L}=(0,o.V4)(g);if(_[16]!==s||_[17]!==T){let e;_[19]!==T?(e=e=>{if(void 0===e.resource_id)return e;let t=T[e.resource_id];return t?{...e,isOptimistic:!1,pull:t}:{...e,pull:void 0}},_[19]=T,_[20]=e):e=_[20],y=s.map(e).filter(h),_[16]=s,_[17]=T,_[18]=y}else y=_[18];let M=y,D=I.isLoading&&!I.data||L&&!C,P=I.isError||k;return _[21]!==P||_[22]!==D||_[23]!==M?(x={tasks:M,isLoading:D,isError:P},_[21]=P,_[22]=D,_[23]=M,_[24]=x):x=_[24],x}function h(e){return!0===e.isOptimistic||void 0!==e.pull}function p(e){return void 0!==e.resource_id}},37272:(e,t,n)=>{n.d(t,{E:()=>i});var r=n(74848),a=n(64375);function i({children:e}){return(0,a.P)()?(0,r.jsx)(r.Fragment,{children:e}):null}try{i.displayName||(i.displayName="AllShortcutsEnabled")}catch{}},64375:(e,t,n)=>{n.d(t,{$:()=>s,P:()=>o});var r=n(74848),a=n(96540);let i=a.createContext(!0);function s({allShortcutsEnabled:e,children:t}){return(0,r.jsxs)(i.Provider,{value:e,children:[" ",t," "]})}function o(){return a.useContext(i)}try{i.displayName||(i.displayName="AllShortcutsEnabledContext")}catch{}try{s.displayName||(s.displayName="AllShortcutsEnabledProvider")}catch{}},31078:(e,t,n)=>{n.d(t,{Ck:()=>o,JS:()=>s});var r=n(74848),a=n(96540);let i=(0,a.createContext)({query:"",setQuery:()=>void 0});function s(){return(0,a.useContext)(i)}function o({children:e}){let[t,n]=(0,a.useState)(""),s=(0,a.useMemo)(()=>({query:t,setQuery:n}),[n,t]);return(0,r.jsx)(i.Provider,{value:s,children:e})}try{i.displayName||(i.displayName="FileQueryContext")}catch{}try{o.displayName||(o.displayName="FileQueryProvider")}catch{}},53552:(e,t,n)=>{n.d(t,{eu:()=>l,qV:()=>o,sq:()=>c});var r=n(74848),a=n(79634),i=n(96540);let s=i.createContext({});function o({children:e,...t}){return(0,r.jsx)(s.Provider,{value:t,children:e})}function l(){return i.useContext(s)}function c(){return(0,a.X)()}try{s.displayName||(s.displayName="FilesPageInfoContext")}catch{}try{o.displayName||(o.displayName="FilesPageInfoProvider")}catch{}},97793:(e,t,n)=>{n.d(t,{O:()=>p});var r=n(74848),a=n(96379),i=n(38621),s=n(96665),o=n(65029),l=n(24815),c=n(43371),d=n.n(c),u=n(96540);let m={dialogForm:"McpServerDialog-module__dialogForm--pUtNF",underline:"McpServerDialog-module__underline--YKUMk",inputError:"McpServerDialog-module__inputError--Ojb_P",formField:"McpServerDialog-module__formField--rsUqW",hiddenSubmitButton:"McpServerDialog-module__hiddenSubmitButton--KcK0s"},h=(0,r.jsx)("a",{href:"https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"},children:"MCP authorization specification"}),p=({isOpen:e,onClose:t,returnUrl:n,onServerAdded:c,returnFocusRef:p,showSettingsLink:f=!0})=>{let[g,y]=(0,u.useState)(""),[x,_]=(0,u.useState)(""),[v,S]=(0,u.useState)(null),[E,C]=(0,u.useState)(null),b=(0,u.useCallback)(()=>{y(""),_(""),S(null),C(null),t()},[t]),w=async e=>{if(e&&e.preventDefault(),""===g.trim()||""===x.trim()){x.trim()||S("MCP server URL is required"),g.trim()||C("Name is required");return}try{if(S(null),!function(e){try{let t=new URL(e.trim(),window.location.origin),n=d()();return"https:"===t.protocol&&!!t.hostname&&/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.hostname)&&!n.test(e)}catch{return!1}}(x))return void S("Invalid HTTPS URL format");let e=new FormData;e.append("mcp_server_url",x.trim()),e.append("name",g.trim()),n&&e.append("return_url",n);let t=await (0,a.DI)("/copilot/mcp/servers",{method:"POST",body:e});if(!t.ok){let e="Failed to add MCP server";try{let n=await t.text();try{let t=JSON.parse(n);if("unsupported_server_type"===t.error)e=(0,r.jsxs)(r.Fragment,{children:["This server does not conform to the ",h,"."]});else if(t.field_errors){for(let[e,n]of Object.entries(t.field_errors)){let t=n.join(", ");"mcp_server_url"===e?S(t):"display_name"===e&&C(t)}return}else t.message&&(e=t.message)}catch{e=n.includes("well-known/oauth-authorization-server")||"Client setup failed"===n.trim()?(0,r.jsxs)(r.Fragment,{children:["This server does not conform to the ",h,"."]}):n||e}}catch{e="Failed to add MCP server"}S(e);return}let i=(await t.json()).redirect_url;i&&"string"==typeof i?(b(),c?.(),window.location.assign(i)):(b(),c?.())}catch(e){e instanceof Error?S(e.message):S("An unknown error occurred")}};return e?(0,r.jsx)(s.l,{title:"Add remote MCP",onClose:b,footerButtons:[{buttonType:"default",content:"Cancel",onClick:b},{buttonType:"primary",content:(0,r.jsxs)(r.Fragment,{children:["Connect to MCP",(0,r.jsx)("span",{style:{marginLeft:8},children:(0,r.jsx)(i.LinkExternalIcon,{size:16})})]}),onClick:()=>{w()}}],returnFocusRef:p,children:(0,r.jsxs)("form",{className:m.dialogForm,onSubmit:w,autoComplete:"on",children:[(0,r.jsxs)(o.A,{required:!0,className:m.formField,children:[(0,r.jsx)(o.A.Label,{children:"Name"}),(0,r.jsx)(l.A,{name:"mcp-server-name",type:"text",value:g,onChange:e=>{y(e.target.value),C(null)},placeholder:"Enter a name for this MCP",className:E?m.inputError:void 0,autoComplete:"on",block:!0}),E&&(0,r.jsx)(o.A.Validation,{variant:"error",children:E})]}),(0,r.jsxs)(o.A,{required:!0,className:m.formField,children:[(0,r.jsx)(o.A.Label,{children:"MCP server URL"}),(0,r.jsx)(l.A,{name:"mcp-url",type:"url",value:x,onChange:e=>{_(e.target.value),S(null)},placeholder:"https://mcp.example.com/sse",className:v?m.inputError:void 0,autoComplete:"on",block:!0}),v&&(0,r.jsx)(o.A.Validation,{variant:"error",children:v})]}),(0,r.jsx)("button",{type:"submit",className:m.hiddenSubmitButton,tabIndex:-1,children:"Submit"}),(0,r.jsxs)("p",{children:["MCP data will be processed by models coming from third-party providers. Always review the permissions required by the MCP and only connect to MCPs you know and trust.",f&&(0,r.jsxs)(r.Fragment,{children:[" ","You can revoke access for the MCP at any time in"," ",(0,r.jsx)("a",{href:"/settings",className:m.underline,children:"your settings"}),"."]})]})]})}):null};try{h.displayName||(h.displayName="MCP_SPEC_LINK")}catch{}try{p.displayName||(p.displayName="McpServerDialog")}catch{}},4663:(e,t,n)=>{n.d(t,{V:()=>t8});var r,a,i=n(74848),s=n(21728),o=n(53419),l=n(13017),c=n(5945),d=n(46309),u=n(12004),m=n(52446),h=n(96540),p=n(82595),f=n(84646),g=n(2635),y=n(79802),x=n(17485),_=n(25641),v=n(34164);let S={toggleButton:"ToggleButton-module__toggleButton--JlWKX",selected:"ToggleButton-module__selected--fx0LM",icon:"ToggleButton-module__icon--mJLXC",textContent:"ToggleButton-module__textContent--xX6cl"},E=(0,h.forwardRef)((e,t)=>{let n,r,a,o,l,c,d,u,m,h,p,f,g,y,x,_,E,C=(0,s.c)(35);C[0]!==e?({icon:r,isSelected:c,onClick:a,hasMenu:d,isMenuOpen:u,selectedItemLabel:l,children:n,...o}=e,C[0]=e,C[1]=n,C[2]=r,C[3]=a,C[4]=o,C[5]=l,C[6]=c,C[7]=d,C[8]=u):(n=C[1],r=C[2],a=C[3],o=C[4],l=C[5],c=C[6],d=C[7],u=C[8]);let b=void 0!==c&&c,w=void 0!==d&&d,R=void 0!==u&&u;C[9]!==o?(m=Object.keys(o).reduce((e,t)=>(t.startsWith("aria-")&&(e[t]=o[t]),e),{}),C[9]=o,C[10]=m):m=C[10];let N=m;C[11]!==w||C[12]!==R||C[13]!==b?(h=()=>w?{"aria-haspopup":"menu","aria-expanded":R}:{"aria-pressed":b},C[11]=w,C[12]=R,C[13]=b,C[14]=h):h=C[14];let j=h;C[15]!==j?(p=j(),C[15]=j,C[16]=p):p=C[16],C[17]!==N||C[18]!==p?(f={...N,...p},C[17]=N,C[18]=p,C[19]=f):f=C[19];let I=f,A=w&&l?l:n;C[20]!==a?(g=e=>{a&&a(e)},C[20]=a,C[21]=g):g=C[21];let T=g,k=b&&S.selected;return C[22]!==k?(y=(0,v.$)(S.toggleButton,k),C[22]=k,C[23]=y):y=C[23],C[24]!==r?(x=!!r&&(0,i.jsx)("span",{className:S.icon,children:r}),C[24]=r,C[25]=x):x=C[25],C[26]!==A?(_=(0,i.jsx)("span",{className:S.textContent,children:A}),C[26]=A,C[27]=_):_=C[27],C[28]!==I||C[29]!==T||C[30]!==t||C[31]!==y||C[32]!==x||C[33]!==_?(E=(0,i.jsxs)("button",{ref:t,type:"button",className:y,onClick:T,...I,children:[x,_]}),C[28]=I,C[29]=T,C[30]=t,C[31]=y,C[32]=x,C[33]=_,C[34]=E):E=C[34],E});E.displayName="ToggleButton";var C=n(40552);function b(){let[e,t]=(0,h.useState)(!1),n=(0,l.Zp)(),{handleSpaceSelect:r,clearSpaceSelection:a,activeCopilotSpaceId:s,readOnly:v}=(0,x.C)(),S=(0,h.useRef)(null),b=(0,h.useRef)(null),[w,R]=(0,h.useState)(!1),N=()=>{R(!0),(0,o.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_CREATE_SPACE",mode:"immersive"})},{data:j=[],isLoading:I}=function(){let{threads:e}=(0,g.Pk)(),t=Array.from(e.values()).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).map(e=>(0,y.O)(e)).filter(e=>null!==e),n=(0,f.jS)(!0),{data:r}=n;if(void 0===r)return n;let a=new Set,i=[...t.map(e=>r.find(t=>e.id===t.id&&e.owner===t.owner)).filter(e=>{if(void 0===e)return!1;let t=`${e.owner}:${e.id}`;return!a.has(t)&&(a.add(t),!0)}),...[...r].sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).filter(e=>{let t=`${e.owner}:${e.id}`;return!a.has(t)})].slice(0,5);return{...n,data:i}}(),{data:A=[],isLoading:T}=(0,f.jS)(!0),k=(0,f.BV)(),L=I||T;if((0,h.useEffect)(()=>{if(L&&e&&S.current)S.current.focus();else if(!L&&e&&b.current){let e=setTimeout(()=>{b.current?.focus()},0);return()=>clearTimeout(e)}},[L,e]),!k||v)return;let M=s?A.find(e=>e.id===s.id&&e.owner===s.owner):void 0,D=M?M.name:"Space",P="260px";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c.W,{open:e,onOpenChange:t,children:[(0,i.jsx)(c.W.Anchor,{children:(0,i.jsx)(E,{icon:(0,i.jsx)(p.I,{icon:"spaces"}),isSelected:!!M,onClick:()=>{},hasMenu:!0,"aria-label":"Select a copilot space for this conversation",isMenuOpen:e,selectedItemLabel:D,children:D})}),(0,i.jsx)(c.W.Overlay,{style:j.length>0?{width:P}:{},children:L?(0,i.jsxs)(d.B,{direction:"horizontal",align:"center",justify:"center",padding:"normal",style:{width:P},children:[(0,i.jsx)("div",{ref:S,role:"status",className:"sr-only",tabIndex:-1,children:"Loading spaces"}),(0,i.jsx)(u.A,{})]}):(0,i.jsx)(m.l,{selectionVariant:"single",role:"menu","aria-label":"Select a space",children:j.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.l.Group,{children:[(0,i.jsx)(m.l.GroupHeading,{"aria-label":"Recent spaces",children:"Recent"}),j.map((e,n)=>{let l=!!s&&e.id===s.id&&e.owner===s.owner;return(0,i.jsx)(m.l.Item,{ref:0===n?b:void 0,role:"menuitemradio",onSelect:()=>{s&&e.id===s.id&&e.owner===s.owner?a():(r({id:e.id,owner:e.owner}),(0,o.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_SELECT_SPACE",space:`${e.owner}/${e.id}`})),t(!1)},selected:l,"aria-checked":l,children:(0,i.jsx)("span",{children:e.name})},`${e.owner}, ${e.id}`)})]}),(0,i.jsx)(m.l.Divider,{}),(0,i.jsx)(m.l.Item,{onSelect:()=>{n(_.VR),(0,o.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_VIEW_ALL_SPACES",mode:"immersive"})},children:" View all spaces"}),(0,i.jsx)(m.l.Divider,{}),(0,i.jsx)(m.l.Item,{onSelect:N,children:"Create a space"})]}):(0,i.jsx)(m.l.Item,{ref:b,onSelect:N,children:"Create your first space"})})})]}),w?(0,i.jsx)(C.D,{closeDialog:()=>{(0,o.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),R(!1)}}):null]})}try{b.displayName||(b.displayName="SpacesSelect")}catch{}var w=n(29731),R=n(83494),N=n(8625),j=n(38621),I=n(65556),A=n(53037),T=n(87330),k=n(94747),L=n(96379),M=n(7277),D=n(47970),P=n(33592),O=n(79216),F=n(97949);let U=/^(?:https:\/\/)?(?:www\.)?(figma\.com\/.+)$/,B=class FigmaNotAuthorizedError extends Error{constructor(){super(),this.name="FigmaNotAuthorizedError"}};async function q(e){let t=await (0,L.lS)(`/copilot/immersive/figma-link?item_url=${e}`);if(!t.ok){if(403===t.status)throw new B;throw Error(`Failed to fetch Figma reference data (${t.status}: ${t.statusText})`)}return await t.json()}async function $(e){let{itemUrl:t}=e,n=await (0,L.lS)(`/copilot/chat-links?item_url=${t}`);if(!n.ok)throw Error(`Failed to fetch reference data (${n.status}: ${n.statusText})`);return await n.json()}var G=n(88431),W=n(79064),V=n(72303);let Q=async(e,t,n)=>{if((e[0]??"")!=="/")return!1;e=e.substring(1);let r=(({manager:e})=>[{label:"Delete conversation",command:"delete",icon:j.TrashIcon,requiresParams:!1,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let t=(0,V.W)(n);if(!t)throw Error("Thread not found");await e.deleteThread(t),(0,o.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_DELETE_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}},{label:"Rename conversation",command:"rename",icon:j.PencilIcon,requiresParams:!0,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let r=(0,V.W)(n);if(!r)throw Error("Thread not found");await e.renameThread(r,t),(0,o.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_RENAME",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}},{label:"Start a new conversation",command:"new",icon:j.PlusIcon,requiresParams:!1,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{await e.selectThread(null),(0,o.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_NEW_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}}])({manager:n}).filter(t=>{let n=(e.split(" ",1)[0]??"").toLowerCase().trim();return t.command.toLowerCase().includes(n)});if(1!==r.length)return!1;let a=r[0],i=e.substring(a.command.length).trim();return await a.action(i,t),!0};var H=n(46062);function z(e,t,n){if("immersive"===e&&/^\/copilot(\/agents)?\/?$/.test(t)){let e=n.get("prompt");if(e)return e}}var K=n(26239),X=n(35247),J=n(60905),Y=n(76166),Z=n(72439),ee=n(23657),et=n(14521),en=n(99054),er=n(77430);function ea(e){let t,n,r,a,l,d,u=(0,s.c)(24),{onSelectPanel:h,onSelectAgent:p}=e,{availableAgents:f,showLimit:g,disabled:y,loading:x}=(0,en.JE)(),_=f&&f.length>0;if(x){let e;return u[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)(m.l.Item,{disabled:!0,children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(j.MentionIcon,{})}),"Extension"]}),u[0]=e):e=u[0],e}if(y){let e,t,n;return u[1]!==h?(e=()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_SUPPORTED",mode:"immersive"}),h("agents-not-supported")},u[1]=h,u[2]=e):e=u[2],u[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(j.MentionIcon,{})}),u[3]=t):t=u[3],u[4]!==e?(n=(0,i.jsxs)(m.l.Item,{onSelect:e,children:[t,"Extension\u2026"]}),u[4]=e,u[5]=n):n=u[5],n}if(!_){let e,t,n;return u[6]!==h?(e=()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_AVAILABLE",mode:"immersive"}),h("no-agents-available")},u[6]=h,u[7]=e):e=u[7],u[8]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(j.MentionIcon,{})}),u[8]=t):t=u[8],u[9]!==e?(n=(0,i.jsxs)(m.l.Item,{onSelect:e,children:[t,"Extension\u2026"]}),u[9]=e,u[10]=n):n=u[10],n}if(u[11]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(c.W.Anchor,{children:(0,i.jsxs)(m.l.Item,{onSelect:es,children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(j.MentionIcon,{})}),"Extension"]})}),u[11]=t):t=u[11],u[12]!==f||u[13]!==p||u[14]!==g){let e;u[16]!==p||u[17]!==g?(e=e=>(0,i.jsxs)(m.l.Item,{onSelect:()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_SELECTED",mode:"immersive"}),p(e)},children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(er.r,{src:e.avatarUrl})}),e.name,!g&&(0,i.jsxs)(m.l.Description,{variant:"inline",truncate:!0,children:[en.Z3,e.slug]}),g&&(0,i.jsx)(m.l.Description,{variant:"block",children:"Start a new conversation to use other extensions."})]},e.slug),u[16]=p,u[17]=g,u[18]=e):e=u[18],n=f.map(e),u[12]=f,u[13]=p,u[14]=g,u[15]=n}else n=u[15];return u[19]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsx)(m.l.Divider,{}),u[19]=r):r=u[19],u[20]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(j.TelescopeIcon,{})}),u[20]=a):a=u[20],u[21]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsxs)(m.l.LinkItem,{href:en.bn,onClick:ei,children:[a,"Marketplace",(0,i.jsx)(m.l.TrailingVisual,{children:(0,i.jsx)(j.LinkExternalIcon,{})})]}),u[21]=l):l=u[21],u[22]!==n?(d=(0,i.jsxs)(c.W,{children:[t,(0,i.jsx)(c.W.Overlay,{width:"small",children:(0,i.jsxs)(m.l,{children:[n,r,l]})})]}),u[22]=n,u[23]=d):d=u[23],d}function ei(){(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_MARKETPLACE",mode:"immersive"})}function es(){(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION",mode:"immersive"})}try{ea.displayName||(ea.displayName="AgentMenu")}catch{}var eo=n(55847),el=n(81246),ec=n(96665);let ed={AgentsDialogsMainContainer:"AgentsDialogs-module__AgentsDialogsMainContainer--ymBth",dialogContentWrapper:"AgentsDialogs-module__dialogContentWrapper--v7abd",dialogTitle:"AgentsDialogs-module__dialogTitle--tEo3x",dialogDescription:"AgentsDialogs-module__dialogDescription--LPgKm",documentationLinkContainer:"AgentsDialogs-module__documentationLinkContainer--ydpZ9",AgentsDialogsAlternateContainer:"AgentsDialogs-module__AgentsDialogsAlternateContainer--iIZFy",alertIconContainer:"AgentsDialogs-module__alertIconContainer--jNjdz"};function eu(e){let t,n,r=(0,s.c)(4),{onClose:a,returnFocusRef:o}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},r[0]=t):t=r[0],r[1]!==a||r[2]!==o?(n=(0,i.jsx)(ec.l,{width:"large",title:"Extensions",position:t,onClose:a,returnFocusRef:o,renderBody:em}),r[1]=a,r[2]=o,r[3]=n):n=r[3],n}function em(){return(0,i.jsx)("div",{className:ed.AgentsDialogsMainContainer,children:(0,i.jsxs)("div",{className:ed.dialogContentWrapper,children:[(0,i.jsx)(j.TelescopeIcon,{size:24}),(0,i.jsx)("h3",{className:ed.dialogTitle,children:"Chat with your favorite tools and services"}),(0,i.jsx)("p",{className:ed.dialogDescription,children:"Browse the marketplace to find extensions for the tools and services you rely on"}),(0,i.jsx)(eo.Q,{as:"a",href:en.bn,children:"Browse marketplace"}),(0,i.jsx)("div",{className:ed.documentationLinkContainer,children:(0,i.jsx)(el.A,{href:"https://gh.io/copilot-extensions-docs",children:"Documentation"})})]})})}function eh(e){let t,n,r,a=(0,s.c)(9),{onClose:o,returnFocusRef:l}=e,c=(0,P.b)(),d=(0,g.Pk)(),u=(0,f.BV)(),m=(0,H.GF)(d.availableModels);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},a[0]=t):t=a[0],a[1]!==u||a[2]!==m||a[3]!==c?(n=()=>(0,i.jsx)("div",{className:ed.AgentsDialogsAlternateContainer,children:(0,i.jsxs)("div",{className:ed.dialogContentWrapper,children:[(0,i.jsx)("div",{className:ed.alertIconContainer,children:(0,i.jsx)(j.AlertIcon,{size:24})}),(0,i.jsxs)("h3",{className:ed.dialogTitle,children:[u?"Copilots and extensions":"Extensions"," aren't supported by this model"]}),(0,i.jsxs)("p",{className:ed.dialogDescription,children:["Switch back to the ",m.displayName," model or start a new conversation"]}),(0,i.jsx)(eo.Q,{onClick:()=>{c.selectThread(null),c.selectModel(m)},children:"New conversation"})]})}),a[1]=u,a[2]=m,a[3]=c,a[4]=n):n=a[4],a[5]!==o||a[6]!==l||a[7]!==n?(r=(0,i.jsx)(ec.l,{width:"large",title:"Extensions",position:t,onClose:o,returnFocusRef:l,renderBody:n}),a[5]=o,a[6]=l,a[7]=n,a[8]=r):r=a[8],r}try{eu.displayName||(eu.displayName="NoAgentsAvailableDialog")}catch{}try{eh.displayName||(eh.displayName="AgentsNotSupportedDialog")}catch{}var ep=n(19566),ef=n(97564);function eg(e){let t,n,r,a,o=(0,s.c)(14),{isOpen:l,onClose:c,initialRepo:d,onRepoSelect:u}=e,m=(0,P.b)(),{findFileWorkerPath:p}=(0,g.Pk)(),f=(0,h.useRef)(null);o[0]!==m||o[1]!==c?(t=async e=>{let t=await (0,ef.V)(e.repositoryId),n=(0,_.qS)(t);m.addReference(n,"references-menu"),c()},o[0]=m,o[1]=c,o[2]=t):t=o[2];let y=t;o[3]!==m||o[4]!==c?(n=async e=>{if(0===e.length)return void c();for(let t of e){let e=await (0,ef.V)(t.repositoryId),n=(0,_.Od)(t.filePath,e);m.addReference(n,"references-menu")}c()},o[3]=m,o[4]=c,o[5]=n):n=o[5];let x=n;return l?(o[6]===Symbol.for("react.memo_cache_sentinel")?(r=[],o[6]=r):r=o[6],o[7]!==p||o[8]!==x||o[9]!==y||o[10]!==d||o[11]!==c||o[12]!==u?(a=(0,i.jsx)(ep.Q,{formData:r,onCancel:c,onSaveFiles:x,onSaveRepository:y,findFileWorkerPath:p,attachmentButtonRef:f,initialRepo:d,onRepoSelect:u}),o[7]=p,o[8]=x,o[9]=y,o[10]=d,o[11]=c,o[12]=u,o[13]=a):a=o[13],a):null}try{eg.displayName||(eg.displayName="CopilotFilePicker")}catch{}var ey=n(82075),ex=n(94016),e_=n(63557),ev=n(75177),eS=n(9745),eE=n(1002),eC=n(30729),eb=n(40961);let ew={disabledForPreviewModelsPanel:"KnowledgeSelectPanel-module__disabledForPreviewModelsPanel--5fRzV",knowledgeBaseIcon:"KnowledgeSelectPanel-module__knowledgeBaseIcon--peP3C",KnowledgeSelectPanelContainer:"KnowledgeSelectPanel-module__KnowledgeSelectPanelContainer--_RbkD",panelHeader:"KnowledgeSelectPanel-module__panelHeader--kWY60",headerContent:"KnowledgeSelectPanel-module__headerContent--AQ0gC",panelTitle:"KnowledgeSelectPanel-module__panelTitle--oQLU4",emptyStateContainer:"KnowledgeSelectPanel-module__emptyStateContainer--Rk1JI",emptyStateContent:"KnowledgeSelectPanel-module__emptyStateContent--BiaDj",emptyStateMessage:"KnowledgeSelectPanel-module__emptyStateMessage--S8iOa",emptyStateDescription:"KnowledgeSelectPanel-module__emptyStateDescription--d4gqH",emptyStateInstructions:"KnowledgeSelectPanel-module__emptyStateInstructions--pOJKv",actionButtonsContainer:"KnowledgeSelectPanel-module__actionButtonsContainer--NjnfZ",createButton:"KnowledgeSelectPanel-module__createButton--AfP6G",organizationsSection:"KnowledgeSelectPanel-module__organizationsSection--YaCxl",sectionTitle:"KnowledgeSelectPanel-module__sectionTitle--hm4Tw",organizationsList:"KnowledgeSelectPanel-module__organizationsList--UvNcy",organizationLink:"KnowledgeSelectPanel-module__organizationLink--UkWa7",organizationAvatar:"KnowledgeSelectPanel-module__organizationAvatar--igPHI",organizationName:"KnowledgeSelectPanel-module__organizationName--V_3Jw",ssoNotice:"KnowledgeSelectPanel-module__ssoNotice--EKDTO"},eR=(0,h.forwardRef)(function(e,t){let n,r,a,o,l,c=(0,s.c)(12);c[0]!==e?({open:r,setOpen:a,...n}=e,c[0]=e,c[1]=n,c[2]=r,c[3]=a):(n=c[1],r=c[2],a=c[3]);let d=!!r||void 0;return c[4]!==r||c[5]!==a?(o=()=>a(!r),c[4]=r,c[5]=a,c[6]=o):o=c[6],c[7]!==n||c[8]!==t||c[9]!==d||c[10]!==o?(l=(0,i.jsx)(T.K,{ref:t,"aria-expanded":d,"aria-haspopup":!0,"aria-label":"Attach knowledge base","aria-labelledby":void 0,icon:j.BookIcon,onClick:o,variant:"invisible",className:ew.knowledgeBaseIcon,...n}),c[7]=n,c[8]=t,c[9]=d,c[10]=o,c[11]=l):l=c[11],l});function eN({disabledForPreviewModelsProps:e,emptyKnowledgeBaseProps:t,open:n,onOpenChange:r,anchorRef:a}){let s=(0,g.Pk)(),o=(0,P.b)(),l=(0,ey.A)("localStorage"),{knowledgeBases:c}=s,[d,u]=(0,h.useState)([]),[m,p]=(0,h.useState)(!0),[f,y]=(0,h.useState)(""),x=(0,h.useRef)(null),v=l.getItem("lastUsedKnowledgeBaseId")||"",S=l.getItem("lastUsedKnowledgeBaseOrg")||"",{currentReferences:E}=s;(0,h.useEffect)(()=>{n||y("")},[n]);let C=(0,h.useMemo)(()=>""===f?c:c.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())),[f,c]),b=(0,h.useMemo)(()=>C.reduce((e,t)=>{let n=e.find(e=>e.org===t.ownerLogin);return n?n.docsets.push(t):e.push({org:t.ownerLogin,docsets:[t]}),e},[]),[C]),[R,N]=(0,h.useState)(!1),j=m||"pending"===s.knowledgeBasesLoading.state,I=R||"error"===s.knowledgeBasesLoading.state,A=(0,h.useRef)(!1);(0,h.useEffect)(()=>{let e=async()=>{p(!0),await o.fetchKnowledgeBases();let e=await o.service.listAdministratedCopilotEnterpriseOrganizations();e.ok?u(e.payload||[]):N(!0),p(!1)};n&&!A.current&&(A.current=!0,e())},[n,o]);let T=eL();if(s.model?.hasLimitedCapabilities)return(0,i.jsx)(eP,{open:n,setOpen:r,...e});if(!j&&0===c.length)return(0,i.jsx)(ej,{administratedCopilotEnterpriseOrganizations:d,persistentPanelStyles:{position:["fixed","fixed","absolute"],bottom:["60px","60px","0 !important"],"@media screen and (max-height: 480px)":{bottom:"0 !important"},top:"initial !important",left:["18px","18px","calc(50% - 360px) !important"],maxHeight:"100%"},open:n,setOpen:r,mode:s.mode,...t});let k=C.sort((e,t)=>e.id===v?-1:+(t.id===v)).map(e=>({id:e.id,key:e.id,groupId:e.ownerLogin,text:e.name,description:e.description,disabled:!e.canChat,descriptionVariant:"block"})),L=[...b].sort((e,t)=>e.org===S?-1:+(t.org===S)).map(e=>({id:e.org,key:e.org,text:e.org,groupId:e.org,header:{title:e.org}})),M=c.filter(e=>E.some(t=>(0,_.P)(t)&&t.id===e.id));return(0,i.jsx)("div",{ref:x,...(0,w.G)("knowledge-select-panel"),children:(0,i.jsx)(ex.X,{title:"Select knowledge bases",subtitle:"Knowledge bases consolidate content from multiple repositories for an improved chat experience.",onCancel:()=>{(0,eb.flushSync)(()=>r(!1)),a.current?.focus()},open:n,renderAnchor:null,anchorRef:a,onOpenChange:r,loading:j,items:k,onFilterChange:y,groupMetadata:L,notice:null!==T?{text:T,variant:"info"}:void 0,message:I?{variant:"error",title:"Failed to load knowledge bases",body:"Try again later"}:0===b.length?{variant:"empty",title:`No knowledge bases found for \`${f}\``,body:"Try a different search term"}:void 0,...{selected:M,onSelectedChange:e=>(e=>{var t=e.map(e=>c.find(t=>t.id===e.id)).filter(e=>void 0!==e);let n=t.filter(e=>(0,_.P)(e)&&!E.some(t=>(0,_.P)(t)&&t.id===e.id));for(let e of E.filter(e=>(0,_.P)(e)&&!t.some(t=>t.id===e.id)))o.removeReference(e);for(let e of n)o.addReference((0,_.UU)(e),"docsetMenu")})(e)},variant:"modal",overlayProps:{maxHeight:"xlarge"},width:"large"})})}function ej(e){let t,n,r,a,o,l,c,d,u,m,h,p,f,g,y,x,_,v,S,E,C,b,R,N,I=(0,s.c)(53),{administratedCopilotEnterpriseOrganizations:A,anchorRef:k,open:L,setOpen:M}=e,D=eL();I[0]!==k||I[1]!==L||I[2]!==M?(t=k?{anchorRef:k,renderAnchor:null}:{anchorRef:void 0,renderAnchor:e=>{let{...t}=e;return(0,i.jsx)(eR,{open:L,setOpen:M,...t})}},I[0]=k,I[1]=L,I[2]=M,I[3]=t):t=I[3];let P=t,O=A?.length===0;I[4]!==O?(n=O?{flexGrow:1,maxHeight:"100%",overflowY:"auto"}:{},I[4]=O,I[5]=n):n=I[5];let F=n;I[6]!==O?(r=O?{maxHeight:"100%"}:{},I[6]=O,I[7]=r):r=I[7];let U=r;I[8]!==O?(a=O?{height:"100%"}:{},I[8]=O,I[9]=a):a=I[9];let B=a;return I[10]!==M?(o=()=>M(!0),l=()=>M(!1),I[10]=M,I[11]=o,I[12]=l):(o=I[11],l=I[12]),I[13]===Symbol.for("react.memo_cache_sentinel")?(c={anchorSide:"outside-bottom",sx:{width:"min(100%, 350px)"}},I[13]=c):c=I[13],I[14]!==B?(d={...B},I[14]=B,I[15]=d):d=I[15],I[16]===Symbol.for("react.memo_cache_sentinel")?(u=(0,w.G)("empty-knowledge-base-picker"),I[16]=u):u=I[16],I[17]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)(e_.A,{id:"knowledge-base-dialog-title",as:"h4",className:ew.panelTitle,children:"Attach a knowledge base"}),I[17]=m):m=I[17],I[18]!==M?(h=(0,i.jsx)("div",{className:ew.panelHeader,children:(0,i.jsxs)("div",{className:ew.headerContent,children:[m,(0,i.jsx)(T.K,{unsafeDisableTooltip:!0,"aria-label":"Close",icon:j.XIcon,variant:"invisible",onClick:()=>M(!1)})]})}),I[18]=M,I[19]=h):h=I[19],I[20]!==F?(p={...F},I[20]=F,I[21]=p):p=I[21],I[22]===Symbol.for("react.memo_cache_sentinel")?(f=(0,i.jsx)(eC.A,{icon:j.BookIcon,size:"medium",className:ew.knowledgeBaseIcon}),I[22]=f):f=I[22],I[23]!==U?(g={...U},I[23]=U,I[24]=g):g=I[24],I[25]===Symbol.for("react.memo_cache_sentinel")?(y=(0,i.jsx)("span",{className:ew.emptyStateMessage,children:"You don't have any knowledge bases"}),I[25]=y):y=I[25],I[26]===Symbol.for("react.memo_cache_sentinel")?(x=(0,i.jsx)("p",{children:"Knowledge bases consolidate content from multiple repositories for an improved chat experience."}),I[26]=x):x=I[26],I[27]!==O?(_=O&&(0,i.jsx)("p",{className:ew.emptyStateInstructions,...(0,w.G)("ask-admin-for-knowledge-base"),children:"Speak with an organization owner about creating a knowledge base for your organization."}),I[27]=O,I[28]=_):_=I[28],I[29]!==_?(v=(0,i.jsxs)("div",{className:ew.emptyStateDescription,children:[x,_]}),I[29]=_,I[30]=v):v=I[30],I[31]!==A?(S=A.length>0&&(0,i.jsx)(eI,{administratedCopilotEnterpriseOrganizations:A}),I[31]=A,I[32]=S):S=I[32],I[33]!==g||I[34]!==v||I[35]!==S?(E=(0,i.jsxs)(ev.A,{sx:g,className:ew.emptyStateContent,children:[y,v,S]}),I[33]=g,I[34]=v,I[35]=S,I[36]=E):E=I[36],I[37]!==p||I[38]!==E?(C=(0,i.jsxs)(ev.A,{sx:p,className:ew.emptyStateContainer,children:[f,E]}),I[37]=p,I[38]=E,I[39]=C):C=I[39],I[40]!==D?(b=D&&(0,i.jsx)("div",{className:ew.actionButtonsContainer,children:(0,i.jsx)(ek,{message:D})}),I[40]=D,I[41]=b):b=I[41],I[42]!==h||I[43]!==C||I[44]!==b||I[45]!==d?(R=(0,i.jsxs)(ev.A,{role:"dialog","aria-labelledby":"knowledge-base-dialog-title",sx:d,className:ew.KnowledgeSelectPanelContainer,...u,children:[h,C,b]}),I[42]=h,I[43]=C,I[44]=b,I[45]=d,I[46]=R):R=I[46],I[47]!==P||I[48]!==L||I[49]!==R||I[50]!==o||I[51]!==l?(N=(0,i.jsx)(eS.T,{open:L,onOpen:o,onClose:l,overlayProps:c,...P,children:R}),I[47]=P,I[48]=L,I[49]=R,I[50]=o,I[51]=l,I[52]=N):N=I[52],N}function eI(e){let t=(0,s.c)(11),{administratedCopilotEnterpriseOrganizations:n}=e;if(1===n.length){let e,r,a;return t[0]!==n[0]?(e=eD(n[0]),t[0]=n[0],t[1]=e):e=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,w.G)("create-knowledge-base-button"),t[2]=r):r=t[2],t[3]!==e?(a=(0,i.jsx)(eo.Q,{as:"a",href:e,className:ew.createButton,...r,children:"Create a knowledge base"}),t[3]=e,t[4]=a):a=t[4],a}{let e,r,a,s;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,w.G)("create-knowledge-base-dropdown"),r=(0,i.jsx)(e_.A,{as:"h3",className:ew.sectionTitle,children:"Create a knowledge base for an organization"}),t[5]=e,t[6]=r):(e=t[5],r=t[6]),t[7]!==n?(a=n.map(eA),t[7]=n,t[8]=a):a=t[8],t[9]!==a?(s=(0,i.jsxs)("div",{className:ew.organizationsSection,...e,children:[r,(0,i.jsx)(m.l,{className:ew.organizationsList,children:a})]}),t[9]=a,t[10]=s):s=t[10],s}}function eA(e){return(0,i.jsx)(eT,{org:e},e.id)}function eT(e){let t,n,r,a,o=(0,s.c)(11),{org:l}=e;return o[0]!==l?(t=eD(l),o[0]=l,o[1]=t):t=o[1],o[2]!==l.avatarUrl||o[3]!==l.login?(n=(0,i.jsx)(er.r,{square:!0,src:l.avatarUrl,alt:l.login,"aria-hidden":"true",className:ew.organizationAvatar}),o[2]=l.avatarUrl,o[3]=l.login,o[4]=n):n=o[4],o[5]!==l.login?(r=(0,i.jsx)(eE.A,{inline:!0,title:l.login,className:ew.organizationName,children:l.login}),o[5]=l.login,o[6]=r):r=o[6],o[7]!==t||o[8]!==n||o[9]!==r?(a=(0,i.jsx)(m.l.Item,{children:(0,i.jsxs)(el.A,{href:t,className:ew.organizationLink,children:[n,r]})}),o[7]=t,o[8]=n,o[9]=r,o[10]=a):a=o[10],a}function ek(e){let t,n=(0,s.c)(2),{message:r}=e;return r?(n[0]!==r?(t=(0,i.jsx)("div",{"data-testid":"knowledge-select-panel-sso",className:ew.ssoNotice,children:r}),n[0]=r,n[1]=t):t=n[1],t):null}function eL(){let e=(0,g.Pk)(),t=e.ssoOrganizations.map(eM);for(let n of e.knowledgeBases)for(let e of n.protectedOrganizations)t.includes(e)||t.push(e);if(!t||0===t.length)return null;{if(1===t.length)return`Single sign-on to see content from ${t[0]}.`;if(2===t.length)return`Single sign-on to see content from ${t[0]} and ${t[1]}.`;let e=t.length-2;return`Single sign-on to see content from ${t[0]}, ${t[1]}, and ${e} organization${e>1?"s":""}`}}function eM(e){return e.login}function eD(e){return`/organizations/${e.login}/settings/copilot/chat_settings/new`}function eP(e){let t,n,r,a,o,l=(0,s.c)(13),{anchorRef:c,open:d,setOpen:u}=e;l[0]!==c||l[1]!==d||l[2]!==u?(t=c?{anchorRef:c,renderAnchor:null}:{anchorRef:void 0,renderAnchor:e=>{let{...t}=e;return(0,i.jsx)(eR,{open:d,setOpen:u,...t})}},l[0]=c,l[1]=d,l[2]=u,l[3]=t):t=l[3];let m=t;return l[4]!==u?(n=()=>u(!0),r=()=>u(!1),l[4]=u,l[5]=n,l[6]=r):(n=l[5],r=l[6]),l[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsxs)("div",{className:(0,v.$)("m-3 d-flex flex-column flex-items-center text-center",ew.disabledForPreviewModelsPanel),children:[(0,i.jsx)(j.AlertIcon,{className:"fgColor-attention mb-3"}),(0,i.jsx)("h3",{className:"h5 mb-2",children:"Knowledge bases aren't supported by this model"}),(0,i.jsx)("span",{className:"text-small fgColor-muted",children:"Switch back to the GPT-4o model or start a new conversation"})]}),l[7]=a):a=l[7],l[8]!==m||l[9]!==d||l[10]!==n||l[11]!==r?(o=(0,i.jsx)(eS.T,{open:d,onOpen:n,onClose:r,...m,children:a}),l[8]=m,l[9]=d,l[10]=n,l[11]=r,l[12]=o):o=l[12],o}try{eR.displayName||(eR.displayName="KBIconButton")}catch{}try{(r=KBIconButtonInner).displayName||(r.displayName="KBIconButtonInner")}catch{}try{eN.displayName||(eN.displayName="KnowledgeSelectPanel")}catch{}try{ej.displayName||(ej.displayName="EmptyKnowledgeBase")}catch{}try{eI.displayName||(eI.displayName="CreateKnowledgeBaseButton")}catch{}try{eT.displayName||(eT.displayName="CreateKnowledgeBaseActionRow")}catch{}try{ek.displayName||(ek.displayName="SSOFooter")}catch{}try{eP.displayName||(eP.displayName="DisabledForPreviewModels")}catch{}var eO=n(35673),eF=n(70170),eU=n(79274),eB=n(97286);async function eq(e,t,n,r){return new Promise((a,i)=>{if(!window.Worker)return void setTimeout(()=>a(e.filter(e=>e.includes(t))));let s=new Worker(n);s.addEventListener("message",e=>a(e.data.list)),s.addEventListener("error",e=>i(Error(`Worker error: ${e.message}`))),r.addEventListener("abort",()=>{s.terminate(),i(Error("Worker aborted"))}),s.postMessage({baseList:e,query:t})})}function e$(e,t){let n,r,a,i=(0,s.c)(9),{findFileWorkerPath:o}=(0,g.Pk)();i[0]!==e||i[1]!==t||i[2]!==o?(n=["copilot-worker-filter",o,e,t],r=async n=>{let{signal:r}=n;return e?0===t.length?e:eq(e,t,o,r):[]},i[0]=e,i[1]=t,i[2]=o,i[3]=n,i[4]=r):(n=i[3],r=i[4]);let l=null!==e;return i[5]!==n||i[6]!==r||i[7]!==l?(a={queryKey:n,queryFn:r,enabled:l,staleTime:1/0,gcTime:1e4,networkMode:"always",retry:!1,placeholderData:eG},i[5]=n,i[6]=r,i[7]=l,i[8]=a):a=i[8],(0,eB.I)(a)}function eG(e){return e}function eW(e,t){let n,r,a,i=(0,s.c)(11),o=void 0===t||t,l=(0,P.b)(),c=null!==e;return i[0]!==o||i[1]!==e?(n=["copilot-repository-files",e,o],i[0]=o,i[1]=e,i[2]=n):n=i[2],i[3]!==o||i[4]!==l||i[5]!==e?(r=async()=>{if(!e)return{};let t=await l.service.listRepoFiles(e,o);if(!t.ok)throw Error("Failed to fetch files for repository");return t.payload},i[3]=o,i[4]=l,i[5]=e,i[6]=r):r=i[6],i[7]!==c||i[8]!==n||i[9]!==r?(a={enabled:c,queryKey:n,queryFn:r,staleTime:3e5},i[7]=c,i[8]=n,i[9]=r,i[10]=a):a=i[10],(0,eB.I)(a)}function eV(e,t){let n,r,a,i=(0,s.c)(11),o=(0,P.b)(),l=null!==e&&t.length>0;return i[0]!==e||i[1]!==t?(n=["copilot-repository-symbols",e,t],i[0]=e,i[1]=t,i[2]=n):n=i[2],i[3]!==o||i[4]!==e||i[5]!==t?(r=async()=>{if(!e)return[];let n=await o.service.querySymbols(e,t);if(!n.ok)throw Error("Failed to fetch symbols for repository");return n.payload.filter(eQ)},i[3]=o,i[4]=e,i[5]=t,i[6]=r):r=i[6],i[7]!==l||i[8]!==n||i[9]!==r?(a={enabled:l,queryKey:n,queryFn:r},i[7]=l,i[8]=n,i[9]=r,i[10]=a):a=i[10],(0,eB.I)(a)}function eQ(e){return!!e.symbol}var eH=n(26875),ez=n(70845);let eK={chooseRepoInstructionPanel:"ReferencesSelectPanel-module__chooseRepoInstructionPanel--zT6kZ",chooseRepoTitle:"ReferencesSelectPanel-module__chooseRepoTitle--T61jD",chooseRepoSubtitle:"ReferencesSelectPanel-module__chooseRepoSubtitle--sQVTX",selectPanelContainer:"ReferencesSelectPanel-module__selectPanelContainer--wSTmy",ActionList:"ReferencesSelectPanel-module__ActionList--SpdwU",referenceListItem:"ReferencesSelectPanel-module__referenceListItem--mq8Ni",referenceItemText:"ReferencesSelectPanel-module__referenceItemText--JlIMs"};var eX=n(87086);let eJ="Search",eY=e=>{let t,n,r,a,o,l,c,d,u,m,p,f=(0,s.c)(34);f[0]!==e?({open:r,onOpenChange:n,cancelReturnFocusRef:t,submitReturnFocusRef:o,...a}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=r,f[4]=a,f[5]=o):(t=f[1],n=f[2],r=f[3],a=f[4],o=f[5]);let y=(0,P.b)(),[x,_]=(0,h.useState)();f[6]===Symbol.for("react.memo_cache_sentinel")?(l=()=>_(void 0),f[6]=l):l=f[6],f[7]!==r?(c=[r],f[7]=r,f[8]=c):c=f[8],(0,h.useEffect)(l,c);let v=(0,g.pn)(e8);f[9]!==v?(d=new Set(v.filter(e9).map(te)),f[9]=v,f[10]=d):d=f[10];let S=d,[E,C]=(0,h.useState)(),b=(0,h.useRef)(!1);f[11]!==y.service?(u=async e=>{C(void 0),b.current=!0;let t=await y.service.fetchRepo(e);t.ok?_(t.payload):C("Error: failed to load repository details. Please try again."),b.current=!1},f[11]=y.service,f[12]=u):u=f[12];let w=u,R=a.supportedReferenceTypes??eZ;f[13]!==R?(m=(e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"Choose a repository to browse for files, folders, and symbols.":t&&n?"Choose a repository to browse for files and folders.":t&&r?"Choose a repository to browse for files and symbols.":n&&r?"Choose a repository to browse for folders and symbols.":t?"Choose a repository to browse for files.":n?"Choose a repository to browse for folders.":r?"Choose a repository to browse for symbols.":"Choose a repository to browse for references."})(R),f[13]=R,f[14]=m):m=f[14];let N=m;if(!x){let e,a,s;return f[15]!==n?(e=e=>{b.current||n(e)},f[15]=n,f[16]=e):e=f[16],f[17]===Symbol.for("react.memo_cache_sentinel")?(a=new Set,f[17]=a):a=f[17],f[18]!==t||f[19]!==N||f[20]!==w||f[21]!==r||f[22]!==S||f[23]!==E||f[24]!==o||f[25]!==e?(s=(0,i.jsx)(eX.X1,{selectionVariant:"instant",open:r,onOpenChange:e,selectedRepoIds:a,onSelectRepo:w,cancelReturnFocusRef:t,submitReturnFocusRef:o,description:N,featuredRepoIds:S,error:E}),f[18]=t,f[19]=N,f[20]=w,f[21]=r,f[22]=S,f[23]=E,f[24]=o,f[25]=e,f[26]=s):s=f[26],s}return f[27]!==t||f[28]!==n||f[29]!==r||f[30]!==a||f[31]!==x||f[32]!==o?(p=(0,i.jsx)(e0,{...a,open:r,onOpenChange:n,sourceRepository:x,cancelReturnFocusRef:t,submitReturnFocusRef:o}),f[27]=t,f[28]=n,f[29]=r,f[30]=a,f[31]=x,f[32]=o,f[33]=p):p=f[33],p},eZ=["files","folders","symbols"],e0=e=>{let t,n,r,a,o,l,c,d,u,p,f,y,x,v=(0,s.c)(40),{renderAnchor:S,anchorRef:E,open:C,onOpenChange:b,submitReturnFocusRef:w,cancelReturnFocusRef:R,sourceRepository:N,supportedReferenceTypes:j}=e,I=void 0===j?eZ:j,[A,T]=(0,h.useState)("");v[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,eF.s)(T,250),v[0]=t):t=v[0];let k=(0,h.useRef)(t);v[1]!==C?(n=()=>{C||T("")},r=[C],v[1]=C,v[2]=n,v[3]=r):(n=v[2],r=v[3]),(0,h.useEffect)(n,r);let{initialLoading:L,filterLoading:M,selected:D,unselected:O,toggleSelection:F}=function(e,t,n,r=eZ){let a=(0,g.Pk)(),i=(0,P.b)(),o=function(e,t,n,r){let a,i,o,l,c,d=(0,s.c)(16),u=void 0===r?eZ:r;d[0]!==u?(a=u.includes("folders"),d[0]=u,d[1]=a):a=d[1];let m=a,h=u.includes("symbols");d[2]!==u?(i=u.includes("files"),d[2]=u,d[3]=i):i=d[3];let p=i,f=n?t:null,g=eW(f,m),y=e$(g.data?.paths??null,e),x=e$(g.data?.directories??null,e),_=eV(h?f:null,e);d[4]!==_.data?(o=_.data?.map(e7)??null,d[4]=_.data,d[5]=o):o=d[5];let v=e$(o,e);if(d[6]!==x||d[7]!==y.data||d[8]!==v.data||d[9]!==p||d[10]!==m){let e=p?y.data?.slice(0,7).map(e6)??[]:[];l=[...e,...m?x.data?.slice(0,7).map(e4)??[]:[],...v.data?.slice(0,7).map(e5)??[]],d[6]=x,d[7]=y.data,d[8]=v.data,d[9]=p,d[10]=m,d[11]=l}else l=d[11];let S=l,E=null===y.data&&null===x.data&&null===_.data,C=g.isFetching||y.isFetching||x.isFetching||_.isFetching||v.isFetching;return d[12]!==C||d[13]!==E||d[14]!==S?(c={items:S,filterLoading:C,initialLoading:E},d[12]=C,d[13]=E,d[14]=S,d[15]=c):c=d[15],c}(t,n,e,r),l=r.includes("symbols"),c=eV(e&&l?n:null,t).data,[d,u,m]=(0,h.useMemo)(()=>{let e=new Set,t=new Set,r=new Set;for(let i of a.currentReferences)"file"===i.type&&i.repoOwner===n?.ownerLogin&&i.repoName===n?.name?e.add(i.path):"folder"===i.type&&i.repoOwner===n?.ownerLogin&&i.repoName===n?.name?t.add(i.path):"symbol"===i.type&&"suggestionSymbol"===i.kind&&i.suggestionDefinitions?.some(e=>e.repoOwner===n?.ownerLogin&&e.repoName===n?.name)&&r.add(i.name);return[e,t,r]},[a.currentReferences,n?.ownerLogin,n?.name]),{selected:p=[],unselected:f=[]}=(0,eH.O)(o.items,e=>{switch(e.type){case"file":return d.has(e.text)?"selected":"unselected";case"folder":return u.has(e.text)?"selected":"unselected";case"symbol":return m.has(e.text)?"selected":"unselected"}}),y=(0,h.useCallback)(e=>{let t;if(!n)return;switch(e.type){case"file":t=(0,_.Od)(e.text,n);break;case"folder":t=(0,_.OC)(e.text,n);break;case"symbol":{let r=c?.find(t=>(0,_.Sm)(t)===e.text);if(!r)return;t=(0,_.Qt)(r,n)}}let r=(0,_.Vb)(t),s=a.currentReferences.find(e=>r===(0,_.Vb)(e));s?i.removeReference(s):i.addReference(t,"references-menu")},[i,n,a.currentReferences,c]);return{...o,selected:p,unselected:f,toggleSelection:y}}(C,A,N,I),U=D.length+O.length,B=`${N.ownerLogin}/${N.name}`;return v[4]!==S?(a=S?.({}),v[4]=S,v[5]=a):a=v[5],v[6]!==I?(o=(e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"Select files, folders, and symbols":t&&n?"Select files and folders":t&&r?"Select files and symbols":n&&r?"Select folders and symbols":t?"Select files":n?"Select folders":r?"Select symbols":"Select references"})(I),v[6]=I,v[7]=o):o=v[7],v[8]!==B||v[9]!==I?(l=((e,t)=>{let n=t.includes("files"),r=t.includes("folders"),a=t.includes("symbols"),i="references";return n&&r&&a?i="files, folders, and symbols":n&&r?i="files and folders":n&&a?i="files and symbols":r&&a?i="folders and symbols":n?i="files":r?i="folders":a&&(i="symbols"),`Choose ${i} from ${e} to chat about. Use fewer references for more accurate responses.`})(B,I),v[8]=B,v[9]=I,v[10]=l):l=v[10],v[11]!==b||v[12]!==w.current?(c=()=>{(0,eb.flushSync)(()=>b(!1)),w.current?.focus()},v[11]=b,v[12]=w.current,v[13]=c):c=v[13],v[14]!==R.current||v[15]!==b?(d=()=>{(0,eb.flushSync)(()=>b(!1)),R.current?.focus()},v[14]=R.current,v[15]=b,v[16]=d):d=v[16],v[17]===Symbol.for("react.memo_cache_sentinel")?(u=e=>k.current(e.target.value),v[17]=u):u=v[17],v[18]!==M?(p=(0,i.jsx)(eU.X.Header,{children:(0,i.jsx)(eU.X.SearchInput,{loading:M,onChange:u,placeholder:eJ,"aria-label":eJ})}),v[18]=M,v[19]=p):p=v[19],v[20]!==M||v[21]!==L||v[22]!==D||v[23]!==I||v[24]!==F||v[25]!==U||v[26]!==O?(f=(0,i.jsx)(m.l,{className:eK.ActionList,children:L?(0,i.jsx)(eU.X.Loading,{children:(e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"Fetching files, folders, and symbols\u2026":t&&n?"Fetching files and folders\u2026":t&&r?"Fetching files and symbols\u2026":n&&r?"Fetching folders and symbols\u2026":t?"Fetching files\u2026":n?"Fetching folders\u2026":r?"Fetching symbols\u2026":"Fetching references\u2026"})(I)}):0!==U||M?(0,i.jsxs)(i.Fragment,{children:[D.map(e=>(0,i.jsx)(e3,{item:e,selected:!0,toggleSelection:F},e2(e))),D.length>0&&O.length>0&&(0,i.jsx)(m.l.Divider,{}),O.map(e=>(0,i.jsx)(e3,{item:e,selected:!1,toggleSelection:F},e2(e)))]}):(0,i.jsx)("div",{children:(0,i.jsx)(ez.O,{delay:500,children:(0,i.jsx)(eU.X.Message,{variant:"empty",title:(e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"No files, folders, or symbols found":t&&n?"No files or folders found":t&&r?"No files or symbols found":n&&r?"No folders or symbols found":t?"No files found":n?"No folders found":r?"No symbols found":"No references found"})(I),children:"Try a different search term"})})})}),v[20]=M,v[21]=L,v[22]=D,v[23]=I,v[24]=F,v[25]=U,v[26]=O,v[27]=f):f=v[27],v[28]!==E||v[29]!==C||v[30]!==p||v[31]!==f||v[32]!==o||v[33]!==l||v[34]!==c||v[35]!==d?(y=(0,i.jsxs)(eU.X,{anchorRef:E,title:o,description:l,onCancel:c,onSubmit:d,open:C,selectionVariant:"multiple",variant:"modal",width:"large",maxHeight:"xlarge",children:[p,f]}),v[28]=E,v[29]=C,v[30]=p,v[31]=f,v[32]=o,v[33]=l,v[34]=c,v[35]=d,v[36]=y):y=v[36],v[37]!==y||v[38]!==a?(x=(0,i.jsxs)("div",{className:eK.selectPanelContainer,children:[a,y]}),v[37]=y,v[38]=a,v[39]=x):x=v[39],x};function e1(e){let t,n,r,a,o,l=(0,s.c)(11),{open:c,setOpen:d,renderAnchor:u}=e;return l[0]!==d?(t=()=>d(!0),n=()=>d(!1),l[0]=d,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==u?(r=e=>u?.(e)??(0,i.jsx)(i.Fragment,{}),l[3]=u,l[4]=r):r=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsxs)("div",{className:eK.chooseRepoInstructionPanel,children:[(0,i.jsx)(j.PaperclipIcon,{}),(0,i.jsx)("h3",{className:eK.chooseRepoTitle,children:"Attach a repository first"}),(0,i.jsx)("p",{className:eK.chooseRepoSubtitle,children:"To pick attachments, attach a repository where the files are stored."})]}),l[5]=a):a=l[5],l[6]!==c||l[7]!==t||l[8]!==n||l[9]!==r?(o=(0,i.jsx)(eS.T,{open:c,onOpen:t,onClose:n,renderAnchor:r,children:a}),l[6]=c,l[7]=t,l[8]=n,l[9]=r,l[10]=o):o=l[10],o}let e2=e=>`${e.type}#${e.text}`;function e3(e){let t,n,r,a,o,l=(0,s.c)(15),{toggleSelection:c,selected:d,item:u}=e;return l[0]!==u||l[1]!==c?(t=()=>{c(u),setTimeout(()=>{document.getElementById(e2(u))?.focus()})},l[0]=u,l[1]=c,l[2]=t):t=l[2],l[3]!==u?(n=e2(u),l[3]=u,l[4]=n):n=l[4],l[5]!==u.type?(r=(0,i.jsx)(m.l.LeadingVisual,{children:"symbol"===u.type?(0,i.jsx)(j.CodeSquareIcon,{}):"folder"===u.type?(0,i.jsx)(j.FileDirectoryFillIcon,{}):(0,i.jsx)(j.FileIcon,{})}),l[5]=u.type,l[6]=r):r=l[6],l[7]!==u.text?(a=(0,i.jsx)("div",{className:eK.referenceItemText,children:u.text}),l[7]=u.text,l[8]=a):a=l[8],l[9]!==d||l[10]!==t||l[11]!==n||l[12]!==r||l[13]!==a?(o=(0,i.jsxs)(m.l.Item,{onSelect:t,selected:d,id:n,className:eK.referenceListItem,children:[r,a]}),l[9]=d,l[10]=t,l[11]=n,l[12]=r,l[13]=a,l[14]=o):o=l[14],o}function e5(e){return{type:"symbol",text:e}}function e4(e){return{type:"folder",text:e}}function e6(e){return{type:"file",text:e}}function e7(e){return(0,_.Sm)(e)}try{(a=e=>{let t,n,r,a,o=(0,s.c)(12);o[0]!==e?({open:n,onOpenChange:t,...r}=e,o[0]=e,o[1]=t,o[2]=n,o[3]=r):(t=o[1],n=o[2],r=o[3]);let{currentTopic:l}=(0,g.Pk)();if(!(0,_.Z6)(l)){let e;return o[4]!==t||o[5]!==n?(e=(0,i.jsx)(e1,{open:n,setOpen:t}),o[4]=t,o[5]=n,o[6]=e):e=o[6],e}return o[7]!==l||o[8]!==t||o[9]!==n||o[10]!==r?(a=(0,i.jsx)(e0,{...r,open:n,onOpenChange:t,sourceRepository:l}),o[7]=l,o[8]=t,o[9]=n,o[10]=r,o[11]=a):a=o[11],a}).displayName||(a.displayName="TopicReferencesSelectPanel")}catch{}try{eY.displayName||(eY.displayName="MultistepReferencesSelectPanel")}catch{}try{e0.displayName||(e0.displayName="ReferencesSelectPanel")}catch{}try{e1.displayName||(e1.displayName="ChooseRepositoryInstruction")}catch{}try{e3.displayName||(e3.displayName="ReferenceListItem")}catch{}function e8(e){return e.currentReferences}function e9(e){return"repository"===e.type}function te(e){return e.id}let tt=(0,h.memo)(e=>{let t,n,r,a,l,d,u,p,f,y,x,v,S,E,C,b,R,N,I,A,T,k,L,M,D,O,F,U=(0,s.c)(97);U[0]!==e?({panel:a,onPanelChange:d,anchorRef:t,initialRepo:n,onRepoSelect:r,...l}=e,U[0]=e,U[1]=t,U[2]=n,U[3]=r,U[4]=a,U[5]=l,U[6]=d):(t=U[1],n=U[2],r=U[3],a=U[4],l=U[5],d=U[6]);let{inputRef:B}=l,q=(0,P.b)(),$=(0,g.Pk)(),{supportedAttachmentTypes:G,supportedReferenceTypes:W}=function(){let e=(0,g.Pk)(),t=null!==(0,et.G)(),n=["upload"],r=e.renderKnowledgeBases&&(e.currentTopic&&(0,_.Z6)(e.currentTopic)||!e.currentTopic);return t||n.push("repositories"),n.push("references"),r&&!t&&n.push("knowledge-bases"),t||n.push("agents"),{supportedAttachmentTypes:n,supportedReferenceTypes:t?["files"]:["files","folders","symbols"]}}(),{model:V}=(0,g.bP)("model"),Q="immersive"===$.mode&&!!V.capabilities?.supports?.vision,H=(0,en.kw)(l),z=(0,h.useRef)(null),K=(0,et.G)(),Y=(0,ee.FQ)(!0),er=!!(K&&Y);U[7]!==K||U[8]!==Q||U[9]!==q||U[10]!==V||U[11]!==er||U[12]!==$||U[13]!==G?(u=G.includes("upload")&&(0,i.jsx)("input",{id:"image-uploader",...(0,w.G)("image-uploader"),hidden:!0,ref:z,type:"file",accept:[Q?J.s.getAllowedImageFileExtensions(V):"",Z.E.getTextFileExtensions()].join(","),multiple:!0,onChange:e=>{if(!e.target.files)return;let[t,n]=J.s.getAllowedFiles([...e.target.files],V),r=[];for(let e of(Q?new J.s($,q).addImageAttachments(t,"menu",K,er):r.push(...t),n))new Z.E(q).addAttachment(e);for(let e of r)(0,o.BI)("dotcom_chat.upload_unsupported_file",{name:e.name,type:e.type,size:e.size});e.currentTarget.value=""}}),U[7]=K,U[8]=Q,U[9]=q,U[10]=V,U[11]=er,U[12]=$,U[13]=G,U[14]=u):u=U[14];let ei="attachment-types"===a;U[15]!==d?(p=e=>d(t=>e&&null===t?"attachment-types":e||"attachment-types"!==t?t:null),U[15]=d,U[16]=p):p=U[16];let es="assistive"===$.mode?eO.E5:void 0;U[17]!==d||U[18]!==$.mode||U[19]!==G?(f=G.includes("repositories")&&(0,i.jsxs)(m.l.Item,{onSelect:()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",mode:$.mode}),d("repositories")},children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(j.RepoIcon,{})}),"Repositories\u2026"]}),U[17]=d,U[18]=$.mode,U[19]=G,U[20]=f):f=U[20],U[21]!==d||U[22]!==$.mode?(y=()=>{X.W.multiFilePickerAttachment?((0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_MULTI_FILE_PICKER",mode:$.mode}),d("multi-file-picker")):((0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REFERENCES",mode:$.mode}),d("references"))},U[21]=d,U[22]=$.mode,U[23]=y):y=U[23];let eo=G.includes("references")?void 0:"First attach a repository";U[24]===Symbol.for("react.memo_cache_sentinel")?(x=(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(j.FileCodeIcon,{})}),U[24]=x):x=U[24],U[25]!==W?(v=(e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols"),a="References";return t&&n&&r?a="Files, folders, and symbols":t&&n?a="Files and folders":t&&r?a="Files and symbols":n&&r?a="Folders and symbols":t?a="Files":n?a="Folders":r&&(a="Symbols"),a})(W),U[25]=W,U[26]=v):v=U[26],U[27]!==y||U[28]!==eo||U[29]!==v?(S=(0,i.jsxs)(m.l.Item,{onSelect:y,inactiveText:eo,children:[x,v,"\u2026"]}),U[27]=y,U[28]=eo,U[29]=v,U[30]=S):S=U[30],U[31]!==d||U[32]!==$.mode||U[33]!==G?(E=G.includes("knowledge-bases")&&(0,i.jsxs)(m.l.Item,{onSelect:()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_KNOWLEDGE_BASES",mode:$.mode}),d("knowledge-bases")},children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(j.BookIcon,{})}),(0,i.jsx)("span",{...(0,w.G)("knowledge-bases-action-list-item"),children:"Knowledge bases\u2026"})]}),U[31]=d,U[32]=$.mode,U[33]=G,U[34]=E):E=U[34],U[35]!==d||U[36]!==$.mode||U[37]!==G?(C=G.includes("upload")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.l.Divider,{}),(0,i.jsxs)(m.l.Item,{onSelect:()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_IMAGES",mode:$.mode}),d(null),z.current?.click()},children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(j.UploadIcon,{})}),"Upload from computer"]})]}),U[35]=d,U[36]=$.mode,U[37]=G,U[38]=C):C=U[38],U[39]!==H||U[40]!==d||U[41]!==G?(b=G.includes("agents")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.l.Divider,{}),(0,i.jsx)(ea,{onSelectPanel:e=>d(e),onSelectAgent:e=>setTimeout(()=>H(e.slug))})]}),U[39]=H,U[40]=d,U[41]=G,U[42]=b):b=U[42],U[43]!==S||U[44]!==E||U[45]!==C||U[46]!==b||U[47]!==f?(R=(0,i.jsxs)(m.l,{children:[f,S,E,C,b]}),U[43]=S,U[44]=E,U[45]=C,U[46]=b,U[47]=f,U[48]=R):R=U[48],U[49]!==R||U[50]!==es?(N=(0,i.jsx)(c.W.Overlay,{width:"small",side:"outside-bottom",align:"end",portalContainerName:es,children:R}),U[49]=R,U[50]=es,U[51]=N):N=U[51],U[52]!==t||U[53]!==N||U[54]!==ei||U[55]!==p?(I=(0,i.jsx)(c.W,{anchorRef:t,open:ei,onOpenChange:p,children:N}),U[52]=t,U[53]=N,U[54]=ei,U[55]=p,U[56]=I):I=U[56],U[57]!==t||U[58]!==B||U[59]!==a||U[60]!==d||U[61]!==W?(A="references"===a&&(0,i.jsx)(eY,{open:!0,onOpenChange:e=>d(e?"references":null),submitReturnFocusRef:B,cancelReturnFocusRef:t,supportedReferenceTypes:W}),U[57]=t,U[58]=B,U[59]=a,U[60]=d,U[61]=W,U[62]=A):A=U[62],U[63]!==n||U[64]!==r||U[65]!==a||U[66]!==d?(T="multi-file-picker"===a&&(0,i.jsx)(eg,{isOpen:!0,onClose:()=>d(null),initialRepo:n,onRepoSelect:r}),U[63]=n,U[64]=r,U[65]=a,U[66]=d,U[67]=T):T=U[67];let el="repositories"===a;return U[68]!==d?(k=e=>d(e?"repositories":null),U[68]=d,U[69]=k):k=U[69],U[70]!==t||U[71]!==B||U[72]!==el||U[73]!==k?(L=(0,i.jsx)(eX.FZ,{open:el,onOpenChange:k,submitReturnFocusRef:B,cancelReturnFocusRef:t}),U[70]=t,U[71]=B,U[72]=el,U[73]=k,U[74]=L):L=U[74],U[75]!==t||U[76]!==a||U[77]!==d||U[78]!==G?(M=G.includes("knowledge-bases")&&(0,i.jsx)(eN,{disabledForPreviewModelsProps:{anchorRef:t},emptyKnowledgeBaseProps:{anchorRef:t},open:"knowledge-bases"===a,onOpenChange:e=>d(e?"knowledge-bases":null),anchorRef:t}),U[75]=t,U[76]=a,U[77]=d,U[78]=G,U[79]=M):M=U[79],U[80]!==t||U[81]!==a||U[82]!==d?(D="no-agents-available"===a&&(0,i.jsx)(eu,{onClose:()=>d(null),returnFocusRef:t}),U[80]=t,U[81]=a,U[82]=d,U[83]=D):D=U[83],U[84]!==t||U[85]!==a||U[86]!==d?(O="agents-not-supported"===a&&(0,i.jsx)(eh,{onClose:()=>d(null),returnFocusRef:t}),U[84]=t,U[85]=a,U[86]=d,U[87]=O):O=U[87],U[88]!==u||U[89]!==I||U[90]!==A||U[91]!==T||U[92]!==L||U[93]!==M||U[94]!==D||U[95]!==O?(F=(0,i.jsxs)("div",{children:[u,I,A,T,L,M,D,O]}),U[88]=u,U[89]=I,U[90]=A,U[91]=T,U[92]=L,U[93]=M,U[94]=D,U[95]=O,U[96]=F):F=U[96],F});tt.displayName="AttachmentMenu";var tn=n(71555);let tr={agents:"Extensions",repositories:"Repositories",files:"Files and folders",issues:"Issues",pulls:"Pull requests",discussions:"Discussions"},ta=[{name:tr.agents,icon:j.StackIcon,value:"agents",where:"start"},{name:tr.repositories,icon:j.RepoIcon,value:"repositories",where:"anywhere"},{name:tr.files,icon:j.FileIcon,value:"repositories:files",where:"anywhere"},{name:tr.issues,icon:j.IssueOpenedIcon,value:"repositories:issues",where:"anywhere"},{name:tr.pulls,icon:j.GitPullRequestIcon,value:"repositories:pulls",where:"anywhere"},{name:tr.discussions,icon:j.CommentDiscussionIcon,value:"repositories:discussions",where:"anywhere"}],ti={is:e=>ta.some(t=>t.value===e)};function ts(e){let t,n,r,a,o,l=(0,s.c)(12);return l[0]!==e?({agent:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t.avatarUrl?(r=(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(er.r,{src:t.avatarUrl})}),l[3]=t.avatarUrl,l[4]=r):r=l[4],l[5]!==t.slug?(a=(0,i.jsxs)(m.l.Description,{variant:"inline",truncate:!0,children:[en.Z3,t.slug]}),l[5]=t.slug,l[6]=a):a=l[6],l[7]!==t.name||l[8]!==n||l[9]!==r||l[10]!==a?(o=(0,i.jsxs)(m.l.Item,{...n,children:[r,t.name,a]}),l[7]=t.name,l[8]=n,l[9]=r,l[10]=a,l[11]=o):o=l[11],o}try{ts.displayName||(ts.displayName="AgentSuggestion")}catch{}function to(e){let t,n,r,a,o,l,c,d,u=(0,s.c)(20);u[0]!==e?({leadingVisual:t,...n}=e,u[0]=e,u[1]=t,u[2]=n):(t=u[1],n=u[2]);let p=(0,h.useId)(),f=(0,h.useId)();return u[3]!==f||u[4]!==p?(r=(0,v.$)(p,f),u[3]=f,u[4]=p,u[5]=r):r=u[5],u[6]!==t?(a=void 0!==t&&(0,i.jsx)(m.l.LeadingVisual,{children:t}),u[6]=t,u[7]=a):a=u[7],u[8]!==p||u[9]!==n.children?(o=(0,i.jsx)("span",{id:p,children:n.children}),u[8]=p,u[9]=n.children,u[10]=o):o=u[10],u[11]!==f?(l=(0,i.jsx)("span",{className:"d-none","aria-hidden":!0,id:f,children:"Opens in new tab."}),u[11]=f,u[12]=l):l=u[12],u[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(m.l.TrailingVisual,{children:(0,i.jsx)(j.LinkExternalIcon,{})}),u[13]=c):c=u[13],u[14]!==n||u[15]!==r||u[16]!==a||u[17]!==o||u[18]!==l?(d=(0,i.jsxs)(m.l.Item,{...n,"aria-labelledby":r,children:[a,o,l,c]}),u[14]=n,u[15]=r,u[16]=a,u[17]=o,u[18]=l,u[19]=d):d=u[19],d}try{to.displayName||(to.displayName="LinkSuggestion")}catch{}function tl(e){return{value:`@${e.slug}`,render:t=>(0,i.jsx)(ts,{agent:e,...t})}}function tc(e){let t,n,r,a,o,l=(0,s.c)(9);return l[0]!==e?({leadingVisual:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t?(r=void 0!==t&&(0,i.jsx)(m.l.LeadingVisual,{children:t}),l[3]=t,l[4]=r):r=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(m.l.TrailingVisual,{children:(0,i.jsx)(j.ArrowRightIcon,{})}),l[5]=a):a=l[5],l[6]!==n||l[7]!==r?(o=(0,i.jsxs)(m.l.Item,{"aria-haspopup":!0,...n,children:[r,n.children,a]}),l[6]=n,l[7]=r,l[8]=o):o=l[8],o}try{tc.displayName||(tc.displayName="MultistepSuggestion")}catch{}function td(e){let t,n,r,a,o=(0,s.c)(9);o[0]!==e?({category:n,...t}=e,o[0]=e,o[1]=t,o[2]=n):(t=o[1],n=o[2]);let{name:l,icon:c}=n;return o[3]!==c?(r=(0,i.jsx)(c,{}),o[3]=c,o[4]=r):r=o[4],o[5]!==l||o[6]!==t||o[7]!==r?(a=(0,i.jsx)(tc,{leadingVisual:r,...t,children:l}),o[5]=l,o[6]=t,o[7]=r,o[8]=a):a=o[8],a}try{td.displayName||(td.displayName="CategorySuggestion")}catch{}let tu={asyncSuggestion:"shared-module__asyncSuggestion--AXibl",stale:"shared-module__stale--R4Im6"};function tm(e){let t,n,r,a,o,l,c,d,u,h,p,f=(0,s.c)(25);f[0]!==e?({discussion:n,stale:a,className:t,...r}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=r,f[4]=a):(t=f[1],n=f[2],r=f[3],a=f[4]);let g=a&&tu.stale;return f[5]!==t||f[6]!==g?(o=(0,v.$)(tu.asyncSuggestion,g,t),f[5]=t,f[6]=g,f[7]=o):o=f[7],f[8]!==n.state?(l="open"===n.state&&(0,i.jsx)(j.CommentDiscussionIcon,{className:"fgColor-open"}),f[8]=n.state,f[9]=l):l=f[9],f[10]!==n.state?(c="closed"===n.state&&(0,i.jsx)(j.DiscussionClosedIcon,{className:"fgColor-muted"}),f[10]=n.state,f[11]=c):c=f[11],f[12]!==l||f[13]!==c?(d=(0,i.jsxs)(m.l.LeadingVisual,{children:[l,c]}),f[12]=l,f[13]=c,f[14]=d):d=f[14],f[15]!==n.title?(u=(0,i.jsx)(eE.A,{title:n.title,maxWidth:350,children:n.title}),f[15]=n.title,f[16]=u):u=f[16],f[17]!==n.number?(h=(0,i.jsxs)(m.l.Description,{children:["#",n.number]}),f[17]=n.number,f[18]=h):h=f[18],f[19]!==r||f[20]!==o||f[21]!==d||f[22]!==u||f[23]!==h?(p=(0,i.jsxs)(m.l.Item,{...r,className:o,children:[d,u,h]}),f[19]=r,f[20]=o,f[21]=d,f[22]=u,f[23]=h,f[24]=p):p=f[24],p}try{tm.displayName||(tm.displayName="DiscussionSuggestion")}catch{}function th(e){let t,n,r,a,o,l,c,d,u,h,p,f,g,y,x,_=(0,s.c)(35);if(_[0]!==e?({type:o,path:n,stale:a,className:t,...r}=e,_[0]=e,_[1]=t,_[2]=n,_[3]=r,_[4]=a,_[5]=o):(t=_[1],n=_[2],r=_[3],a=_[4],o=_[5]),_[6]!==t||_[7]!==n||_[8]!==r||_[9]!==a||_[10]!==o){let e=n.split("/"),s=e.pop();c=m.l.Item,h=r;let y=a&&tu.stale;_[19]!==t||_[20]!==y?(p=(0,v.$)(tu.asyncSuggestion,y,t),_[19]=t,_[20]=y,_[21]=p):p=_[21],_[22]!==o?(f=(0,i.jsx)(m.l.LeadingVisual,{children:"folder"===o?(0,i.jsx)(j.FileDirectoryFillIcon,{}):(0,i.jsx)(j.FileIcon,{})}),_[22]=o,_[23]=f):f=_[23],g=s,l=m.l.Description,d="inline",u=e.join("/"),_[6]=t,_[7]=n,_[8]=r,_[9]=a,_[10]=o,_[11]=l,_[12]=c,_[13]=d,_[14]=u,_[15]=h,_[16]=p,_[17]=f,_[18]=g}else l=_[11],c=_[12],d=_[13],u=_[14],h=_[15],p=_[16],f=_[17],g=_[18];return _[24]!==l||_[25]!==d||_[26]!==u?(y=(0,i.jsxs)(l,{variant:d,children:[u,"/"]}),_[24]=l,_[25]=d,_[26]=u,_[27]=y):y=_[27],_[28]!==c||_[29]!==h||_[30]!==p||_[31]!==f||_[32]!==g||_[33]!==y?(x=(0,i.jsxs)(c,{...h,className:p,children:[f,g,y]}),_[28]=c,_[29]=h,_[30]=p,_[31]=f,_[32]=g,_[33]=y,_[34]=x):x=_[34],x}try{th.displayName||(th.displayName="FileSuggestion")}catch{}function tp(e){let t,n,r,a,o,l,c,d,u,h,p,f,g=(0,s.c)(28);g[0]!==e?({issue:n,stale:a,className:t,...r}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=a):(t=g[1],n=g[2],r=g[3],a=g[4]);let y=a&&tu.stale;return g[5]!==t||g[6]!==y?(o=(0,v.$)(tu.asyncSuggestion,y,t),g[5]=t,g[6]=y,g[7]=o):o=g[7],g[8]!==n.state?(l="draft"===n.state&&(0,i.jsx)(j.IssueDraftIcon,{className:"fgColor-neutral"}),g[8]=n.state,g[9]=l):l=g[9],g[10]!==n.state?(c="open"===n.state&&(0,i.jsx)(j.IssueOpenedIcon,{className:"fgColor-open"}),g[10]=n.state,g[11]=c):c=g[11],g[12]!==n.state?(d="closed"===n.state&&(0,i.jsx)(j.IssueClosedIcon,{className:"fgColor-done"}),g[12]=n.state,g[13]=d):d=g[13],g[14]!==l||g[15]!==c||g[16]!==d?(u=(0,i.jsxs)(m.l.LeadingVisual,{children:[l,c,d]}),g[14]=l,g[15]=c,g[16]=d,g[17]=u):u=g[17],g[18]!==n.title?(h=(0,i.jsx)(eE.A,{title:n.title,maxWidth:350,children:n.title}),g[18]=n.title,g[19]=h):h=g[19],g[20]!==n.number?(p=(0,i.jsxs)(m.l.Description,{children:["#",n.number]}),g[20]=n.number,g[21]=p):p=g[21],g[22]!==r||g[23]!==o||g[24]!==u||g[25]!==h||g[26]!==p?(f=(0,i.jsxs)(m.l.Item,{...r,className:o,children:[u,h,p]}),g[22]=r,g[23]=o,g[24]=u,g[25]=h,g[26]=p,g[27]=f):f=g[27],f}try{tp.displayName||(tp.displayName="IssueSuggestion")}catch{}function tf(e){let t,n,r,a,o,l,c,d,u,h,p,f,g=(0,s.c)(28);g[0]!==e?({pullRequest:r,stale:a,className:t,...n}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=a):(t=g[1],n=g[2],r=g[3],a=g[4]);let y=a&&tu.stale;return g[5]!==t||g[6]!==y?(o=(0,v.$)(tu.asyncSuggestion,y,t),g[5]=t,g[6]=y,g[7]=o):o=g[7],g[8]!==r.state?(l="draft"===r.state&&(0,i.jsx)(j.GitPullRequestDraftIcon,{className:"fgColor-neutral"}),g[8]=r.state,g[9]=l):l=g[9],g[10]!==r.state?(c="open"===r.state&&(0,i.jsx)(j.GitPullRequestIcon,{className:"fgColor-open"}),g[10]=r.state,g[11]=c):c=g[11],g[12]!==r.state?(d="closed"===r.state&&(0,i.jsx)(j.GitPullRequestClosedIcon,{className:"fgColor-done"}),g[12]=r.state,g[13]=d):d=g[13],g[14]!==l||g[15]!==c||g[16]!==d?(u=(0,i.jsxs)(m.l.LeadingVisual,{children:[l,c,d]}),g[14]=l,g[15]=c,g[16]=d,g[17]=u):u=g[17],g[18]!==r.title?(h=(0,i.jsx)(eE.A,{title:r.title,maxWidth:350,children:r.title}),g[18]=r.title,g[19]=h):h=g[19],g[20]!==r.number?(p=(0,i.jsxs)(m.l.Description,{children:["#",r.number]}),g[20]=r.number,g[21]=p):p=g[21],g[22]!==n||g[23]!==o||g[24]!==u||g[25]!==h||g[26]!==p?(f=(0,i.jsxs)(m.l.Item,{...n,className:o,children:[u,h,p]}),g[22]=n,g[23]=o,g[24]=u,g[25]=h,g[26]=p,g[27]=f):f=g[27],f}try{tf.displayName||(tf.displayName="PullRequestSuggestion")}catch{}function tg(e){let t,n,r,a,o,l,c,d,u=(0,s.c)(18);u[0]!==e?({repository:a,isMultistep:n,stale:o,className:t,...r}=e,u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=a,u[5]=o):(t=u[1],n=u[2],r=u[3],a=u[4],o=u[5]);let h=o&&tu.stale;u[6]!==t||u[7]!==h?(l=(0,v.$)(tu.asyncSuggestion,h,t),u[6]=t,u[7]=h,u[8]=l):l=u[8];let p=l;u[9]!==a.isInOrganization||u[10]!==a.ownerAvatarUrl?(c=a.ownerAvatarUrl?(0,i.jsx)(er.r,{src:a.ownerAvatarUrl,alt:"",size:16,square:a.isInOrganization}):(0,i.jsx)(j.RepoIcon,{}),u[9]=a.isInOrganization,u[10]=a.ownerAvatarUrl,u[11]=c):c=u[11];let f=c;return u[12]!==f||u[13]!==p||u[14]!==n||u[15]!==r||u[16]!==a.nwo?(d=n?(0,i.jsx)(tc,{...r,className:p,leadingVisual:f,children:a.nwo},a.nwo):(0,i.jsxs)(m.l.Item,{...r,className:p,children:[(0,i.jsx)(m.l.LeadingVisual,{children:f}),a.nwo]},a.nwo),u[12]=f,u[13]=p,u[14]=n,u[15]=r,u[16]=a.nwo,u[17]=d):d=u[17],d}try{tg.displayName||(tg.displayName="RepositorySuggestion")}catch{}function ty(e){return{value:null,key:e.value,render:t=>(0,i.jsx)(td,{category:e,...t})}}function tx(e){return null!==e}function t_(e){let t,n,r=(0,s.c)(3),[a,i]=(0,h.useState)(null);return(null===a&&null!==e||null!==a&&null===e)&&i(e),r[0]!==e?(t=()=>{let t=setTimeout(()=>i(e),200);return()=>clearTimeout(t)},n=[e],r[0]=e,r[1]=t,r[2]=n):(t=r[1],n=r[2]),(0,h.useEffect)(t,n),a}function tv(e){return e}function tS(e){return e}function tE(e){return e}var tC=n(26408);function tb(e){let t,n,r,a,o=(0,s.c)(9);return o[0]!==e?({org:t,...n}=e,o[0]=e,o[1]=t,o[2]=n):(t=o[1],n=o[2]),o[3]!==t.avatarUrl?(r=(0,i.jsx)(er.r,{square:!0,src:t.avatarUrl}),o[3]=t.avatarUrl,o[4]=r):r=o[4],o[5]!==t.login||o[6]!==n||o[7]!==r?(a=(0,i.jsx)(to,{leadingVisual:r,...n,children:t.login}),o[5]=t.login,o[6]=n,o[7]=r,o[8]=a):a=o[8],a}function tw(e){let t,n,r,a=(0,s.c)(7);return a[0]!==e?({orgs:t,...n}=e,a[0]=e,a[1]=t,a[2]=n):(t=a[1],n=a[2]),a[3]!==t[0]?.login||a[4]!==t.length||a[5]!==n?(r=1===t.length?(0,i.jsxs)(to,{leadingVisual:(0,i.jsx)(j.ShieldLockIcon,{}),...n,children:["Single sign-on to ",(0,i.jsx)("strong",{children:t[0]?.login})," for more"]}):(0,i.jsx)(tc,{leadingVisual:(0,i.jsx)(j.ShieldLockIcon,{}),...n,children:"Single sign-on for more"}),a[3]=t[0]?.login,a[4]=t.length,a[5]=n,a[6]=r):r=a[6],r}try{tb.displayName||(tb.displayName="SSOOrgSuggestion")}catch{}try{tw.displayName||(tw.displayName="SSOPromptSuggestion")}catch{}let tR=e=>`/orgs/${encodeURIComponent(e.login)}/sso?return_to=${encodeURIComponent(location.href)}`;function tN(e){return{value:null,key:`open-link:${tR(e)}`,render:t=>(0,i.jsx)(tb,{org:e,...t})}}let tj=[{triggerChar:"@",insertSpaceOnCommit:!0,keepTriggerCharOnCommit:!1,multiWord:!0}];function tI(e){let t,n,r,a,l,c,d,u,p,f,y=(0,s.c)(25),{children:x,onSelectReference:_,onShowAgentsDialog:v,hideAutocomplete:S}=e,{mode:E}=(0,g.Pk)(),[C,b]=(0,h.useState)(tA);y[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>b(!0),n=[],y[0]=t,y[1]=n):(t=y[0],n=y[1]),(0,h.useEffect)(t,n);let[w,R]=(0,h.useState)(null),{suggestions:N,stale:I}=function(e){let t=(0,s.c)(7),n=function(e){let t,n=(0,s.c)(3),{currentReferences:r}=(0,g.Pk)();e:{let a;if(!e){t=null;break e}if(n[0]!==r||n[1]!==e){let t=e.filter.toLowerCase(),s=e=>e.toLowerCase().includes(t)&&e.toLowerCase()!==t,o=r.map(e=>{let t=O.Q.for(e);switch(t?.type){case void 0:break;case"repository":{let e=`${t.reference.ownerLogin}/${t.reference.name}`;if(!s(e))return null;return{value:O.Q.stringify(t),render:n=>(0,i.jsx)(tg,{repository:{databaseId:t.reference.id,isInOrganization:"Organization"===t.reference.ownerType,name:t.reference.name,nwo:e,ownerLogin:t.reference.ownerLogin},...n})}}case"issue":{let e=t.reference.title??"";if(!s(e))return null;return{value:O.Q.stringify(t),render:n=>(0,i.jsx)(tp,{issue:{number:t.reference.number,state:t.reference.state??"",title:e},...n})}}case"pull-request":{let e=t.reference.title??"";if(!s(e))return null;return{value:O.Q.stringify(t),render:n=>(0,i.jsx)(tf,{pullRequest:{number:t.reference.number,state:t.reference.state??"",title:e},...n})}}case"discussion":{let e=t.reference.title??"";if(!s(e))return null;return{value:O.Q.stringify(t),render:n=>(0,i.jsx)(tm,{discussion:{number:t.reference.number,state:t.reference.state,title:e},...n})}}case"file":{let e=t.reference.path;if(!s(e))return null;return{value:O.Q.stringify(t),render:n=>(0,i.jsx)(th,{type:"folder"===t.reference.type?"folder":"file",path:e,...n})}}}return null}).filter(tx),l=ta.filter(n=>n.name.toLowerCase().includes(t)&&function(e,t){switch(e){case"start":return 0===t.index;case"anywhere":return!0}}(n.where,e)).map(ty);if(l.length>0){let e=o.at(-1);if(e&&"object"==typeof e){let t=e.render;e.render=e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t,{...e}),(0,i.jsx)(m.l.Divider,{})]})}}a=o.concat(l),n[0]=r,n[1]=e,n[2]=a}else a=n[2];t=a}return t}(e?.category==="categories"?e:null),r=function(e){let t,n=(0,s.c)(4),{availableAgents:r,loading:a,showLimit:o,disabled:l}=(0,en.JE)(null!==e);e:{let s;if(l||!e){t=null;break e}if(a&&!r){t="loading";break e}n[0]!==r||n[1]!==e||n[2]!==o?(s=r?.filter(t=>e?.category==="agents"&&t.name.toLowerCase().includes(e.filter.toLowerCase())).map(tl).concat({value:null,key:`open-link:${en.bn}`,render:e=>(0,i.jsxs)(i.Fragment,{children:[r.length>0&&(0,i.jsx)(m.l.Divider,{}),(0,i.jsx)(to,{leadingVisual:(0,i.jsx)(j.TelescopeIcon,{}),...e,inactiveText:o?"Start a new conversation to use other extensions.":void 0,children:"Marketplace"})]})})??null,n[0]=r,n[1]=e,n[2]=o,n[3]=s):s=n[3],t=s}return t}(e?.category==="agents"?e:null),a=function(e){let{currentReferences:t}=(0,g.Pk)(),n=t_(e),r=e!==n,{repositories:a,loading:s}=(0,tC.U)(n?.filter??"",null!==n),o=(0,h.useMemo)(()=>new Set(t.filter(e=>"repository"===e.type).map(e=>e.id)),[t]),{ssoOrganizations:l}=(0,g.Pk)();return{suggestions:(0,h.useMemo)(()=>{if(!n)return null;if("initial"===s)return"loading";let e=void 0!==n.nextCategory,t=a.toSorted((e,t)=>o.has(e.databaseId)&&!o.has(t.databaseId)?-1:o.has(t.databaseId)&&!o.has(e.databaseId)?1:0).slice(0,5).map(t=>({value:e?null:O.Q.stringify({type:"repository",repo:t.nwo}),key:t.nwo,render:n=>(0,i.jsx)(tg,{repository:t,isMultistep:e,stale:!!s||r,...n})}))??[];return l.length>0&&t.push({value:null,key:1===l.length?`open-link:${tR(l[0])}`:"sso-orgs",render:e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.l.Divider,{}),(0,i.jsx)(tw,{orgs:l,...e})]})}),t},[a,s,n,o,l,r]),stale:!0===s}}(e?.category==="repositories"?e:null),o=function(e){let t,n,r,a,o,l=(0,s.c)(18),{service:c}=(0,P.b)(),d=t_(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;l[0]!==h||l[1]!==p?(t=["copilot-autocomplete-issues",h,p],l[0]=h,l[1]=p,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompleteIssues(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(r={enabled:m,queryKey:t,queryFn:n,placeholderData:tS},l[6]=m,l[7]=t,l[8]=n,l[9]=r):r=l[9];let f=(0,eB.I)(r);e:{let e;if(!d){a=null;break e}if(f.isLoading){a="loading";break e}l[10]!==d||l[11]!==u||l[12]!==f.data||l[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:O.Q.stringify({type:"issue",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,i.jsx)(tp,{...t,issue:e,stale:f.isPlaceholderData||u})}))??null,l[10]=d,l[11]=u,l[12]=f.data,l[13]=f.isPlaceholderData,l[14]=e):e=l[14],a=e}let g=a;return l[15]!==f.isPlaceholderData||l[16]!==g?(o={suggestions:g,stale:f.isPlaceholderData},l[15]=f.isPlaceholderData,l[16]=g,l[17]=o):o=l[17],o}(e?.category==="issues"?e:null),l=function(e){let t,n,r,a,o,l=(0,s.c)(18),{service:c}=(0,P.b)(),d=t_(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;l[0]!==h||l[1]!==p?(t=["copilot-autocomplete-pulls",h,p],l[0]=h,l[1]=p,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompletePullRequests(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(r={enabled:m,queryKey:t,queryFn:n,placeholderData:tE},l[6]=m,l[7]=t,l[8]=n,l[9]=r):r=l[9];let f=(0,eB.I)(r);e:{let e;if(!d){a=null;break e}if(f.isLoading){a="loading";break e}l[10]!==d||l[11]!==u||l[12]!==f.data||l[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:O.Q.stringify({type:"pull-request",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,i.jsx)(tf,{...t,pullRequest:e,stale:f.isPlaceholderData||u})}))??null,l[10]=d,l[11]=u,l[12]=f.data,l[13]=f.isPlaceholderData,l[14]=e):e=l[14],a=e}let g=a;return l[15]!==f.isPlaceholderData||l[16]!==g?(o={suggestions:g,stale:f.isPlaceholderData},l[15]=f.isPlaceholderData,l[16]=g,l[17]=o):o=l[17],o}(e?.category==="pulls"?e:null),c=function(e){let t,n,r,a,o,l=(0,s.c)(18),{service:c}=(0,P.b)(),d=t_(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;l[0]!==h||l[1]!==p?(t=["copilot-autocomplete-discussions",h,p],l[0]=h,l[1]=p,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompleteDiscussions(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(r={enabled:m,queryKey:t,queryFn:n,placeholderData:tv},l[6]=m,l[7]=t,l[8]=n,l[9]=r):r=l[9];let f=(0,eB.I)(r);e:{let e;if(!d){a=null;break e}if(f.isLoading){a="loading";break e}l[10]!==d||l[11]!==f.data||l[12]!==f.isPlaceholderData||l[13]!==u?(e=f.data?.map(e=>({value:O.Q.stringify({type:"discussion",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,i.jsx)(tm,{...t,discussion:e,stale:f.isPlaceholderData||u})}))??null,l[10]=d,l[11]=f.data,l[12]=f.isPlaceholderData,l[13]=u,l[14]=e):e=l[14],a=e}let g=a;return l[15]!==f.isPlaceholderData||l[16]!==g?(o={suggestions:g,stale:f.isPlaceholderData},l[15]=f.isPlaceholderData,l[16]=g,l[17]=o):o=l[17],o}(e?.category==="discussions"?e:null),d=function(e){let t,n,r,a,o,l,c,d,u,m=(0,s.c)(23),h=(0,P.b)(),p=null!==e,f=e?.repository;m[0]!==f?(t=["copilot-repository",f],m[0]=f,m[1]=t):t=m[1],m[2]!==h||m[3]!==e?.repository?(n=async()=>{if(!e?.repository)return null;let t=await h.service.fetchRepo(e?.repository);if(!t.ok)throw Error("Failed to fetch repository");return t.payload},m[2]=h,m[3]=e?.repository,m[4]=n):n=m[4],m[5]!==p||m[6]!==t||m[7]!==n?(r={enabled:p,queryKey:t,queryFn:n,staleTime:3e5},m[5]=p,m[6]=t,m[7]=n,m[8]=r):r=m[8];let g=(0,eB.I)(r),y=eW(g.data??null);y.data?.directories,m[9]!==y.data?.directories?(o=y.data?.directories??[],m[9]=y.data?.directories,m[10]=o):o=m[10],m[11]!==o?(l=new Set(o),m[11]=o,m[12]=l):l=m[12],a=l,m[13]!==y.data?(c=y.data?(y.data.paths??[]).concat(y.data.directories??[]):null,m[13]=y.data,m[14]=c):c=m[14];let x=e$(c,e?.filter??"");e:{let t;if(!e){d=null;break e}if(g.isLoading||y.isLoading||x.isLoading){d="loading";break e}m[15]!==a||m[16]!==x.data||m[17]!==x.isPlaceholderData||m[18]!==e?(t=[...x.data?.slice(0,5).map(t=>({value:O.Q.stringify({repo:e.repository,type:"file",id:t}),key:t,render:e=>(0,i.jsx)(th,{...e,path:t,type:a.has(t)?"folder":"file",stale:x.isPlaceholderData})}))??[]],m[15]=a,m[16]=x.data,m[17]=x.isPlaceholderData,m[18]=e,m[19]=t):t=m[19];let n=t;d=n.length>0?n:null}let _=d;return m[20]!==g.isPlaceholderData||m[21]!==_?(u={suggestions:_,stale:g.isPlaceholderData},m[20]=g.isPlaceholderData,m[21]=_,m[22]=u):u=m[22],u}(e?.category==="files"?e:null),u=function(e){let t,n=(0,s.c)(5),{ssoOrganizations:r}=(0,g.Pk)();e:{let a;if(!e){t=null;break e}if(n[0]!==e||n[1]!==r){let t;n[3]!==e?(t=t=>t.login.toLowerCase().includes(e.filter.toLowerCase()),n[3]=e,n[4]=t):t=n[4],a=r.filter(t).slice(0,10).map(tN),n[0]=e,n[1]=r,n[2]=a}else a=n[2];t=a}return t}(e?.category==="sso-orgs"?e:null);switch(e?.category){case void 0:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={suggestions:null,stale:!1},t[0]=e):e=t[0],e}case"categories":{let e;return t[1]!==n?(e={suggestions:n,stale:!1},t[1]=n,t[2]=e):e=t[2],e}case"repositories":return a;case"issues":return o;case"agents":{let e;return t[3]!==r?(e={suggestions:r,stale:!1},t[3]=r,t[4]=e):e=t[4],e}case"discussions":return c;case"pulls":return l;case"files":return d;case"sso-orgs":{let e;return t[5]!==u?(e={suggestions:u,stale:!1},t[5]=u,t[6]=e):e=t[6],e}}}(w);if(y[2]!==v||y[3]!==w?(r={query:w,onShowAgentsDialog:v},y[2]=v,y[3]=w,y[4]=r):r=y[4],!function(e){let t,n,r=(0,s.c)(12),{query:a,onShowAgentsDialog:i}=e,o=a?.category==="agents",{availableAgents:l,loading:c,disabled:d}=(0,en.JE)(o);r[0]!==o||r[1]!==l?.length||r[2]!==d||r[3]!==c||r[4]!==i?(t=()=>{o&&!c&&(d?i("agents-not-supported"):l?.length||i("no-agents-available"))},r[0]=o,r[1]=l?.length,r[2]=d,r[3]=c,r[4]=i,r[5]=t):t=r[5],r[6]!==o||r[7]!==l||r[8]!==d||r[9]!==c||r[10]!==i?(n=[o,c,l,d,i],r[6]=o,r[7]=l,r[8]=d,r[9]=c,r[10]=i,r[11]=n):n=r[11],(0,h.useEffect)(t,n)}(r),!C||S){let e;return y[5]!==x?(e=(0,i.jsx)("div",{children:x}),y[5]=x,y[6]=e):e=y[6],e}y[7]!==E||y[8]!==_||y[9]!==w?(a=e=>{let{suggestion:t}=e,n="string"==typeof t?t:t.value;(0,o.BI)("dotcom_chat.activate",{target:"AUTOCOMPLETE_ITEM_SELECTED",mode:E,suggestion:n});let r=null!==n&&w?.category!=="agents"?O.Q.parse(n):void 0;if(r&&_(r),"object"!=typeof t||null!==t.value)return;let a=/^open-link:(.+)$/.exec(t.key);if(a){R(null),window.open(a[1],"_blank");return}switch(w?.category){case"categories":ti.is(t.key)&&R(function(e){switch(e){case"repositories":return{category:"repositories",filter:""};case"agents":return{category:"agents",filter:""};case"repositories:discussions":return{category:"repositories",filter:"",nextCategory:"discussions"};case"repositories:issues":return{category:"repositories",filter:"",nextCategory:"issues"};case"repositories:pulls":return{category:"repositories",filter:"",nextCategory:"pulls"};case"repositories:files":return{category:"repositories",filter:"",nextCategory:"files"}}}(t.key));break;case"repositories":"sso-orgs"===t.key?R({category:"sso-orgs",filter:""}):w.nextCategory&&R({category:w.nextCategory,filter:"",repository:t.key})}},y[7]=E,y[8]=_,y[9]=w,y[10]=a):a=y[10];let A=a;y[11]===Symbol.for("react.memo_cache_sentinel")?(l=e=>R(t=>t?{...t,filter:e.query}:{category:"categories",filter:e.query,index:(e.target.selectionStart??0)-(e.query.length+e.trigger.triggerChar.length)}),y[11]=l):l=y[11];let T=l;y[12]===Symbol.for("react.memo_cache_sentinel")?(c=()=>R(null),y[12]=c):c=y[12];let k=c;return y[13]!==w?(d=w&&function(e){switch(e.category){case"categories":return null;case"repositories":switch(e.nextCategory){case"discussions":case"issues":case"pulls":case"files":return`${tr[e.nextCategory]} \u{203A}`;default:return"Repositories \u203A"}case"agents":return tr[e.category];case"discussions":case"issues":case"pulls":case"files":return`${tr[e.category]} \u{203A} ${e.repository} \u{203A}`;case"sso-orgs":return"Single sign-on"}}(w)||void 0,y[13]=w,y[14]=d):d=y[14],y[15]!==x||y[16]!==A||y[17]!==N||y[18]!==d?(u=(0,i.jsx)(tn.a,{fullWidth:!0,suggestions:N,triggers:tj,tabInsertsSuggestions:!1,onHideSuggestions:k,onShowSuggestions:T,onSelectSuggestion:A,suggestionsPlacement:"above",title:d,asMenu:!0,children:x}),y[15]=x,y[16]=A,y[17]=N,y[18]=d,y[19]=u):u=y[19],y[20]!==I?(p=I&&(0,i.jsx)("span",{role:"status","aria-live":"polite",className:"sr-only",children:"Loading"}),y[20]=I,y[21]=p):p=y[21],y[22]!==u||y[23]!==p?(f=(0,i.jsxs)(i.Fragment,{children:[u,p]}),y[22]=u,y[23]=p,y[24]=f):f=y[24],f}function tA(){return"undefined"!=typeof document}try{tI.displayName||(tI.displayName="ChatInputAutocomplete")}catch{}let tT={container:"ChatInput-module__container--qmP6j",input:"ChatInput-module__input--HalEQ",containerSmall:"ChatInput-module__containerSmall--NfPkF",inputContainer:"ChatInput-module__inputContainer--cpjba",inputPreview:"ChatInput-module__inputPreview--Fdwj0",clicked:"ChatInput-module__clicked--u0igo",attachments:"ChatInput-module__attachments--Fv007",toolbar:"ChatInput-module__toolbar--Kv3Gl",toolbarNoModes:"ChatInput-module__toolbarNoModes--KJL2k",extra:"ChatInput-module__extra--oQVm8",CommandIconButton:"ChatInput-module__CommandIconButton--lxm7H",mode:"ChatInput-module__mode--dH9c4",modeButton:"ChatInput-module__modeButton--y5Yp0",modeSelectButton:"ChatInput-module__modeSelectButton--rJ86j",modeSelectorMobile:"ChatInput-module__modeSelectorMobile--ZPCVa",modeSelectorDesktop:"ChatInput-module__modeSelectorDesktop--SifXL",actions:"ChatInput-module__actions--zbM52",toolbarButtons:"ChatInput-module__toolbarButtons--YDoIY",lighterSegmentedControl:"ChatInput-module__lighterSegmentedControl--uAdMt"};var tk=n(93997),tL=n(6224);let tM=(0,h.forwardRef)(function(e,t){let n,r,a,o,l,c=(0,s.c)(14),{text:d}=e;c[0]!==d?(n=(0,tk._)(d),c[0]=d,c[1]=n):n=c[1];let{availableAgents:u}=(0,en.JE)(n);c[2]!==u?(r=void 0===u?[]:u,c[2]=u,c[3]=r):r=c[3];let m=r,{currentReferences:p}=(0,g.Pk)(),f=(0,P.b)(),y=(0,M.l)().use(F.U,{references:p,agents:m}).parse(d),x=(0,tk.O)(y),v=(0,h.useRef)(x);c[4]!==p||c[5]!==f||c[6]!==x?(a=function(){for(let e of v.current)if(!x.has(e)){let t=p.find(t=>(0,_.Vb)(t)===e);t&&f.removeReference(t)}v.current=x},c[4]=p,c[5]=f,c[6]=x,c[7]=a):a=c[7],(0,h.useEffect)(a),c[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,w.G)("copilot-chat-input-textarea-preview"),c[8]=o):o=c[8];let S=y.children.map(tD);return c[9]!==t||c[10]!==S||c[11]!==o||c[12]!==tT.inputPreview?(l=(0,i.jsx)("div",{id:"copilot-chat-textarea-preview",...o,"aria-hidden":!0,className:tT.inputPreview,ref:t,role:"presentation",children:S}),c[9]=t,c[10]=S,c[11]=o,c[12]=tT.inputPreview,c[13]=l):l=c[13],l});try{tM.displayName||(tM.displayName="ChatInputPreview")}catch{}function tD(e,t){switch(e.type){case"text":return e.value;case"reference-mention":return void 0!==e.data.mentionedReferenceId?(0,i.jsx)("span",{className:tL.A.mention,...(0,w.G)("input-preview-ref"),children:e.value},t):e.value;case"agent-mention":return(0,i.jsx)("span",{className:tL.A.mention,children:e.value},t)}}var tP=n(11683),tO=n(82678),tF=n(7730),tU=n(57448);let tB={container:"ChatInputReferences-module__container--bNybl",attachmentsList:"ChatInputReferences-module__attachmentsList--mEJpJ",scrolledToEnd:"ChatInputReferences-module__scrolledToEnd--DONiv",loading:"ChatInputReferences-module__loading--kAJlw",divider:"ChatInputReferences-module__divider--k8d6S",menuButton:"ChatInputReferences-module__menuButton--IVLqN",functionLoading:"ChatInputReferences-module__functionLoading--Oimop",convertToFileButton:"ChatInputReferences-module__convertToFileButton--hnPn2",hoveringDismissConvertToFile:"ChatInputReferences-module__hoveringDismissConvertToFile--OLdgF",convertToFileButtonContent:"ChatInputReferences-module__convertToFileButtonContent--CdiQX"};var tq=n(1631),t$=n(15518);let tG=(0,h.memo)(e=>{let t,n,r,a,o,l,d,p,f,y,x,S,E,C,b,R,N,I,A=(0,s.c)(49),{className:k,isLoading:L,returnFocusRef:M,tokenSize:D,onSelectReference:O,getReferenceVersion:F,showConvertToFileText:U,onConvertToFile:B,onConvertToFileDismiss:q}=e,$=void 0===D?"medium":D,{currentReferences:W}=(0,g.Pk)(),V=(0,P.b)(),Q=(0,h.useRef)(null),H=(0,tF.g)(Q),[z,K]=(0,h.useState)(!1),[X,J]=(0,h.useState)(!1);A[0]!==W?(n=(0,_.rT)(W),A[0]=W,A[1]=n):n=A[1],t=n;let Y=(0,h.useRef)(null);A[2]===Symbol.for("react.memo_cache_sentinel")?(r={containerRef:Y,focusableElementFilter:tV,bindKeys:tP.z0.ArrowHorizontal|tP.z0.HomeAndEnd,focusInStrategy:"previous",focusOutBehavior:"stop"},A[2]=r):r=A[2],A[3]!==t?(a=[t],A[3]=t,A[4]=a):a=A[4],(0,tO.G)(r,a),A[5]===Symbol.for("react.memo_cache_sentinel")?(o=[],A[5]=o):o=A[5];let Z=(0,h.useRef)(o),ee=(e,t)=>{let n=Z.current[t+1]??Z.current[t-1]??M.current;n?.focus(),V.removeReference(e)};A[6]!==V||A[7]!==M?(l=()=>{setTimeout(()=>M.current?.focus()),V.clearCurrentReferences()},A[6]=V,A[7]=M,A[8]=l):l=A[8];let et=l,en=(0,h.useRef)(t);A[9]!==t?(d=()=>{if(en.current.length<t.length){let e=t.find(e=>!en.current.find(t=>(0,_.x_)(t,e))),n=e?t.indexOf(e):-1;Z?.current?.[n]?.scrollIntoView({behavior:"smooth",inline:"end"})}en.current=t},p=[t],A[9]=t,A[10]=d,A[11]=p):(d=A[10],p=A[11]),(0,G.N)(d,p),A[12]!==q?(f=()=>{K(!1),q?.()},A[12]=q,A[13]=f):f=A[13];let er=f;A[14]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{J(tQ)},A[14]=y):y=A[14];let ea=y,ei=function(e,t,n,r){let a,i,o,l,c,d=(0,s.c)(14),[u,m]=(0,h.useState)(!1);d[0]!==r||d[1]!==t?(a=()=>{t.current&&m(t.current.some(e=>{if(!e)return!1;let t=e.querySelector(r);return!!t&&t.scrollWidth>t.clientWidth}))},d[0]=r,d[1]=t,d[2]=a):a=d[2];let p=a;return d[3]!==p||d[4]!==e.length?(i=()=>{if(0===e.length)return void m(!1);let t=requestAnimationFrame(p);return()=>cancelAnimationFrame(t)},d[3]=p,d[4]=e.length,d[5]=i):i=d[5],d[6]!==p||d[7]!==e?(o=[e,p],d[6]=p,d[7]=e,d[8]=o):o=d[8],(0,h.useEffect)(i,o),d[9]!==p||d[10]!==n||d[11]!==e.length?(l=()=>{if(0===e.length||!n.current)return;let t=new ResizeObserver(()=>{p()});return t.observe(n.current),()=>{t.disconnect()}},c=[e.length,p,n],d[9]=p,d[10]=n,d[11]=e.length,d[12]=l,d[13]=c):(l=d[12],c=d[13]),(0,h.useEffect)(l,c),u}(t,Z,Y,`.${t$.A.name}`),es=(0,h.useId)();A[15]!==er||A[16]!==U?(x=e=>{("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),e.stopPropagation(),U&&er())},A[15]=er,A[16]=U,A[17]=x):x=A[17];let el=x;if(0===t.length&&!L&&!U)return null;A[18]!==k?(S=(0,v.$)(k,tB.container),A[18]=k,A[19]=S):S=A[19];let ec=H&&tB.scrolledToEnd,ed=L&&tB.loading;A[20]!==ec||A[21]!==ed?(E=(0,v.$)(tB.attachmentsList,ec,ed),A[20]=ec,A[21]=ed,A[22]=E):E=A[22],A[23]!==es||A[24]!==er||A[25]!==z||A[26]!==B||A[27]!==el||A[28]!==U||A[29]!==$?(C=U&&(0,i.jsx)(eo.Q,{onClick:B,leadingVisual:j.FileIcon,className:(0,v.$)(tB.convertToFileButton,z&&tB.hoveringDismissConvertToFile),"aria-describedby":es,onKeyDown:el,children:(0,i.jsxs)("div",{className:tB.convertToFileButtonContent,children:["Convert to file",(0,i.jsx)(tq.lh,{size:$,onRemove:er,descriptionId:es,onMouseOver:()=>K(!0),onMouseLeave:()=>K(!1)})]})}),A[23]=es,A[24]=er,A[25]=z,A[26]=B,A[27]=el,A[28]=U,A[29]=$,A[30]=C):C=A[30];let eu=t.map((e,t)=>"repository"===e.type?(0,i.jsx)(tW,{reference:e,ref:e=>{Z.current[t]=e},"data-index":t,size:$,fullWidth:X,onRemove:()=>ee(e,t),onClick:O,getReferenceVersion:F},(0,_.Vb)(e)):(0,i.jsx)(tq.BR,{reference:e,ref:e=>{Z.current[t]=e},"data-index":t,size:$,fullWidth:X,onRemove:()=>ee(e,t),onClick:O,getReferenceVersion:F},(0,_.Vb)(e)));return A[31]!==L?(b=L&&(0,i.jsxs)("div",{className:tB.functionLoading,...(0,w.G)("loading-indicator"),children:[(0,i.jsx)(u.A,{size:"small"}),"Retrieving\u2026"]}),A[31]=L,A[32]=b):b=A[32],A[33]!==E||A[34]!==C||A[35]!==eu||A[36]!==b?(R=(0,i.jsxs)("div",{className:E,ref:Q,children:[C,eu,b]}),A[33]=E,A[34]=C,A[35]=eu,A[36]=b,A[37]=R):R=A[37],A[38]!==ea||A[39]!==ei||A[40]!==et||A[41]!==t.length||A[42]!==X||A[43]!==$?(N=t.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:tB.divider}),(0,i.jsxs)(c.W,{children:[(0,i.jsx)(c.W.Anchor,{children:(0,i.jsx)(T.K,{icon:j.KebabHorizontalIcon,"aria-label":"Attachments options",variant:"invisible",tooltipDirection:"n",className:tB.menuButton,size:$})}),(0,i.jsx)(c.W.Overlay,{width:"small",children:(0,i.jsxs)(m.l,{children:[ei&&(0,i.jsxs)(m.l.Item,{onSelect:ea,children:[(0,i.jsx)(m.l.LeadingVisual,{children:X?(0,i.jsx)(j.EyeClosedIcon,{}):(0,i.jsx)(j.EyeIcon,{})}),X?"Hide full attachment names":"Show full attachment names"]}),(0,i.jsxs)(m.l.Item,{onSelect:et,children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(j.TrashIcon,{})}),"Remove attachments"]})]})})]})]}),A[38]=ea,A[39]=ei,A[40]=et,A[41]=t.length,A[42]=X,A[43]=$,A[44]=N):N=A[44],A[45]!==S||A[46]!==R||A[47]!==N?(I=(0,i.jsxs)("div",{role:"toolbar","aria-label":"Attachments",className:S,ref:Y,children:[R,N]}),A[45]=S,A[46]=R,A[47]=N,A[48]=I):I=A[48],I});tG.displayName="ChatInputReferences";let tW=(0,h.forwardRef)(function(e,t){let n,r,a,o=(0,s.c)(8),l=e.reference,c=(0,g.pn)(tH),d=`${l.ownerLogin}/${l.name}`,[u,m]=(0,tU.vn)(d),p=(0,h.useRef)(!1),f=u.code===tU.W5.Unindexed||u.docs===tU.W5.Unindexed;return o[0]!==c||o[1]!==f||o[2]!==m?(n=function(){!p.current&&f&&c&&(p.current=!0,m())},r=[c,f,m],o[0]=c,o[1]=f,o[2]=m,o[3]=n,o[4]=r):(n=o[3],r=o[4]),(0,h.useEffect)(n,r),o[5]!==e||o[6]!==t?(a=(0,i.jsx)(tq.BR,{ref:t,...e}),o[5]=e,o[6]=t,o[7]=a):a=o[7],a});try{tW.displayName||(tW.displayName="RepoReferenceToken")}catch{}try{tW.displayName||(tW.displayName="RepoReferenceToken")}catch{}function tV(e){return!e.hasAttribute("aria-hidden")}function tQ(e){return!e}function tH(e){return e.model&&!e.model.hasLimitedCapabilities}var tz=n(81829);let tK=()=>{let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("svg",{"aria-label":"Tool",xmlns:"http://www.w3.org/2000/svg",width:"17",height:"16",fill:"none",viewBox:"0 0 17 16",children:(0,i.jsx)("path",{fill:"currentColor",d:"M6.146 2.344A6 6 0 0 1 11.44.679c.659.117 1.087.598 1.21 1.155a1.68 1.68 0 0 1-.47 1.544L10.19 5.371a.25.25 0 0 0-.069.224l.17.89c.02.101.098.18.198.199l.891.17a.25.25 0 0 0 .224-.069l1.994-1.993a1.68 1.68 0 0 1 1.544-.469 1.48 1.48 0 0 1 1.155 1.211 6 6 0 0 1-1.665 5.295 6 6 0 0 1-5.553 1.614c-.182-.041-.312.015-.37.076l-2.24 2.47a.75.75 0 0 1-1.11-1.007l2.249-2.48c.488-.527 1.199-.658 1.797-.524a4.5 4.5 0 0 0 4.166-1.21 4.5 4.5 0 0 0 1.249-3.972l-.003-.008c-.028-.005-.094 0-.159.065l-1.994 1.993c-.41.41-.996.59-1.565.481l-.89-.17a1.75 1.75 0 0 1-1.392-1.39l-.17-.89a1.75 1.75 0 0 1 .482-1.566l1.993-1.993c.065-.065.07-.132.065-.16l-.008-.003a4.5 4.5 0 0 0-3.972 1.25 4.5 4.5 0 0 0-1.21 4.165c.133.599.004 1.31-.522 1.797l-.007.006-2.474 2.244a.75.75 0 0 1-1.008-1.111l2.47-2.24c.061-.058.118-.187.077-.37a6 6 0 0 1 1.614-5.552"})}),t[0]=e):e=t[0],e};try{tK.displayName||(tK.displayName="MCPIcon")}catch{}var tX=n(97793),tJ=n(97665),tY=n(24815),tZ=n(20426),t0=n(88657);let t1={container:"McpToolsManager-module__container--PHa2N",header:"McpToolsManager-module__header--PXzkx",headerTitle:"McpToolsManager-module__headerTitle--CiuwN",searchInput:"McpToolsManager-module__searchInput--v2pAX",contentArea:"McpToolsManager-module__contentArea--aqxn4",loadingContainer:"McpToolsManager-module__loadingContainer--btAEV",emptyState:"McpToolsManager-module__emptyState--qpgwB",emptyStateTitle:"McpToolsManager-module__emptyStateTitle--PLCEY",emptyStateDescription:"McpToolsManager-module__emptyStateDescription--x7TOI",footer:"McpToolsManager-module__footer--UZmCo",serverName:"McpToolsManager-module__serverName--au45P"},t2=({anchorRef:e,open:t,onOpenChange:n})=>{let[r,a]=(0,h.useState)(!1),[s,o]=(0,h.useState)(()=>new Set),[l,c]=(0,h.useState)(""),{service:d}=(0,P.b)(),m=(0,tJ.jE)(),{data:p,isPending:f,isError:g}=(0,eB.I)({enabled:t,queryKey:["copilot-chat-mcps"],queryFn:async()=>d.fetchMCPServers(),placeholderData:e=>e}),y=(0,h.useMemo)(()=>p||[],[p]),x=(0,h.useMemo)(()=>y.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())),[y,l]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eS.T,{open:t,onOpen:()=>n(!0),onClose:()=>n(!1),anchorRef:e,side:"outside-bottom",align:"end",renderAnchor:()=>(0,i.jsx)(i.Fragment,{}),width:"medium",children:(0,i.jsxs)("div",{className:t1.container,children:[(0,i.jsxs)("div",{className:t1.header,children:[(0,i.jsx)("div",{className:t1.headerTitle,children:"MCP servers"}),(0,i.jsx)(tY.A,{placeholder:"Search by provider",value:l,onChange:e=>c(e.target.value),className:t1.searchInput,leadingVisual:j.SearchIcon})]}),(0,i.jsx)("div",{className:t1.contentArea,children:f?(0,i.jsx)("div",{className:t1.loadingContainer,children:(0,i.jsx)(u.A,{})}):g?(0,i.jsxs)(t0.E,{children:[(0,i.jsx)(t0.E.Visual,{children:"\u26A0\uFE0F"}),(0,i.jsx)(t0.E.Heading,{children:"Error loading tools"})]}):0===y.length?(0,i.jsxs)("div",{className:t1.emptyState,children:[(0,i.jsx)(j.ToolsIcon,{size:24}),(0,i.jsx)("div",{className:t1.emptyStateTitle,children:"You don't have any MCP tools configured"}),(0,i.jsx)("div",{className:t1.emptyStateDescription,children:"Add one to connect models to files, APIs, databases, and more."})]}):(0,i.jsx)(tZ.G,{"aria-label":"MCP server selection","aria-multiselectable":"true",children:x.map(e=>{let t=s.has(e.id);return(0,i.jsxs)(tZ.G.Item,{id:e.id,onSelect:()=>(e=>{o(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})})(e.id),current:t,"aria-selected":t,children:[(0,i.jsx)(tZ.G.LeadingVisual,{children:(0,i.jsx)("span",{className:t1.serverName,children:e.name})}),e.tools&&e.tools.length>0?(0,i.jsx)(tZ.G.SubTree,{children:e.tools.map(t=>(0,i.jsx)(tZ.G.Item,{id:`${e.id}-${t}`,children:t},t))}):null]},e.id)})})}),(0,i.jsx)("div",{className:t1.footer,children:(0,i.jsx)(eo.Q,{variant:"default",leadingVisual:j.PlusIcon,onClick:()=>{a(!0)},block:!0,children:"New tool"})})]})},"mcp-tool-manager"),(0,i.jsx)(tX.O,{isOpen:r,onClose:()=>{a(!1)},onServerAdded:()=>{m.invalidateQueries({queryKey:["copilot-chat-mcps"]})}})]})};try{t2.displayName||(t2.displayName="McpToolsManager")}catch{}let t3=()=>{let e,t=(0,s.c)(2),[n,r]=(0,h.useState)(!1),a=(0,h.useRef)(null);return t[0]!==n?(e=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T.K,{ref:a,icon:tK,variant:"invisible","aria-label":"MCP tools",onClick:()=>r(!n)}),(0,i.jsx)(t2,{anchorRef:a,open:n,onOpenChange:r})]}),t[0]=n,t[1]=e):e=t[1],e};try{t3.displayName||(t3.displayName="McpToolMenu")}catch{}var t5=n(12970);function t4(){let e,t,n,r=(0,s.c)(7),a=(0,P.b)(),{usePlanningIntent:o}=(0,g.Pk)();r[0]!==a||r[1]!==o?(e=()=>a.setUsePlanningIntent(!o),r[0]=a,r[1]=o,r[2]=e):e=r[2];let l=e;return r[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(j.TasklistIcon,{}),r[3]=t):t=r[3],r[4]!==l||r[5]!==o?(n=(0,i.jsx)(E,{icon:t,isSelected:o,onClick:l,children:"Plan"}),r[4]=l,r[5]=o,r[6]=n):n=r[6],n}try{t4.displayName||(t4.displayName="PlanningIntentToggle")}catch{}var t6=n(79184);let t7=["github:cancel","copilot-chat:send-message","copilot-chat:edit-last-message"],t8=e=>{let t,n,r,a,c,d,u,m,p,f,y,S,E,C,b,j,A,T,V,X,et,en,er,ea,ei,es,eo,el,ec,ed,eu,em,eh,ep,ef,eg=(0,s.c)(152),ey=(0,g.Pk)(),ex=(0,P.b)();eg[0]!==ex?(t=ex.maxMessagesReached(),eg[0]=ex,eg[1]=t):t=eg[1];let e_=t,[ev,eS]=(0,h.useState)(null),eE="loading"===ey.slashCommandLoading.state,{safeSetTimeout:eC}=(0,I.A)(),{isLicensedLimited:eb}=(0,t6.xR)(),{onSelectReference:ew}=e,eR=(0,h.useRef)(null),eN=(0,h.useRef)(""),ej=(0,h.useRef)(!1),{activeCopilotSpaceId:eI}=(0,x.C)();eg[2]!==e.activeModeName||eg[3]!==e.modes?(n=e.modes.find(t=>t.name===e.activeModeName)||e.modes[0],eg[2]=e.activeModeName,eg[3]=e.modes,eg[4]=n):n=eg[4];let eA=n;eg[5]!==ev||eg[6]!==ey.mode?(r=e=>{eR.current=null,eN.current="",ej.current=!1,ev&&(eS(null),void 0!==e&&e&&(0,o.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_DISMISS",mode:ey.mode}))},eg[5]=ev,eg[6]=ey.mode,eg[7]=r):r=eg[7];let eT=r,ek=ey.isWaitingOnCopilot||ey.isWaitingOnAttachment||eE;eg[8]!==eT||eg[9]!==e.onSubmit||eg[10]!==e.textAreaRef||eg[11]!==ek?(a={isLoading:ek,onSubmit:e.onSubmit,textAreaRef:e.textAreaRef,clearPastedFile:eT},eg[8]=eT,eg[9]=e.onSubmit,eg[10]=e.textAreaRef,eg[11]=ek,eg[12]=a):a=eg[12];let{typingHasStarted:eL,textAreaRef:eM,textareaPreviewRef:eD,textAreaPreviewContainerRef:eP,text:eO,setText:eF,handleSubmit:eU,handleSubmitToNewThread:eB,handleScroll:eq,handleChange:e$,handleStop:eG,handleFocus:eW}=function(e){let t=(0,g.Pk)(),n=(0,P.b)(),{selectedThreadID:r,mode:a,autoSubmit:i,model:s}=t,{clearPastedFile:c,isLoading:d,onSubmit:u}=e,m=W.Jt.getSavedMessage(r),p=W.Jt.getSavedUserMessageOnError(r),{pathname:f}=(0,l.zy)(),[y,x]=(0,l.ok)(),[_,v]=(0,h.useState)(()=>z(t.mode,f,y)??p??m??""),[S,E]=(0,h.useState)(!1),C=(0,h.useRef)(null),b=e.textAreaRef||C,w=(0,h.useRef)(null),R=(0,h.useRef)(null),N=(0,h.useRef)(0),j=(0,h.useRef)(null),I=(0,h.useRef)(()=>{}),A=(0,h.useRef)(!1),T=(0,H.GF)(t.availableModels),k=(0,h.useCallback)(async()=>{t.renderAttachKnowledgeBaseHerePopover&&await n.fetchKnowledgeBases()},[n,t.renderAttachKnowledgeBaseHerePopover]);(0,h.useEffect)(()=>{k()},[k]),(0,h.useEffect)(()=>{W.Jt.setSavedMessage(r,_)},[r,_]),(0,G.N)(()=>{let e=0;!function t(){if(!b.current||!R.current||!w.current)return;e++,0===b.current.scrollHeight&&e<10&&setTimeout(t,1),b.current.style.height="0";let n=b.current.scrollHeight,r=Math.min(n,300);w.current.style.height=`${n}px`,b.current.style.height=`${n}px`,R.current.style.height=`${r}px`}()},[_,b,w]);let L=(0,h.useCallback)(()=>{b?.current&&w?.current&&R?.current&&(w.current.scrollTop=b.current.scrollTop,w.current.scrollLeft=b.current.scrollLeft)},[b]),M=(0,h.useMemo)(()=>t.currentReferences.filter(e=>!("isClientOnly"in e)||!e.isClientOnly),[t.currentReferences]),D=(0,h.useCallback)(async e=>{if(E(!1),W.Jt.clearSavedUserMessage(r),W.Jt.clearSavedUserMessageOnError(r),t.defaultRecipient&&!_.includes(`@${t.defaultRecipient}`)&&n.clearDefaultRecipient(),e?.preventDefault(),"assistive"===t.mode&&await Q(_,t,n)){(0,o.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_EXECUTED",mode:t.mode,command:_}),"/new"===_.trim()&&W.Jt.setSavedMessageFast(r,null),v("");return}if(!d){let e=_;if(!e){let[t,r]=n.tryInferMessage(M);if(!t||!r)return;e=r}v(""),await u?.(e)}},[d,n,u,r,M,t,_]),O=(0,h.useCallback)(()=>n.sendMessageToNewThread(r,_,M,t.context,T),[n,r,t.context,M,_,T]);(0,h.useEffect)(()=>{(async()=>{let e=z(a,f,y),t=new URLSearchParams(y),n=t.get("model"),r=!n||n===s.id;e&&r&&!A.current&&(t.delete("prompt"),t.delete("model"),(0,o.BI)("dotcom_chat.activate",{target:"COPILOT_PROMPT_LOADED_FROM_URL",mode:"immersive"}),x(t,{replace:!0}),i&&(A.current=!0,await Promise.resolve(),await D()))})()},[f,y,x,a,i,s,D]);let F=(0,h.useCallback)(e=>{E(!0),b?.current&&(v(e.target.value),c?.(),N.current=0,L())},[L,c,b]),U=(0,h.useCallback)(async()=>{await n.stopStreaming(),null!=r&&(n.startThreadReload(),await new Promise(e=>{j.current=setTimeout(()=>e(r),6e3)}),I.current=await n.fetchMessages(r,!0,!0))},[n,r]);return(0,h.useEffect)(()=>{I.current&&(I.current(),I.current=()=>{})},[t.messages]),(0,h.useEffect)(()=>()=>{j.current&&(clearTimeout(j.current),j.current=null),n.cancelThreadReload(),I.current=()=>{}},[n]),{typingHasStarted:S,textAreaRef:b,textareaPreviewRef:w,textAreaPreviewContainerRef:R,text:_,setText:v,handleSubmit:D,handleSubmitToNewThread:O,handleScroll:L,handleChange:F,handleStop:U,handleFocus:e=>{e.currentTarget.selectionStart>0||e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)}}}(a);eg[13]!==e$||eg[14]!==eM?(c={inputRef:eM,fallbackEventHandler:e$},eg[13]=e$,eg[14]=eM,eg[15]=c):c=eg[15];let eV=(0,N.H)(c);eg[16]!==eV||eg[17]!==e.figmaAuthUrl||eg[18]!==eM?(d={figmaAuthUrl:e.figmaAuthUrl,textAreaRef:eM,emitChange:eV},eg[16]=eV,eg[17]=e.figmaAuthUrl,eg[18]=eM,eg[19]=d):d=eg[19];let{replaceUrlWithReferenceMention:eQ}=function(e){let t,n,r,a,i,o,l,c,d,u,m,h,p,f=(0,s.c)(37),{figmaAuthUrl:y,textAreaRef:x,emitChange:v}=e,S=(0,P.b)(),{currentReferences:E}=(0,g.Pk)();f[0]!==v||f[1]!==x?(t=(e,t,n)=>{if(!x.current||e===t)return;let r=n?.[0]??0,a=x.current.value.slice(r,n?.[1]),i=a.indexOf(e);for(;i>-1;){let n=i+e.length;v(t,[i+r,n+r]),i=(a=a.replace(e,t)).indexOf(e)}},f[0]=v,f[1]=x,f[2]=t):t=f[2];let C=t;f[3]!==S?(n=e=>{let{itemUrl:t}=e,n=(0,_.Vc)(t);return S.addReference(n,"url-attacher"),S.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0}),n},f[3]=S,f[4]=n):n=f[4],f[5]!==C||f[6]!==S?(r=(e,t,n)=>{let{parsedReferenceMention:r}=t;S.replaceReference(n,e);let a=O.Q.for(e);if(!a)return;let i=O.Q.stringify(r),s=O.Q.stringify(a);i!==s&&C(i,s)},a=(e,t,n)=>{let{itemUrl:r,parsedReferenceMention:a}=t;S.removeReference(n),C(O.Q.stringify(a),r)},f[5]=C,f[6]=S,f[7]=r,f[8]=a):(r=f[7],a=f[8]),f[9]!==S?(i=()=>{S.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},f[9]=S,f[10]=i):i=f[10],f[11]!==n||f[12]!==r||f[13]!==a||f[14]!==i?(o={mutationFn:$,onMutate:n,onSuccess:r,onError:a,onSettled:i},f[11]=n,f[12]=r,f[13]=a,f[14]=i,f[15]=o):o=f[15];let b=(0,k.n)(o);f[16]!==S?(l=e=>{let t=(0,_.Vc)(e);return S.addReference(t,"figma-attacher"),S.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0}),t},c=(e,t,n)=>{S.replaceReference(n,e)},f[16]=S,f[17]=l,f[18]=c):(l=f[17],c=f[18]),f[19]!==y||f[20]!==S?(d=(e,t,n)=>{n&&y&&e instanceof B?S.replaceReference(n,{type:"figma",title:"Sign in to Figma",id:`forbidden-${t}`,url:y,thumbnailUrl:"",fullImageUrl:"",authenticationRequired:!0}):S.removeReference(n)},f[19]=y,f[20]=S,f[21]=d):d=f[21],f[22]!==S?(u=()=>{S.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},f[22]=S,f[23]=u):u=f[23],f[24]!==u||f[25]!==l||f[26]!==c||f[27]!==d?(m={mutationFn:q,onMutate:l,onSuccess:c,onError:d,onSettled:u},f[24]=u,f[25]=l,f[26]=c,f[27]=d,f[28]=m):m=f[28];let w=(0,k.n)(m);f[29]!==E||f[30]!==w||f[31]!==C||f[32]!==b||f[33]!==x?(h=e=>{let t=x.current?.value.slice(...e)??"";if(/\s/.test(t))return t;let n=O.Q.fromUrl(t);n&&(E.every(e=>!O.Q.refersTo(n,e))&&b.mutate({itemUrl:t,parsedReferenceMention:n}),C(t,O.Q.stringify(n),e));let r=U.exec(t);return r&&(w.mutate(t),C(t,r[1],e)),t},f[29]=E,f[30]=w,f[31]=C,f[32]=b,f[33]=x,f[34]=h):h=f[34];let R=h;return f[35]!==R?(p={replaceUrlWithReferenceMention:R},f[35]=R,f[36]=p):p=f[36],p}(d),{isLoading:eH,addReferenceForMention:ez,addReferencesForMentions:eK}=function(){let e=(0,P.b)(),{currentReferences:t,mode:n}=(0,g.Pk)(),r=(0,k.n)({mutationFn:async e=>{let t="repository"===e.type?[e.repo]:[e.repo,(e=>{switch(e){case"issue":return"issue";case"pull-request":return"pull_request";case"discussion":return"discussion";case"thread-scoped-file":case"file":return"file"}})(e.type),e.id??""],r=await (0,L.lS)(`/copilot/chat/reference/${t.join("/")}`);if(!r.ok)throw Error(`Failed to fetch reference data (${r.status}: ${r.statusText})`);return(0,o.BI)("dotcom_chat.activate",{target:"REFERENCE_LINK_PASTE",mode:n,linkType:e.type}),await r.json()},onSuccess:t=>e.addReference(t,"chatInput")}),a=e=>{t.every(t=>!O.Q.refersTo(e,t))&&r.mutate(e)};return{isLoading:r.isPending,addReferenceForMention:a,addReferencesForMentions:e=>{let n=(0,M.l)().use(F.U,{references:t,agents:[]}).parse(e),r=0;(0,D.YR)(n,e=>{"reference-mention"===e.type&&void 0===e.data.mentionedReferenceId&&r<20&&(r++,a(e.data.referenceMention))})}}}(),eX=(0,ee.FQ)(),eJ=eI&&eX,eY=!!(eI&&eX),eZ=eE||eH||ey.isWaitingOnAttachment||!!e.submitDisabled,e0=0===eO.length;eg[20]!==eG||eg[21]!==ey.mode?(u=()=>{(0,o.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_STOP",mode:ey.mode}),eG()},eg[20]=eG,eg[21]=ey.mode,eg[22]=u):u=eg[22];let e1=u;eg[23]!==eI||eg[24]!==eT||eg[25]!==eU||eg[26]!==eX||eg[27]!==ex||eg[28]!==ev||eg[29]!==eY||eg[30]!==ey.mode||eg[31]!==ey.selectedThreadID||eg[32]!==eZ?(m=async()=>{if(eZ)return;let e=eI?`${eI.owner}/${eI.id}`:"";(0,o.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_SUBMIT",mode:ey.mode,selectedThreadId:ey.selectedThreadID,copilotSpace:e,fromSpaceUI:eX}),eY&&await ex.selectPendingThread(eI),ev&&eT(!1),eU()},eg[23]=eI,eg[24]=eT,eg[25]=eU,eg[26]=eX,eg[27]=ex,eg[28]=ev,eg[29]=eY,eg[30]=ey.mode,eg[31]=ey.selectedThreadID,eg[32]=eZ,eg[33]=m):m=eg[33];let e2=m;eg[34]!==eI||eg[35]!==eB||eg[36]!==ex||eg[37]!==eY||eg[38]!==eZ?(p=async()=>{eZ||(eY&&await ex.selectPendingThread(eI),eB())},eg[34]=eI,eg[35]=eB,eg[36]=ex,eg[37]=eY,eg[38]=eZ,eg[39]=p):p=eg[39];let e3=p;eg[40]!==ex||eg[41]!==ey.messages?(f=()=>{let e=ey.messages.findLast(nn)?.id;e&&ex.startEditingMessage(e)},eg[40]=ex,eg[41]=ey.messages,eg[42]=f):f=eg[42];let e5=f;e:{if(ey.isWaitingOnCopilot){y="Copilot is responding\u2026";break e}if(ey.defaultRecipient){y=void 0;break e}if(e_){y="Message limit reached. To continue chatting with Copilot, start a new conversation.";break e}y=eA.placeholder??"Ask anything"}let e4=y;ey.defaultRecipient&&""===eO&&!eL&&eF(`@${ey.defaultRecipient} `);let e6=(0,h.useRef)(null),[e7,e8]=(0,h.useState)(null),[e9,te]=(0,h.useState)(null);eg[43]!==ey.mode?(S=()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU",mode:ey.mode}),e8(nr)},eg[43]=ey.mode,eg[44]=S):S=eg[44];let tn=S;eg[45]!==ex||eg[46]!==ey.mode||eg[47]!==ey.skillOptions?.deepCodeSearch?(E=()=>{(0,o.BI)("dotcom_chat.activate",{target:"DEEP_CODESEARCH",mode:ey.mode}),ex.dispatch({type:"SET_DEEP_CODESEARCH",deepCodeSearch:!ey.skillOptions?.deepCodeSearch})},eg[45]=ex,eg[46]=ey.mode,eg[47]=ey.skillOptions?.deepCodeSearch,eg[48]=E):E=eg[48],ey.skillOptions?.deepCodeSearch;let tr=E,{model:ta}=(0,g.bP)("model"),ti="immersive"===ey.mode&&!!ta.capabilities?.supports?.vision;eg[49]!==eI||eg[50]!==ex||eg[51]!==ta||eg[52]!==eY||eg[53]!==e.existingFileNames||eg[54]!==ti||eg[55]!==ey?(C=async(t,n,r,a)=>{let i=new J.s(ey,ex),s=new Z.E(ex,e.existingFileNames),o=[];[...t].some(na)&&!ta.capabilities?.supports?.vision&&(ex.addAmbientError(`The ${ta.displayName} model doesn't support answering questions about images. Select a different model and try again.`),(0,Y.d)("vision_not_supported_for_model",{modelId:ta.id,uploadType:n}));let[l,c]=J.s.getAllowedFiles([...t],ta);if(ti){let e=await i.addImageAttachments(l,n,eI,eY);e&&o.push(...e)}let d=[];for(let e of c)if(await Z.E.isAttachable(e)){let t=await s.addAttachment(e,r,a);t&&o.push(t)}else d.push(e.type);return ti&&d.length>0&&(0,Y.d)("included_unsupported_file",{fileTypes:d.join(","),uploadType:n}),o},eg[49]=eI,eg[50]=ex,eg[51]=ta,eg[52]=eY,eg[53]=e.existingFileNames,eg[54]=ti,eg[55]=ey,eg[56]=C):C=eg[56];let ts=C;eg[57]!==eT||eg[58]!==ts||eg[59]!==ev||eg[60]!==eF||eg[61]!==ey.mode||eg[62]!==eO?(b=async()=>{if(!ev)return;let e=[ev],t=await ts(e,"paste",eR.current||void 0,eN.current);if(t.length>0&&t[0]?.type==="thread-scoped-file"){let e=await ev.text();eF(eO.replaceAll(e,`@${t[0].name}`)),eT(!1),(0,o.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_CONVERT",mode:ey.mode})}},eg[57]=eT,eg[58]=ts,eg[59]=ev,eg[60]=eF,eg[61]=ey.mode,eg[62]=eO,eg[63]=b):b=eg[63];let to=b;eg[64]!==eT?(j=()=>{eT(!0)},eg[64]=eT,eg[65]=j):j=eg[65];let tl=j;eg[66]!==ev||eg[67]!==ey.isWaitingOnAttachment||eg[68]!==ey.mode?(A=()=>{!ev||ey.isWaitingOnAttachment||ej.current||(ej.current=!0,(0,o.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_TRIGGER",mode:ey.mode}))},T=[ev,ey.isWaitingOnAttachment,ey.mode],eg[66]=ev,eg[67]=ey.isWaitingOnAttachment,eg[68]=ey.mode,eg[69]=A,eg[70]=T):(A=eg[69],T=eg[70]),(0,h.useEffect)(A,T),eg[71]!==eK||eg[72]!==ts||eg[73]!==ex||eg[74]!==e.existingFileNames||eg[75]!==eQ||eg[76]!==eC||eg[77]!==eM?(V=t=>{let n=t.clipboardData;if(n?.items){let r=[];for(let t=0;t<n.items.length;t++){let a=n.items[t];if(a){if("file"===a.kind){let e=a.getAsFile();e&&r.push(e)}else if("string"===a.kind&&["text","text/plain"].includes(a.type)){let t=n.getData(a.type);if(t.length>1e3&&t.length<=Z.E.getAttachmentSizeLimit())eC(()=>{ej.current=!1;let n=new File([t],"",{type:Z.x}),r=new Z.E(ex,e.existingFileNames);eS(n),eR.current=r.generateFileName(t,n.type).then(e=>eN.current=e)},1);else{eK(t);let e=eM.current?.selectionStart??0;setTimeout(()=>eQ([e,e+t.length]));return}}}}r.length>0&&(t.preventDefault(),ts(r,"paste"))}},eg[71]=eK,eg[72]=ts,eg[73]=ex,eg[74]=e.existingFileNames,eg[75]=eQ,eg[76]=eC,eg[77]=eM,eg[78]=V):V=eg[78];let tc=V;eg[79]!==ts?(X=e=>{ts(e,"drag")},eg[79]=ts,eg[80]=X):X=eg[80];let td=X,tu=e.isStreaming||ey.isWaitingOnCopilot,tm=tu?e1:void 0,th=e0?e5:void 0;eg[81]!==tn||eg[82]!==e2||eg[83]!==e3||eg[84]!==tr||eg[85]!==tm||eg[86]!==th?(en={"github:cancel":tm,"copilot-chat:send-message":e2,"copilot-chat:send-message-new-conversation":e3,"copilot-chat:add-attachment":tn,"copilot-chat:edit-last-message":th,"copilot-chat:deep-codesearch":tr},eg[81]=tn,eg[82]=e2,eg[83]=e3,eg[84]=tr,eg[85]=tm,eg[86]=th,eg[87]=en):en=eg[87],et=en;let tp="small"===e.size;eg[88]!==tp?(er=(0,v.$)(tT.container,{[tT.containerSmall]:tp}),eg[88]=tp,eg[89]=er):er=eg[89];let tf="small"===e.size?"small":"medium",tg=!!ev&&!ey.isWaitingOnAttachment;eg[90]!==to||eg[91]!==tl||eg[92]!==eH||eg[93]!==ew||eg[94]!==e.getReferenceVersion||eg[95]!==tf||eg[96]!==tg?(ea=(0,i.jsx)(tG,{className:tT.attachments,returnFocusRef:e6,tokenSize:tf,isLoading:eH,onSelectReference:ew,getReferenceVersion:e.getReferenceVersion,showConvertToFileText:tg,onConvertToFile:to,onConvertToFileDismiss:tl}),eg[90]=to,eg[91]=tl,eg[92]=eH,eg[93]=ew,eg[94]=e.getReferenceVersion,eg[95]=tf,eg[96]=tg,eg[97]=ea):ea=eg[97];let ty=!eA.supportsAutocompletion,tx=e_||e.disabled;eg[98]===Symbol.for("react.memo_cache_sentinel")?(ei=(0,w.G)("copilot-chat-input-textarea"),eg[98]=ei):ei=eg[98],eg[99]!==e$||eg[100]!==eW||eg[101]!==tc||eg[102]!==eq||eg[103]!==e4||eg[104]!==tx||eg[105]!==eO||eg[106]!==eM?(es=(0,i.jsx)("textarea",{autoFocus:!0,id:K.wg,className:tT.input,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",onPaste:tc,ref:eM,onScroll:eq,onChange:e$,onFocus:eW,placeholder:e4,value:eO,"data-react-autofocus":!0,disabled:tx,...ei}),eg[99]=e$,eg[100]=eW,eg[101]=tc,eg[102]=eq,eg[103]=e4,eg[104]=tx,eg[105]=eO,eg[106]=eM,eg[107]=es):es=eg[107],eg[108]!==ez||eg[109]!==ty||eg[110]!==es?(eo=(0,i.jsx)(tI,{onSelectReference:ez,onShowAgentsDialog:e8,hideAutocomplete:ty,children:es}),eg[108]=ez,eg[109]=ty,eg[110]=es,eg[111]=eo):eo=eg[111],eg[112]!==eO||eg[113]!==eD?(el=(0,i.jsx)(tM,{text:eO,ref:eD}),eg[112]=eO,eg[113]=eD,eg[114]=el):el=eg[114],eg[115]!==eo||eg[116]!==el||eg[117]!==eP?(ec=(0,i.jsxs)(R.tL.LimitKeybindingScope,{commandIds:t7,className:tT.inputContainer,ref:eP,children:[eo,el]}),eg[115]=eo,eg[116]=el,eg[117]=eP,eg[118]=ec):ec=eg[118];let t_=e.activeModeName||e.modes[0].name,tv=ey.skillOptions?.deepCodeSearch;return eg[119]!==tn||eg[120]!==eb||eg[121]!==e.extraToolbar||eg[122]!==e.modes||eg[123]!==e.onNewThreadSelected||eg[124]!==e.showPlanningToggle||eg[125]!==ey.thirdPartyMcpAllowed||eg[126]!==tu||eg[127]!==eZ||eg[128]!==t_||eg[129]!==tv?(ed=(0,i.jsx)(t9,{addAttachment:tn,activeModeName:t_,attachmentButtonRef:e6,deepCodeSearch:tv,modes:e.modes,stoppable:tu,submitDisabled:eZ,onNewThreadSelected:e.onNewThreadSelected,thirdPartyMcpAllowed:ey.thirdPartyMcpAllowed,isLicensedLimited:eb,extraToolbar:e.extraToolbar,showPlanningToggle:e.showPlanningToggle}),eg[119]=tn,eg[120]=eb,eg[121]=e.extraToolbar,eg[122]=e.modes,eg[123]=e.onNewThreadSelected,eg[124]=e.showPlanningToggle,eg[125]=ey.thirdPartyMcpAllowed,eg[126]=tu,eg[127]=eZ,eg[128]=t_,eg[129]=tv,eg[130]=ed):ed=eg[130],eg[131]!==er||eg[132]!==ea||eg[133]!==ec||eg[134]!==ed?(eu=(0,i.jsxs)("form",{className:er,children:[ea,ec,ed]}),eg[131]=er,eg[132]=ea,eg[133]=ec,eg[134]=ed,eg[135]=eu):eu=eg[135],eg[136]!==et||eg[137]!==eu?(em=(0,i.jsx)(R.tL,{commands:et,children:eu}),eg[136]=et,eg[137]=eu,eg[138]=em):em=eg[138],eg[139]!==e7||eg[140]!==e$||eg[141]!==e9||eg[142]!==eM?(eh=(0,i.jsx)(tt,{inputRef:eM,inputOnChange:e$,anchorRef:e6,panel:e7,onPanelChange:e8,initialRepo:e9,onRepoSelect:te}),eg[139]=e7,eg[140]=e$,eg[141]=e9,eg[142]=eM,eg[143]=eh):eh=eg[143],eg[144]!==td||eg[145]!==eJ||eg[146]!==ey.isWaitingOnAttachment?(ep=!eJ&&(0,i.jsx)(tz.A,{onFilesDrop:td,isUploading:ey.isWaitingOnAttachment}),eg[144]=td,eg[145]=eJ,eg[146]=ey.isWaitingOnAttachment,eg[147]=ep):ep=eg[147],eg[148]!==em||eg[149]!==eh||eg[150]!==ep?(ef=(0,i.jsxs)(i.Fragment,{children:[em,eh,ep]}),eg[148]=em,eg[149]=eh,eg[150]=ep,eg[151]=ef):ef=eg[151],ef},t9=(0,h.memo)(e=>{let t,n,r,a,o,l,d,u,h,p,f,g,y,x,_=(0,s.c)(47);_[0]!==e.activeModeName||_[1]!==e.modes?(t=e.modes.find(t=>t.name===e.activeModeName)||e.modes[0],_[0]=e.activeModeName,_[1]=e.modes,_[2]=t):t=_[2];let S=t,E=1===e.modes.length;return _[3]!==E?(n=(0,v.$)(tT.toolbar,{[tT.toolbarNoModes]:E}),_[3]=E,_[4]=n):n=_[4],_[5]!==S?.icon||_[6]!==S?.name||_[7]!==e?(r=e.modes.length>1&&(0,i.jsxs)("div",{className:tT.mode,children:[(0,i.jsx)("div",{className:tT.modeSelectorMobile,children:(0,i.jsxs)(c.W,{children:[(0,i.jsx)(c.W.Button,{className:tT.modeSelectButton,leadingVisual:S?.icon,variant:"invisible",trailingAction:j.TriangleDownIcon,children:S?.name}),(0,i.jsx)(c.W.Overlay,{width:"auto",children:(0,i.jsx)(m.l,{selectionVariant:"single",role:"menu","aria-label":"Item",children:e.modes.map(t=>(0,i.jsxs)(m.l.Item,{selected:S?.name===t.name,onSelect:()=>{e.onClickMode?.(t.name)},children:[(0,i.jsx)(m.l.LeadingVisual,{children:t.icon}),t.name]},t.name))})})]})}),(0,i.jsx)("div",{className:tT.modeSelectorDesktop,children:(0,i.jsx)(A.I,{className:tT.lighterSegmentedControl,"aria-label":"Mode switcher",onChange:t=>{e.modes[t]&&e.onClickMode?.(e.modes[t].name)},children:e.modes.map(t=>(0,i.jsx)(A.I.Button,{className:tT.modeButton,selected:t.name===e.activeModeName,children:t.name},t.name))})})]}),_[5]=S?.icon,_[6]=S?.name,_[7]=e,_[8]=r):r=_[8],_[9]!==e.deepCodeSearch?(a=X.W.showDeepCodeSearchButton&&(0,i.jsx)(R.N5,{commandId:"copilot-chat:deep-codesearch",icon:j.RocketIcon,variant:"invisible",tooltipDirection:"n",className:(0,v.$)({[tT.clicked]:e.deepCodeSearch})}),_[9]=e.deepCodeSearch,_[10]=a):a=_[10],_[11]!==S?.supportsSpaces?(o=X.W.spacesInputMenuSelect&&S?.supportsSpaces&&(0,i.jsx)(b,{}),_[11]=S?.supportsSpaces,_[12]=o):o=_[12],_[13]!==e.showPlanningToggle?(l=X.W.planningAgent&&e.showPlanningToggle&&(0,i.jsx)(t4,{}),_[13]=e.showPlanningToggle,_[14]=l):l=_[14],_[15]!==e.extraToolbar||_[16]!==a||_[17]!==o||_[18]!==l?(d=(0,i.jsxs)("div",{className:tT.extra,children:[a,e.extraToolbar,o,l]}),_[15]=e.extraToolbar,_[16]=a,_[17]=o,_[18]=l,_[19]=d):d=_[19],_[20]!==S?.supportsModelSwitching||_[21]!==e.isLicensedLimited||_[22]!==e.onNewThreadSelected?(u=e.onNewThreadSelected&&S?.supportsModelSwitching&&(0,i.jsx)(t5.Yb,{onNewThreadSelected:e.onNewThreadSelected,limited:e.isLicensedLimited}),_[20]=S?.supportsModelSwitching,_[21]=e.isLicensedLimited,_[22]=e.onNewThreadSelected,_[23]=u):u=_[23],_[24]!==S?.supportsMCP||_[25]!==e.thirdPartyMcpAllowed?(h=X.W.copilotMcp&&S?.supportsMCP&&e.thirdPartyMcpAllowed&&(0,i.jsx)(t3,{}),_[24]=S?.supportsMCP,_[25]=e.thirdPartyMcpAllowed,_[26]=h):h=_[26],_[27]!==S?.supportsAttachments||_[28]!==e.addAttachment||_[29]!==e.attachmentButtonRef?(p=S?.supportsAttachments&&(0,i.jsx)(T.K,{ref:e.attachmentButtonRef,icon:j.PaperclipIcon,variant:"invisible","aria-label":"Attach",onClick:e.addAttachment,"data-testid":"attachment-menu-button"}),_[27]=S?.supportsAttachments,_[28]=e.addAttachment,_[29]=e.attachmentButtonRef,_[30]=p):p=_[30],_[31]!==S?.submitLabel||_[32]!==e.stoppable||_[33]!==e.submitDisabled?(f=e.stoppable?(0,i.jsx)(nt,{}):(0,i.jsx)(ne,{disabled:e.submitDisabled,label:S?.submitLabel}),_[31]=S?.submitLabel,_[32]=e.stoppable,_[33]=e.submitDisabled,_[34]=f):f=_[34],_[35]!==p||_[36]!==f||_[37]!==h?(g=(0,i.jsxs)("div",{className:tT.toolbarButtons,children:[h,p,f]}),_[35]=p,_[36]=f,_[37]=h,_[38]=g):g=_[38],_[39]!==g||_[40]!==u?(y=(0,i.jsxs)("div",{className:tT.actions,children:[u,g]}),_[39]=g,_[40]=u,_[41]=y):y=_[41],_[42]!==y||_[43]!==n||_[44]!==r||_[45]!==d?(x=(0,i.jsxs)("div",{className:n,children:[r,d,y]}),_[42]=y,_[43]=n,_[44]=r,_[45]=d,_[46]=x):x=_[46],x});function ne(e){let t,n=(0,s.c)(3),{disabled:r,label:a}=e,o=a||"Send now";return n[0]!==r||n[1]!==o?(t=(0,i.jsx)(R.N5,{commandId:"copilot-chat:send-message",variant:"invisible",size:"medium",icon:j.PaperAirplaneIcon,"aria-label":o,disabled:r,tooltipDirection:"n"}),n[0]=r,n[1]=o,n[2]=t):t=n[2],t}function nt(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(R.N5,{...(0,w.G)("copilot-chat-stop-button"),commandId:"github:cancel",variant:"invisible",size:"medium",icon:j.SquareFillIcon,tooltipDirection:"n",className:tT.CommandIconButton}),t[0]=e):e=t[0],e}t9.displayName="ChatInputToolbar";try{t8.displayName||(t8.displayName="ChatInput")}catch{}try{ne.displayName||(ne.displayName="SubmitButton")}catch{}try{nt.displayName||(nt.displayName="StopButton")}catch{}function nn(e){return"user"===e.role}function nr(e){return"attachment-types"===e?null:"attachment-types"}function na(e){return e.type.startsWith("image/")}},81829:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(74848),a=n(21728),i=n(96540);function s(e){e.preventDefault(),e.stopPropagation()}function o(e){return e instanceof DragEvent}var l=n(71315),c=n(12004);let d=e=>{let t,n,i,s,o,l,c,d,u,m,h,p,f,g,y,x,_=(0,a.c)(17);return _[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M56.66 10.322v.002l16.824 7.846L92.44 70.254a8.75 8.75 0 0 1-5.23 11.217l-37.009 13.47a8.75 8.75 0 0 1-11.217-5.23L18.531 33.512a8.75 8.75 0 0 1 5.23-11.217z",clipRule:"evenodd"}),n=(0,r.jsx)("path",{fill:"var(--bgColor-open-muted)",fillRule:"evenodd",d:"M56.66 10.322v.002l16.824 7.846L92.44 70.254a8.75 8.75 0 0 1-5.23 11.217l-37.009 13.47a8.75 8.75 0 0 1-11.217-5.23L18.531 33.512a8.75 8.75 0 0 1 5.23-11.217z",clipRule:"evenodd"}),i=(0,r.jsx)("path",{fill:"var(--bgColor-open-emphasis)",fillRule:"evenodd",d:"m55.29 10.822.802-.293a1.46 1.46 0 0 1 1.116.049l15.73 7.335c.35.163.62.459.753.822l.294.804 18.458 50.715a8.75 8.75 0 0 1-5.23 11.217l-37.008 13.47a8.75 8.75 0 0 1-11.218-5.23L18.533 33.512a8.75 8.75 0 0 1 5.231-11.217zm.997 2.74L24.762 25.038a5.835 5.835 0 0 0-3.487 7.478l20.454 56.198a5.835 5.835 0 0 0 7.478 3.487l37.008-13.47a5.835 5.835 0 0 0 3.487-7.478L71.243 20.537l-5.482 1.996a5.82 5.82 0 0 1-4.461-.195 5.82 5.82 0 0 1-3.017-3.293z",clipRule:"evenodd",opacity:"0.12"}),_[0]=t,_[1]=n,_[2]=i):(t=_[0],n=_[1],i=_[2]),_[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)("g",{clipPath:"url(#clip0_12526_110155)",children:(0,r.jsx)("path",{fill:"var(--bgColor-open-emphasis)",fillRule:"evenodd",d:"M64.035 44.691c-.703 2.448-1.974 5.334-3.06 7.703-.93 2.029-1.94 3.575-2.932 4.66a5.46 5.46 0 0 1 .165 4.949c-.376.806-1.116 1.478-1.841 2.006-.754.549-1.631 1.04-2.446 1.445a31 31 0 0 1-3.066 1.318l-.053.02-.015.004-.004.002h-.002a1.095 1.095 0 0 1-1.388-.647v-.002l-.002-.004-.006-.015-.02-.053-.07-.196a30.973 30.973 0 0 1-.89-2.999c-.214-.885-.402-1.872-.466-2.803-.062-.895-.022-1.894.354-2.7a5.46 5.46 0 0 1 3.883-3.052c.178-1.474.697-3.268 1.635-5.314 1.092-2.383 2.494-5.198 3.94-7.294.718-1.039 1.498-1.978 2.313-2.587.804-.603 1.896-1.056 3.022-.53 1.134.53 1.46 1.673 1.497 2.667.037 1.011-.2 2.208-.548 3.422m-9.653 9.647a5.5 5.5 0 0 1 2.228 1.035c.515-.598 1.067-1.388 1.623-2.394l-3.1-1.445c-.397 1.08-.635 2.02-.751 2.804m7.55-10.25c-.61 2.121-1.702 4.662-2.733 6.928l-3.212-1.498c1.049-2.259 2.309-4.736 3.565-6.556.672-.973 1.292-1.682 1.823-2.08.541-.404.74-.318.783-.297h.003c.026.012.21.096.235.764.024.663-.136 1.594-.464 2.739m-8.986 19.408c-.682.34-1.342.627-1.862.84a29 29 0 0 1-.553-1.966c-.198-.823-.357-1.68-.41-2.441-.054-.796.02-1.336.155-1.625a3.282 3.282 0 1 1 5.949 2.774c-.135.29-.5.693-1.146 1.162-.617.45-1.375.878-2.133 1.256",clipRule:"evenodd"})}),o=(0,r.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M198.941 19.499 166.042 7.525a8.75 8.75 0 0 0-11.217 5.23L134.37 68.953a8.75 8.75 0 0 0 5.231 11.217l37.008 13.47a8.75 8.75 0 0 0 11.217-5.231l18.959-52.089z",clipRule:"evenodd"}),l=(0,r.jsx)("path",{fill:"var(--bgColor-sponsors-muted)",fillRule:"evenodd",d:"M198.941 19.499 166.042 7.525a8.75 8.75 0 0 0-11.217 5.23L134.37 68.953a8.75 8.75 0 0 0 5.231 11.217l37.008 13.47a8.75 8.75 0 0 0 11.217-5.231l18.959-52.089z",clipRule:"evenodd"}),c=(0,r.jsx)("path",{fill:"var(--bgColor-sponsors-emphasis)",fillRule:"evenodd",d:"m197.568 19.003.803.292c.363.132.659.404.823.754l7.335 15.73c.163.35.181.751.049 1.114l-.293.805-18.458 50.715a8.75 8.75 0 0 1-11.217 5.23l-37.008-13.47a8.75 8.75 0 0 1-5.231-11.217l20.454-56.197a8.75 8.75 0 0 1 11.217-5.23zm-.998 2.741L165.045 10.27a5.836 5.836 0 0 0-7.479 3.487l-20.454 56.197a5.834 5.834 0 0 0 3.487 7.478l37.008 13.47a5.836 5.836 0 0 0 7.479-3.487L203.544 36.7l-5.483-1.995a5.82 5.82 0 0 1-3.292-3.017 5.82 5.82 0 0 1-.195-4.461z",clipRule:"evenodd",opacity:"0.12"}),_[3]=s,_[4]=o,_[5]=l,_[6]=c):(s=_[3],o=_[4],l=_[5],c=_[6]),_[7]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)("g",{clipPath:"url(#clip1_12526_110155)",children:(0,r.jsx)("path",{fill:"var(--bgColor-sponsors-emphasis)",fillRule:"evenodd",d:"M179.168 44.01a2.553 2.553 0 0 1 3.393 1.235l.946 2.03a2.55 2.55 0 0 1-1.235 3.392l-16.096 7.506a2.55 2.55 0 0 1-1.259.232l-4.919-.348a1.094 1.094 0 0 1-.808-1.734l2.894-3.992c.255-.351.595-.632.988-.815zm1.41 2.16a.365.365 0 0 0-.485-.177l-2.36 1.1 1.254 2.692 2.361-1.101a.365.365 0 0 0 .176-.485zm-3.574 4.54-1.254-2.692-11.753 5.48a.36.36 0 0 0-.141.117l-1.739 2.399 2.955.209a.36.36 0 0 0 .18-.033z",clipRule:"evenodd"})}),m=(0,r.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M128.059 0H93.052A8.75 8.75 0 0 0 84.3 8.752v59.804a8.75 8.75 0 0 0 8.752 8.751h39.383a8.75 8.75 0 0 0 8.751-8.751v-55.43z",clipRule:"evenodd"}),h=(0,r.jsx)("path",{fill:"var(--bgColor-accent-muted)",fillRule:"evenodd",d:"M128.059 0H93.052A8.75 8.75 0 0 0 84.3 8.752v59.804a8.75 8.75 0 0 0 8.752 8.751h39.383a8.75 8.75 0 0 0 8.751-8.751v-55.43z",clipRule:"evenodd"}),d=(0,r.jsx)("path",{fill:"var(--bgColor-accent-emphasis)",fillRule:"evenodd",d:"M126.6 0h.855c.386 0 .757.154 1.031.427L140.758 12.7c.274.273.427.644.428 1.03v54.826a8.75 8.75 0 0 1-8.751 8.751H93.052a8.75 8.75 0 0 1-8.752-8.751V8.752A8.75 8.75 0 0 1 93.052 0zm0 2.917H93.052a5.835 5.835 0 0 0-5.835 5.835v59.804a5.835 5.835 0 0 0 5.835 5.834h39.383a5.834 5.834 0 0 0 5.834-5.834v-53.97h-5.834a5.82 5.82 0 0 1-4.126-1.709 5.82 5.82 0 0 1-1.709-4.125z",clipRule:"evenodd",opacity:"0.12"}),_[7]=d,_[8]=u,_[9]=m,_[10]=h):(d=_[7],u=_[8],m=_[9],h=_[10]),_[11]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)("g",{clipPath:"url(#clip2_12526_110155)",children:(0,r.jsx)("path",{fill:"var(--bgColor-accent-emphasis)",fillRule:"evenodd",d:"M104.354 31.356a.364.364 0 0 0-.364.365v15.315c0 .202.163.365.364.365h1.373l.042-.045 8.864-8.864c.962-.962 2.509-1 3.518-.088l4.801 4.344V31.72a.365.365 0 0 0-.365-.365zM122.587 47.4h-13.768l7.361-7.362a.365.365 0 0 1 .503-.013l6.269 5.672v1.338a.365.365 0 0 1-.365.365m2.553-.365V31.721a2.553 2.553 0 0 0-2.553-2.553h-18.233a2.553 2.553 0 0 0-2.552 2.553v15.315a2.553 2.553 0 0 0 2.552 2.553h18.233a2.553 2.553 0 0 0 2.553-2.553m-15.316-10.575a.729.729 0 1 1-1.458 0 .729.729 0 0 1 1.458 0m2.188 0a2.917 2.917 0 1 1-5.834 0 2.917 2.917 0 0 1 5.834 0",clipRule:"evenodd"})}),_[11]=p):p=_[11],_[12]===Symbol.for("react.memo_cache_sentinel")?(f=(0,r.jsx)("clipPath",{id:"clip0_12526_110155",children:(0,r.jsx)("path",{fill:"var(--bgColor-default)",d:"m41.466 45.344 21.93-7.982 7.982 21.93-21.93 7.982z"})}),_[12]=f):f=_[12],_[13]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)("clipPath",{id:"clip1_12526_110155",children:(0,r.jsx)("path",{fill:"var(--bgColor-default)",d:"m164.786 36.563 21.93 7.982-7.982 21.93-21.93-7.982z"})}),_[13]=g):g=_[13],_[14]===Symbol.for("react.memo_cache_sentinel")?(y=(0,r.jsxs)("defs",{children:[f,g,(0,r.jsx)("clipPath",{id:"clip2_12526_110155",children:(0,r.jsx)("path",{fill:"var(--bgColor-default)",d:"M101.802 27.71h23.338V51.05h-23.338z"})})]}),_[14]=y):y=_[14],_[15]!==e?(x=(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"226",height:"103",fill:"none",viewBox:"0 0 226 103",...e,children:[t,n,i,s,o,l,c,u,m,h,d,p,y]}),_[15]=e,_[16]=x):x=_[16],x};try{d.displayName||(d.displayName="DragAndDropSVG")}catch{}let u={overlay:"FullScreenDragOverlay-module__overlay--Q9gow",centeredContent:"FullScreenDragOverlay-module__centeredContent--iAFMy",text:"FullScreenDragOverlay-module__text--oftCM"};function m(e){let t,n,m,h=(0,a.c)(9),{onFilesDrop:p,isUploading:f}=e,g=void 0!==f&&f;h[0]!==g||h[1]!==p?(t=e=>{g||p(e)},h[0]=g,h[1]=p,h[2]=t):t=h[2];let y=t;h[3]!==y?(n={onFilesDrop:y,targetElement:l.XC},h[3]=y,h[4]=n):n=h[4];let{isDragging:x}=function(e){let t,n,r,l=(0,a.c)(6),{onFilesDrop:c,targetElement:d}=e,[u,m]=(0,i.useState)(!1),h=(0,i.useRef)(0);return l[0]!==c||l[1]!==d?(t=()=>{if(!d)return;let e=e=>{o(e)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer?.types.includes("Files")&&(h.current=h.current+1,1===h.current&&m(!0)))},t=e=>{e.preventDefault(),e.stopPropagation(),h.current=h.current-1,h.current<=0&&(h.current=0,m(!1))},n=e=>{if(!o(e))return;e.preventDefault(),e.stopPropagation(),h.current=0,m(!1);let t=e.dataTransfer?.files;t&&0!==t.length&&c(t)};return d.addEventListener("dragover",s),d.addEventListener("dragenter",e),d.addEventListener("dragleave",t),d.addEventListener("drop",n),()=>{d.removeEventListener("dragover",s),d.removeEventListener("dragenter",e),d.removeEventListener("dragleave",t),d.removeEventListener("drop",n)}},n=[c,d],l[0]=c,l[1]=d,l[2]=t,l[3]=n):(t=l[2],n=l[3]),(0,i.useEffect)(t,n),l[4]!==u?(r={isDragging:u},l[4]=u,l[5]=r):r=l[5],r}(n),_=null;if(g){let e;h[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.A,{size:"large"}),(0,r.jsx)("p",{className:u.text,children:"Uploading files..."})]}),h[5]=e):e=h[5],_=e}else if(x){let e;h[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d,{}),(0,r.jsx)("p",{className:u.text,children:"Drop files to upload"})]}),h[6]=e):e=h[6],_=e}return _?(h[7]!==_?(m=(0,r.jsx)("div",{className:u.overlay,children:(0,r.jsx)("div",{className:u.centeredContent,children:_})}),h[7]=_,h[8]=m):m=h[8],m):null}try{m.displayName||(m.displayName="FullScreenDragOverlay")}catch{}},35673:(e,t,n)=>{n.d(t,{UJ:()=>y,E5:()=>c,Dq:()=>d,Gj:()=>u,f1:()=>m,cB:()=>h,zc:()=>p,Cb:()=>f,hl:()=>g});var r=n(74848),a=n(21728),i=n(16255),s=n(5945),o=n(96540);let l={chatPortalContainer:"PortalContainerUtils-module__chatPortalContainer--Otmle",menuPortalContainer:"PortalContainerUtils-module__menuPortalContainer--D7AeL"},c="copilotChatMenuPortalRoot",d="copilotChatMessagesMenuPortalRoot",u="copilotChatPortalRoot",m="copilotChatTopicPickerPortalRoot",h=()=>{let e,t,n,s=(0,a.c)(3),c=(0,o.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(c.current,u)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,o.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:c,className:l.chatPortalContainer}),s[2]=n):n=s[2],n},p=()=>{let e,t,n,s=(0,a.c)(3),d=(0,o.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(d.current,c)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,o.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:d,className:l.menuPortalContainer}),s[2]=n):n=s[2],n},f=()=>{let e,t,n,s=(0,a.c)(3),l=(0,o.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(l.current,d)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,o.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:l}),s[2]=n):n=s[2],n},g=()=>{let e,t,n,s=(0,a.c)(3),l=(0,o.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(l.current,m)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,o.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:l}),s[2]=n):n=s[2],n},y=e=>{let t,n,i,l,d,u,m=(0,a.c)(10);m[0]!==e?({children:t,portalContainerName:i,...n}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i):(t=m[1],n=m[2],i=m[3]);let[h,p]=(0,o.useState)(x);if(m[4]===Symbol.for("react.memo_cache_sentinel")?(l=()=>p(!0),d=[],m[4]=l,m[5]=d):(l=m[4],d=m[5]),(0,o.useEffect)(l,d),!h)return null;let f=i||c;return m[6]!==t||m[7]!==n||m[8]!==f?(u=(0,r.jsx)(s.W.Overlay,{...n,portalContainerName:f,children:t}),m[6]=t,m[7]=n,m[8]=f,m[9]=u):u=m[9],u};try{h.displayName||(h.displayName="ChatPortalContainer")}catch{}try{p.displayName||(p.displayName="MenuPortalContainer")}catch{}try{f.displayName||(f.displayName="MessagesPortalContainer")}catch{}try{g.displayName||(g.displayName="TopicPickerPortalContainer")}catch{}try{y.displayName||(y.displayName="ActionMenuOverlay")}catch{}function x(){return"undefined"!=typeof document}},1631:(e,t,n)=>{n.d(t,{BR:()=>S,a_:()=>E,lh:()=>w});var r,a=n(74848),i=n(21728),s=n(41738),o=n(49851),l=n(38621),c=n(12004),d=n(87330),u=n(19342),m=n(34164),h=n(96540),p=n(25641),f=n(2635),g=n(33592),y=n(23967),x=n(89237),_=n(15518),v=n(26100);let S=(0,h.forwardRef)(function(e,t){let n,r,s,o,c,d,y,x,S,C,b,N=(0,i.c)(42),{reference:j,message:I,onClick:A,onRemove:T,size:k,fullWidth:L,getReferenceVersion:M}=e;N[0]!==T?(n=e=>{T&&("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),T())},N[0]=T,N[1]=n):n=N[1];let D=n,P=(0,g.b)(),O=(0,f.pn)(R),F=(0,f.A3)("selectedThreadID");N[2]!==O||N[3]!==P||N[4]!==I||N[5]!==A||N[6]!==j||N[7]!==F?(r=e=>{if(!A||(A(j,e),!e.defaultPrevented)){if(!O){if(("issue"===j.type||"pull-request"===j.type||"discussion"===j.type)&&(window.open(j.url,"_blank"),self.focus()),["file","thread-scoped-file"].includes(j.type)){let e=F?`/copilot/c/${F}`:"/copilot";e+=`?reference_id=${(0,p.Vb)(j)}`,I&&(e+=`&message_index=${I.messageIndex}`),window.open(e,"_blank");return}["repository","folder","docset","third-party","image","issue","pull-request","loop-node"].includes(j.type)||(e.preventDefault(),P.selectReference(j))}}},N[2]=O,N[3]=P,N[4]=I,N[5]=A,N[6]=j,N[7]=F,N[8]=r):r=N[8];let U=r,B=(0,f.A3)("currentTopic");N[9]!==j||N[10]!==B?(s=E(j,(0,p.P)(B)),N[9]=j,N[10]=B,N[11]=s):s=N[11];let q=s,$=(0,h.useId)();N[12]!==M||N[13]!==j?(o=M?.(j),N[12]=M,N[13]=j,N[14]=o):o=N[14];let G=o;N[15]!==j?(c=(0,p.JP)(j),N[15]=j,N[16]=c):c=N[16];let W="small"===k&&_.A.small,V=L&&_.A.fullWidth;N[17]!==W||N[18]!==V?(d=(0,m.$)(_.A.referenceToken,W,V),N[17]=W,N[18]=V,N[19]=d):d=N[19];let Q=T&&$;return N[20]!==q||N[21]!==j.type?(y=q&&(0,a.jsx)(q,{size:"small",className:(0,m.$)(_.A.icon,q===l.IssueOpenedIcon&&_.A.openIcon,q===l.GitPullRequestIcon&&_.A.openIcon,q===l.IssueClosedIcon&&_.A.closedIcon,q===l.GitPullRequestClosedIcon&&_.A.pullRequestClosedIcon,q===l.GitMergeIcon&&_.A.pullRequestMergedIcon),"data-testid":"loading"===j.type?"reference-token-loading":void 0}),N[20]=q,N[21]=j.type,N[22]=y):y=N[22],N[23]!==j?(x="loading"===j.type?(0,a.jsx)("span",{className:_.A.loadingName,children:(0,a.jsx)(u.r,{"aria-hidden":"true"})}):(0,a.jsx)("span",{className:_.A.name,children:(0,p.z$)(j)}),N[23]=j,N[24]=x):x=N[24],N[25]!==G?(S=void 0!==G&&(0,a.jsx)("span",{className:_.A.trailingVisual,children:(0,a.jsx)(v.g,{version:G})}),N[25]=G,N[26]=S):S=N[26],N[27]!==$||N[28]!==T||N[29]!==k?(C=T&&(0,a.jsx)(w,{size:k,onRemove:T,descriptionId:$}),N[27]=$,N[28]=T,N[29]=k,N[30]=C):C=N[30],N[31]!==U||N[32]!==D||N[33]!==t||N[34]!==Q||N[35]!==y||N[36]!==x||N[37]!==S||N[38]!==C||N[39]!==c||N[40]!==d?(b=(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("a",{href:c,className:d,onKeyDown:D,onClick:U,ref:t,"aria-describedby":Q,children:[y,x,S,C]})}),N[31]=U,N[32]=D,N[33]=t,N[34]=Q,N[35]=y,N[36]=x,N[37]=S,N[38]=C,N[39]=c,N[40]=d,N[41]=b):b=N[41],b});function E(e,t){switch(e.type){case"figma":return C;case"file":return l.FileIcon;case"folder":return l.FileDirectoryFillIcon;case"file-diff":return l.FileDiffIcon;case"snippet":return t&&"languageName"in e&&e.languageName&&y.Yr.has(e.languageName)?l.BookIcon:l.CodeIcon;case"repository":return l.RepoIcon;case"symbol":return l.CodeSquareIcon;case"docset":return l.BookIcon;case"commit":return l.GitCommitIcon;case"pull-request":if("pull-request"===e.type){if(e.draft&&"open"===e.state)return l.GitPullRequestDraftIcon;switch(e.state){case"open":default:return l.GitPullRequestIcon;case"closed":return l.GitPullRequestClosedIcon;case"merged":return l.GitMergeIcon}}return;case"repo-instructions":case"org-instructions":return l.NoteIcon;case"issue":if("issue"===e.type)switch(e.state){case"open":default:return l.IssueOpenedIcon;case"closed":return l.IssueClosedIcon;case"not_planned":return l.SkipIcon}return;case"draft-issue":return l.IssueDraftIcon;case"discussion":return l.CommentDiscussionIcon;case"web-search-result":if("web-search-result"===e.type)if("bing_search"===e.reference_type)return s._;else return l.GlobeIcon;return;case"thread-scoped-file":return"language"in e&&y.Yr.has(e.language)?l.MarkdownIcon:l.CodeIcon;case"loop-node":return b;case"loading":return c.A;default:return}}function C(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:_.A.figmaIconOuter,children:(0,a.jsx)(x._,{className:_.A.figmaIcon})}),t[0]=e):e=t[0],e}function b(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:_.A.nodeIconOuter,children:(0,a.jsx)(o.GS,{size:16})}),t[0]=e):e=t[0],e}let w=e=>{let t,n,r,s,o=(0,i.c)(12),{size:c,onRemove:u,descriptionId:m,onMouseOver:h,onMouseLeave:p}=e;return o[0]!==u?(t=e=>{e.stopPropagation(),e.preventDefault(),u()},o[0]=u,o[1]=t):t=o[1],o[2]!==p||o[3]!==h||o[4]!==c||o[5]!==t?(n=(0,a.jsx)(d.K,{tabIndex:-1,"aria-hidden":!0,size:c,icon:l.XIcon,"aria-label":"Remove",onClick:t,tooltipDirection:"n",variant:"invisible",className:_.A.removeButton,onMouseOver:h,onMouseLeave:p}),o[2]=p,o[3]=h,o[4]=c,o[5]=t,o[6]=n):n=o[6],o[7]!==m?(r=(0,a.jsx)("span",{hidden:!0,id:m,children:"press backspace or delete to remove"}),o[7]=m,o[8]=r):r=o[8],o[9]!==n||o[10]!==r?(s=(0,a.jsxs)(a.Fragment,{children:[n,r]}),o[9]=n,o[10]=r,o[11]=s):s=o[11],s};try{S.displayName||(S.displayName="ReferenceToken")}catch{}try{(r=Icon).displayName||(r.displayName="Icon")}catch{}try{C.displayName||(C.displayName="StylizedFigmaIcon")}catch{}try{b.displayName||(b.displayName="StylizedNodeIcon")}catch{}try{w.displayName||(w.displayName="RemoveReferenceTokenButton")}catch{}function R(e){return"immersive"===e.mode}},87086:(e,t,n)=>{n.d(t,{FZ:()=>w,X1:()=>j});var r,a=n(74848),i=n(21728),s=n(69599),o=n(53419),l=n(33544),c=n(29731),d=n(52446),u=n(79274),m=n(34164),h=n(96540),p=n(40961),f=n(26408),g=n(26875),y=n(25641),x=n(79064),_=n(2635),v=n(33592),S=n(70845),E=n(35673);let C={ActionList:"RepoSelectPanel-module__ActionList--ud9yE",emptyStateMessage:"RepoSelectPanel-module__emptyStateMessage--qQwDm"};var b=n(27844);function w(e){let t,n,r,s,o=(0,i.c)(12),{currentReferences:l}=(0,_.Pk)(),c=(0,v.b)();o[0]!==l?(n=new Set((t=l.filter(N)).map(R)),o[0]=l,o[1]=t,o[2]=n):(t=o[1],n=o[2]);let d=n,[u,m]=(0,h.useState)();o[3]!==c||o[4]!==e||o[5]!==t?(r=async n=>{m(void 0);let r=t.find(e=>e.id===n);if(r)return void c.removeReference(r);let a=await c.service.fetchRepo(n);if(!a.ok){m("Error: failed to attach repository. Please try again."),e.onOpenChange(!0);return}let i=(0,y.qS)(a.payload);c.addReference(i,"repoMenu")},o[3]=c,o[4]=e,o[5]=t,o[6]=r):r=o[6];let p=r;return o[7]!==u||o[8]!==e||o[9]!==d||o[10]!==p?(s=(0,a.jsx)(j,{...e,selectionVariant:"multiple",selectedRepoIds:d,onSelectRepo:p,description:"Choose repositories to chat about.",error:u}),o[7]=u,o[8]=e,o[9]=d,o[10]=p,o[11]=s):s=o[11],s}function R(e){return e.id}function N(e){return"repository"===e.type}function j(e){let t,n,r,y,x,v,w,R,N,j,T,k,L,M,D,P,O,F,U,B,q=(0,i.c)(54),{open:$,onOpenChange:G,submitReturnFocusRef:W,cancelReturnFocusRef:V,selectedRepoIds:Q,featuredRepoIds:H,onSelectRepo:z,selectionVariant:K,description:X,error:J,ownerDisplayLogin:Y,includeForks:Z}=e,ee=void 0===H?Q:H,{ssoOrganizations:et}=(0,_.Pk)(),[en,er]=(0,h.useState)("");q[0]!==$?(t=()=>{$||er("")},n=[$],q[0]=$,q[1]=t,q[2]=n):(t=q[1],n=q[2]),(0,h.useEffect)(t,n);let{repositories:ea,loading:ei}=(0,f.U)(en,$,void 0,Y,void 0!==Z&&Z);e:{if(ei){r="Loading repositories";break e}if(0===ea.length){r="No repositories found";break e}if(1===ea.length){r="1 repository found";break e}r=`${ea.length} repositories found`}let es=r;q[3]===Symbol.for("react.memo_cache_sentinel")?(y=e=>{er(e.currentTarget.value)},q[3]=y):y=q[3];let eo=y;t:{let e;if(!et){let e;q[4]===Symbol.for("react.memo_cache_sentinel")?(e=[],q[4]=e):e=q[4],x=e;break t}q[5]!==et?(e=et.map(A),q[5]=et,q[6]=e):e=q[6],x=e}let el=x;q[7]!==ee?(v=e=>ee.has(e.databaseId)?"featuredRepos":"nonFeaturedRepos",q[7]=ee,q[8]=v):v=q[8];let{featuredRepos:ec,nonFeaturedRepos:ed}=(0,g.O)(ea,v),[eu,em]=(0,h.useState)(!1);q[9]!==z?(w=async e=>{em(!0),await z(e),em(!1)},q[9]=z,q[10]=w):w=q[10];let eh=w;q[11]===Symbol.for("react.memo_cache_sentinel")?(R=(0,c.G)("repo-select-panel"),q[11]=R):R=q[11];let ep=u.X;q[12]!==V.current||q[13]!==G?(N=()=>{(0,p.flushSync)(()=>G(!1)),V.current?.focus(),(0,o.BI)("dotcom_chat.activate",{target:"REPOSITORY_DIALOG_CLOSE",mode:"immersive"})},q[12]=V.current,q[13]=G,q[14]=N):N=q[14],q[15]!==G||q[16]!==W.current?(j=()=>{(0,p.flushSync)(()=>G(!1)),W.current?.focus()},q[15]=G,q[16]=W.current,q[17]=j):j=q[17];let ef="multiple"===K?"Select repositories":"Select a repository",eg=el.length>0&&"border-bottom-0";q[18]!==eg?(T=(0,m.$)(eg),q[18]=eg,q[19]=T):T=q[19];let ey=!0===ei||eu;q[20]!==ey?(k=(0,a.jsx)(u.X.SearchInput,{loading:ey,onChange:eo,placeholder:"Search repositories","aria-label":"Search repositories"}),q[20]=ey,q[21]=k):k=q[21],q[22]!==T||q[23]!==k?(L=(0,a.jsx)(u.X.Header,{className:T,children:k}),q[22]=T,q[23]=k,q[24]=L):L=q[24],q[25]!==Y||q[26]!==el?(M=(void 0===Y||""===Y)&&!(0,s.G7)("global_sso_banner")&&(0,a.jsx)(l.x,{portalContainerName:E.f1,protectedOrgs:el,redirectURI:I,useFullWidthStyle:!0}),q[25]=Y,q[26]=el,q[27]=M):M=q[27],q[28]===Symbol.for("react.memo_cache_sentinel")?(D=(0,a.jsx)(E.hl,{}),q[28]=D):D=q[28],q[29]!==J?(P=J&&(0,a.jsx)(u.X.Message,{variant:"error",size:"inline",children:J}),q[29]=J,q[30]=P):P=q[30];let ex=d.l;q[31]!==es?(O=(0,a.jsx)("div",{className:"sr-only",children:es}),q[31]=es,q[32]=O):O=q[32];let e_="initial"===ei?(0,a.jsx)(u.X.Loading,{children:"Fetching repositories\u2026"}):0!==ea.length||ei?(0,a.jsxs)(a.Fragment,{children:[ec?.map(e=>(0,a.jsx)(b.W,{repo:e,onSelect:eh,selected:Q.has(e.databaseId)},e.databaseId)),ec&&ed&&(0,a.jsx)(d.l.Divider,{}),ed?.map(e=>(0,a.jsx)(b.W,{repo:e,onSelect:eh,selected:Q.has(e.databaseId)},e.databaseId))]}):(0,a.jsx)("div",{className:C.emptyStateMessage,children:(0,a.jsx)(S.O,{delay:750,children:(0,a.jsx)(u.X.Message,{variant:"empty",title:"No repositories found",children:"Try a different search term"})})});return q[33]!==ex||q[34]!==C.ActionList||q[35]!==O||q[36]!==e_?(F=(0,a.jsxs)(ex,{className:C.ActionList,children:[O,e_]}),q[33]=ex,q[34]=C.ActionList,q[35]=O,q[36]=e_,q[37]=F):F=q[37],q[38]!==ep||q[39]!==X||q[40]!==$||q[41]!==K||q[42]!==N||q[43]!==j||q[44]!==ef||q[45]!==L||q[46]!==M||q[47]!==D||q[48]!==P||q[49]!==F?(U=(0,a.jsxs)(ep,{width:"large",maxHeight:"xlarge",onCancel:N,onSubmit:j,open:$,variant:"modal",selectionVariant:K,title:ef,description:X,children:[L,M,D,P,F]}),q[38]=ep,q[39]=X,q[40]=$,q[41]=K,q[42]=N,q[43]=j,q[44]=ef,q[45]=L,q[46]=M,q[47]=D,q[48]=P,q[49]=F,q[50]=U):U=q[50],q[51]!==R||q[52]!==U?(B=(0,a.jsx)("div",{...R,children:U}),q[51]=R,q[52]=U,q[53]=B):B=q[53],B}function I(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function A(e){return e.login}try{(r=function(e){let t,n,r,s=(0,i.c)(9),{selectedThreadID:o,currentTopic:l}=(0,_.Pk)(),c=(0,v.b)();s[0]!==c||s[1]!==o?(t=async e=>{x.Jt.setSelectedTopic(o??"",e.toString()),c.clearCurrentReferences(["image","issue"]),await c.fetchCurrentRepo(e)},s[0]=c,s[1]=o,s[2]=t):t=s[2];let d=t;return s[3]!==l?(n=new Set(l?[l.id]:[]),s[3]=l,s[4]=n):n=s[4],s[5]!==d||s[6]!==e||s[7]!==n?(r=(0,a.jsx)(j,{...e,selectionVariant:"instant",selectedRepoIds:n,onSelectRepo:d,description:"Choose a repository to chat about."}),s[5]=d,s[6]=e,s[7]=n,s[8]=r):r=s[8],r}).displayName||(r.displayName="RepoTopicSelectPanel")}catch{}try{w.displayName||(w.displayName="RepoReferencesSelectPanel")}catch{}try{j.displayName||(j.displayName="RepoSelectPanel")}catch{}},27844:(e,t,n)=>{n.d(t,{W:()=>o});var r=n(74848),a=n(21728),i=n(77430),s=n(52446);function o(e){let t,n,o,l,c=(0,a.c)(14),{onSelect:d,repo:u,selected:m,trailingVisualComponent:h}=e,{databaseId:p,isInOrganization:f,nwo:g,ownerAvatarUrl:y}=u;return c[0]!==p||c[1]!==d?(t=()=>d(p),c[0]=p,c[1]=d,c[2]=t):t=c[2],c[3]!==f||c[4]!==y?(n=(0,r.jsx)(s.l.LeadingVisual,{children:(0,r.jsx)(i.r,{src:y,square:f,size:16})}),c[3]=f,c[4]=y,c[5]=n):n=c[5],c[6]!==h?(o=h&&(0,r.jsx)(s.l.TrailingVisual,{children:h}),c[6]=h,c[7]=o):o=c[7],c[8]!==g||c[9]!==m||c[10]!==t||c[11]!==n||c[12]!==o?(l=(0,r.jsxs)(s.l.Item,{onSelect:t,selected:m,children:[n,g,o]},g),c[8]=g,c[9]=m,c[10]=t,c[11]=n,c[12]=o,c[13]=l):l=c[13],l}try{o.displayName||(o.displayName="RepositoryListItem")}catch{}},26100:(e,t,n)=>{n.d(t,{g:()=>o});var r=n(74848),a=n(21728),i=n(10396);let s={version:"VersionName-module__version--FC1cb"};function o(e){let t,n=(0,a.c)(3),{"data-testid":o,version:l}=e;return n[0]!==o||n[1]!==l?(t=(0,r.jsxs)(i.A,{className:s.version,as:"span","data-testid":o,children:["v",l]}),n[0]=o,n[1]=l,n[2]=t):t=n[2],t}try{o.displayName||(o.displayName="VersionName")}catch{}},89237:(e,t,n)=>{n.d(t,{_:()=>i});var r=n(74848),a=n(21728);function i(e){let t,n,i,s,o,l=(0,a.c)(8);return l[0]!==e?({className:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsxs)("g",{clipPath:"url(#clip0_216_3161)",children:[(0,r.jsx)("path",{d:"M7.99837 7.99967C7.99837 6.52683 9.1922 5.33301 10.665 5.33301C12.1379 5.33301 13.3317 6.52683 13.3317 7.99967C13.3317 9.47252 12.1379 10.6663 10.665 10.6663C9.1922 10.6663 7.99837 9.47252 7.99837 7.99967Z",fill:"#1ABCFE"}),(0,r.jsx)("path",{d:"M2.66504 13.3337C2.66504 11.8608 3.85886 10.667 5.33171 10.667H7.99837V13.3337C7.99837 14.8065 6.80455 16.0003 5.33171 16.0003C3.85886 16.0003 2.66504 14.8065 2.66504 13.3337Z",fill:"#0ACF83"}),(0,r.jsx)("path",{d:"M7.99837 0V5.33333H10.665C12.1379 5.33333 13.3317 4.13951 13.3317 2.66667C13.3317 1.19382 12.1379 0 10.665 0H7.99837Z",fill:"#FF7262"}),(0,r.jsx)("path",{d:"M2.665 2.66667C2.665 4.13951 3.85883 5.33333 5.33167 5.33333H7.99833V0H5.33167C3.85883 0 2.665 1.19382 2.665 2.66667Z",fill:"#F24E1E"}),(0,r.jsx)("path",{d:"M2.66504 7.99967C2.66504 9.47252 3.85886 10.6663 5.33171 10.6663H7.99837V5.33301H5.33171C3.85886 5.33301 2.66504 6.52683 2.66504 7.99967Z",fill:"#A259FF"})]}),l[3]=i):i=l[3],l[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_216_3161",children:(0,r.jsx)("rect",{width:"10.6667",height:"16",fill:"white",transform:"translate(2.665)"})})}),l[4]=s):s=l[4],l[5]!==t||l[6]!==n?(o=(0,r.jsxs)("svg",{"aria-label":"Figma logo",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...n,children:[i,s]}),l[5]=t,l[6]=n,l[7]=o):o=l[7],o}try{i.displayName||(i.displayName="FigmaIcon")}catch{}},70845:(e,t,n)=>{n.d(t,{O:()=>s});var r=n(74848),a=n(21728),i=n(96540);let s=e=>{let t,n,s,o=(0,a.c)(6),{children:l,delay:c,assertive:d}=e,u=void 0===c?500:c,[m,h]=(0,i.useState)(!1);if(o[0]!==u?(t=()=>{h(!1);let e=setTimeout(()=>h(!0),u);return()=>clearTimeout(e)},n=[u,h],o[0]=u,o[1]=t,o[2]=n):(t=o[1],n=o[2]),(0,i.useEffect)(t,n),!m)return null;let p=void 0!==d&&d?"assertive":"polite";return o[3]!==l||o[4]!==p?(s=(0,r.jsx)("div",{role:"alert","aria-live":p,"aria-atomic":"true",children:l}),o[3]=l,o[4]=p,o[5]=s):s=o[5],s};try{s.displayName||(s.displayName="DelayedComponent")}catch{}},37178:(e,t,n)=>{n.d(t,{O:()=>R});var r=n(74848),a=n(21728),i=n(38621),s=n(75177),o=n(87330),l=n(63557),c=n(55847),d=n(52446),u=n(12004),m=n(30729),h=n(96540);function p(e){let t,n,i,o,l=(0,a.c)(5),{children:c}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t={overflow:"auto",maxHeight:"calc(100dvh - 64px - 52px)"},l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(n={overflow:"hidden",backgroundColor:"canvas.default"},l[1]=n):n=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(i={display:"flex",flexDirection:"column"},l[2]=i):i=l[2],l[3]!==c?(o=(0,r.jsx)(s.A,{sx:t,children:(0,r.jsx)(s.A,{sx:n,children:(0,r.jsx)(s.A,{sx:i,children:c})})}),l[3]=c,l[4]=o):o=l[4],o}function f(e){let t,n,c,d,u,m=(0,a.c)(9),{children:h,onDismiss:p}=e;return m[0]===Symbol.for("react.memo_cache_sentinel")?(t={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"16px",fontSize:1},m[0]=t):t=m[0],m[1]===Symbol.for("react.memo_cache_sentinel")?(n={display:"flex",flexDirection:"row",alignItems:"center",minWidth:0,"@media screen and (max-width: 768px)":{maxWidth:"80%"}},m[1]=n):n=m[1],m[2]!==h?(c=(0,r.jsx)(s.A,{sx:n,children:h}),m[2]=h,m[3]=c):c=m[3],m[4]!==p?(d=p&&(0,r.jsx)(o.K,{unsafeDisableTooltip:!0,"aria-label":"Dismiss",icon:i.XIcon,onClick:p,variant:"invisible",sx:{flexShrink:0}}),m[4]=p,m[5]=d):d=m[5],m[6]!==c||m[7]!==d?(u=(0,r.jsxs)(l.A,{as:"h3",sx:t,children:[c,d]}),m[6]=c,m[7]=d,m[8]=u):u=m[8],u}function g(e){let t,n,i=(0,a.c)(3),{children:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",borderTop:"1px solid var(--borderColor-default, var(--color-border-default))",backgroundColor:"canvas.subtle",px:3,py:2},i[0]=t):t=i[0],i[1]!==o?(n=(0,r.jsx)(s.A,{sx:t,children:o}),i[1]=o,i[2]=n):n=i[2],n}function y(e){let t,n,s,o,l,d,u=(0,a.c)(11),{children:p,title:f,initiallyOpen:g}=e,[y,_]=(0,h.useState)(g??!1);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>_(x),u[0]=t):t=u[0],u[1]===Symbol.for("react.memo_cache_sentinel")?(n={borderRadius:0,backgroundColor:"canvas.default",border:"none",borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",'[data-component="buttonContent"]':{justifyContent:"start"}},u[1]=n):n=u[1];let v=y?i.ChevronDownIcon:i.ChevronRightIcon;u[2]===Symbol.for("react.memo_cache_sentinel")?(s={mr:2},u[2]=s):s=u[2],u[3]!==v?(o=(0,r.jsx)(m.A,{icon:v,sx:s}),u[3]=v,u[4]=o):o=u[4],u[5]!==o||u[6]!==f?(l=(0,r.jsxs)(c.Q,{onClick:t,sx:n,children:[o,f]}),u[5]=o,u[6]=f,u[7]=l):l=u[7];let S=y&&p;return u[8]!==l||u[9]!==S?(d=(0,r.jsxs)(r.Fragment,{children:[l,S]}),u[8]=l,u[9]=S,u[10]=d):d=u[10],d}function x(e){return!e}function _(e){let t,n,i=(0,a.c)(3),{children:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={padding:3},i[0]=t):t=i[0],i[1]!==o?(n=(0,r.jsx)(s.A,{sx:t,children:o}),i[1]=o,i[2]=n):n=i[2],n}function v(e){let t,n,o,l,d,u,h,p=(0,a.c)(14),{direction:f,onExpand:g}=e;p[0]===Symbol.for("react.memo_cache_sentinel")?(t={justifyContent:"start"},p[0]=t):t=p[0],p[1]!==f?(n={borderRadius:0,backgroundColor:"canvas.default",border:"none",px:3,py:2,width:"100%",fontSize:0,fontWeight:"normal",color:"fg.muted",'[data-component="buttonContent"]':t,..."above"===f?{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"}:{borderTop:"1px solid var(--borderColor-default, var(--color-border-default))"}},p[1]=f,p[2]=n):n=p[2],p[3]===Symbol.for("react.memo_cache_sentinel")?(o={display:"flex",alignItems:"center"},p[3]=o):o=p[3];let y="below"===f?i.FoldDownIcon:i.FoldUpIcon;return p[4]===Symbol.for("react.memo_cache_sentinel")?(l={mr:2},p[4]=l):l=p[4],p[5]!==y?(d=(0,r.jsx)(m.A,{icon:y,sx:l}),p[5]=y,p[6]=d):d=p[6],p[7]!==f||p[8]!==d?(u=(0,r.jsxs)(s.A,{sx:o,children:[d,"Show content ",f]}),p[7]=f,p[8]=d,p[9]=u):u=p[9],p[10]!==g||p[11]!==n||p[12]!==u?(h=(0,r.jsx)(c.Q,{onClick:g,sx:n,children:u}),p[10]=g,p[11]=n,p[12]=u,p[13]=h):h=p[13],h}function S(e){let t,n,i=(0,a.c)(3),{children:s}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(d.l.GroupHeading,{as:"h3",children:"Reference details"}),i[0]=t):t=i[0],i[1]!==s?(n=(0,r.jsx)(d.l,{children:(0,r.jsxs)(d.l.Group,{children:[t,s]})}),i[1]=s,i[2]=n):n=i[2],n}function E(e){let t,n,i=(0,a.c)(6),{children:s,href:o,icon:l}=e;return i[0]!==l?(t=(0,r.jsx)(d.l.LeadingVisual,{children:(0,r.jsx)(m.A,{icon:l})}),i[0]=l,i[1]=t):t=i[1],i[2]!==s||i[3]!==o||i[4]!==t?(n=(0,r.jsxs)(d.l.LinkItem,{href:o,children:[t,s]}),i[2]=s,i[3]=o,i[4]=t,i[5]=n):n=i[5],n}function C(){let e,t,n=(0,a.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={display:"flex",flexDirection:"column",alignItems:"center",m:"auto",p:3},n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsxs)(s.A,{sx:e,children:[(0,r.jsx)(u.A,{sx:{mb:2}}),(0,r.jsx)("div",{children:"Loading..."})]}),n[1]=t):t=n[1],t}function b(){let e,t,n=(0,a.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={display:"flex",justifyContent:"center",p:3},n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(s.A,{sx:e,children:(0,r.jsx)(s.A,{sx:{color:"danger.fg",fontWeight:"bold"},children:"Failed to load reference details"})}),n[1]=t):t=n[1],t}function w(e){let t,n=(0,a.c)(4),{children:i,detailsError:s,detailsLoading:o}=e;return n[0]!==i||n[1]!==s||n[2]!==o?(t=s?(0,r.jsx)(b,{}):o?(0,r.jsx)(C,{}):(0,r.jsx)(r.Fragment,{children:i}),n[0]=i,n[1]=s,n[2]=o,n[3]=t):t=n[3],t}let R={Frame:p,Header:f,Body:w,Content:_,CollapsibleSubsection:y,ContentExpander:v,Details:S,DetailLink:E,SectionDivider:g};try{p.displayName||(p.displayName="Frame")}catch{}try{f.displayName||(f.displayName="Header")}catch{}try{g.displayName||(g.displayName="SectionDivider")}catch{}try{y.displayName||(y.displayName="CollapsibleSubsection")}catch{}try{_.displayName||(_.displayName="Content")}catch{}try{v.displayName||(v.displayName="ContentExpander")}catch{}try{S.displayName||(S.displayName="Details")}catch{}try{E.displayName||(E.displayName="DetailLink")}catch{}try{C.displayName||(C.displayName="Loading")}catch{}try{b.displayName||(b.displayName="Error")}catch{}try{w.displayName||(w.displayName="Body")}catch{}},41738:(e,t,n)=>{n.d(t,{_:()=>m,I:()=>d});var r=n(74848),a=n(21728),i=n(75177),s=n(84511),o=n(81246),l=n(37178);let c={"bing-icon":"WebSearchReferencePreview-module__bing-icon--lhPED"};function d(e){let t,n,c,d,h,p,f,g,y,x,_,v=(0,a.c)(19),{reference:S,onDismiss:E}=e;v[0]===Symbol.for("react.memo_cache_sentinel")?(t={textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:2},n=(0,r.jsx)(m,{}),v[0]=t,v[1]=n):(t=v[0],n=v[1]),v[2]===Symbol.for("react.memo_cache_sentinel")?(c={fontSize:0,fontWeight:400,color:"fg.muted"},v[2]=c):c=v[2],v[3]===Symbol.for("react.memo_cache_sentinel")?(d={fontSize:1,fontWeight:600,color:"fg.default"},v[3]=d):d=v[3];let C=1===S.results.length?" result ":" results ";return v[4]!==S.results.length||v[5]!==C?(h=(0,r.jsxs)(i.A,{sx:t,children:[n,(0,r.jsxs)(s.A,{sx:c,children:[(0,r.jsxs)(s.A,{sx:d,children:[S.results.length," ",C]}),"from Bing search."]})]}),v[4]=S.results.length,v[5]=C,v[6]=h):h=v[6],v[7]!==E||v[8]!==h?(p=(0,r.jsx)(l.O.Header,{onDismiss:E,children:h}),v[7]=E,v[8]=h,v[9]=p):p=v[9],v[10]===Symbol.for("react.memo_cache_sentinel")?(f={display:"flex",flexDirection:"column",px:3,gap:3,pb:3},v[10]=f):f=v[10],v[11]!==S.results?(g=S.results.map(u),v[11]=S.results,v[12]=g):g=v[12],v[13]===Symbol.for("react.memo_cache_sentinel")?(y=(0,r.jsx)(s.A,{sx:{fontSize:0,fontWeight:400},children:(0,r.jsx)(o.A,{href:"https://privacy.microsoft.com/en-us/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"})}),v[13]=y):y=v[13],v[14]!==g?(x=(0,r.jsx)(l.O.Body,{detailsError:!1,detailsLoading:!1,children:(0,r.jsxs)(i.A,{sx:f,children:[g,y]})}),v[14]=g,v[15]=x):x=v[15],v[16]!==x||v[17]!==p?(_=(0,r.jsxs)(l.O.Frame,{children:[p,x]}),v[16]=x,v[17]=p,v[18]=_):_=v[18],_}function u(e,t){return(0,r.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",gap:1,border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"6px",padding:3},children:[(0,r.jsx)(o.A,{sx:{fontWeight:600,fontSize:2},href:e.url,rel:"nofollow",children:e.title}),(0,r.jsx)("div",{children:e.excerpt}),(0,r.jsx)(i.A,{sx:{fontSize:0,color:"fg.muted"},children:e.url})]},t)}let m=()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{className:c["bing-icon"]}),t[0]=e):e=t[0],e};try{d.displayName||(d.displayName="WebSearchReferencePreview")}catch{}try{m.displayName||(m.displayName="BingIcon")}catch{}},40552:(e,t,n)=>{n.d(t,{D:()=>b});var r=n(74848),a=n(23657),i=n(84646),s=n(79634),o=n(96459),l=n(96665),c=n(46309),d=n(65029),u=n(24815),m=n(75298),h=n(96540),p=n(51563),f=n(77430),g=n(96379),y=n(5945),x=n(52446);let _={ownerDropdownOverlay:"SpacesOwnerDropdown-module__ownerDropdownOverlay--bEFXy",ownerListGroup:"SpacesOwnerDropdown-module__ownerListGroup--U2Z7L",errorListItem:"SpacesOwnerDropdown-module__errorListItem--eq64y"};function v({onSelect:e,showCaption:t=!0,required:n=!1}){let[a,i]=(0,h.useState)([]),[s,o]=(0,h.useState)(!1),[l,c]=(0,h.useState)(void 0),u=(0,h.useCallback)(t=>{c(t),e(t)},[e]),m=(0,h.useCallback)(()=>{i([]),o(!0)},[]);return(0,h.useEffect)(()=>{(async()=>{try{let e=await (0,g.lS)("/github-copilot/chat/custom_copilots_owners"),t=await e.json(),n=t?.owners;if(!e.ok||!n)return void m();i(n),n[0]&&u(n[0])}catch{m()}})()},[m,u]),(0,r.jsxs)(d.A,{children:[(0,r.jsx)(d.A.Label,{required:n,children:"Owner"}),(0,r.jsxs)(y.W,{children:[(()=>{let e=l?.name||"Choose an owner",t=l?(0,r.jsx)(f.r,{src:l.avatarUrl},l.avatarUrl):void 0;return(0,r.jsx)(y.W.Button,{"data-testid":"owner-dropdown-anchor",alignContent:"start","aria-label":e,leadingVisual:t,children:e})})(),(0,r.jsx)(y.W.Overlay,{responsiveVariant:"fullscreen",width:"large",maxHeight:"large",className:_.ownerDropdownOverlay,children:(0,r.jsx)(x.l,{children:(0,r.jsx)(x.l.Group,{className:_.ownerListGroup,children:(0,r.jsxs)(x.l,{selectionVariant:"single",children:[a&&a.map(e=>{let{name:t,avatarUrl:n,displayName:a}=e;return(0,r.jsxs)(x.l.Item,{selected:t===l?.name,onSelect:()=>u(e),children:[(0,r.jsx)(x.l.LeadingVisual,{children:(0,r.jsx)(f.r,{src:n})}),t,(0,r.jsx)(x.l.Description,{children:a})]},t)}),!a.length&&!s&&(0,r.jsx)(x.l.Item,{disabled:!0,children:"Fetching owners\u2026"},"fetching-owners"),s&&(0,r.jsx)(x.l.Item,{disabled:!0,className:_.errorListItem,children:"An error occurred while loading owners. Please reopen the dialog to try again."},"error-fetching-owners")]})})})})]}),t&&(0,r.jsx)(d.A.Caption,{children:"Where we will store your space. Once created the space is not transferable."})]})}try{v.displayName||(v.displayName="SpacesOwnerDropdown")}catch{}let S={createSpaceDialog:"CreateSpaceDialog-module__createSpaceDialog--YECfV",textAreaWrapper:"CreateSpaceDialog-module__textAreaWrapper--Y5Mtu"};var E=n(44956),C=n(53419);function b({closeDialog:e}){let t=(0,o.Z)(),n=(0,h.useRef)(null),{name:f,setName:g,defaultName:y}=(0,i.AV)(),[x,_]=(0,h.useState)(""),[b,R]=(0,h.useState)(null),[N,j]=(0,h.useState)({}),{upsertCopilotSpace:I,isPending:A}=(0,p.$)(),{copilotSpacesConfig:{maxDescriptionLength:T}}=(0,s.X)(),k=(0,h.useCallback)(e=>{let t={...N};for(let n of e)t[n]&&delete t[n];j(t)},[N]),L=(0,h.useCallback)(e=>R(e),[]);(0,h.useEffect)(()=>{n.current&&f===y&&n.current.select()},[f,y]),(0,h.useEffect)(()=>{(0,C.BI)("copilot_spaces.create_space_v3_dialog_opened",{})},[]);let M=async()=>{if(!A)try{let e=await I({name:f,description:x,ownerId:b?.id,ownerType:b?.type});j({});let n=(0,a.Cb)(e);return t(n)}catch(e){j(e??{})}},D=()=>{e()};return(0,r.jsx)(l.l,{position:{narrow:"fullscreen"},title:"New Space",onClose:e,width:"large","aria-label":"New Space",className:S.createSpaceDialog,renderFooter:()=>(0,r.jsx)(E.m,{onCancel:D,onSave:M,isLoading:A,disabled:!b}),children:(0,r.jsx)("form",{onSubmit:async e=>{e.preventDefault(),e.stopPropagation(),await M()},children:(0,r.jsxs)(c.B,{children:[(0,r.jsxs)(d.A,{children:[(0,r.jsx)(d.A.Label,{required:!0,children:"Name"}),(0,r.jsx)(u.A,{ref:n,autoFocus:!0,block:!0,"data-testid":"copilot-space-name-input",name:"copilot-space-name",value:f,onChange:e=>{g(e.target.value),k(["name","slug"])}}),N.name?(0,r.jsx)(d.A.Validation,{variant:"error",children:(0,r.jsxs)("span",{children:["Name ",N.name]})}):N.slug?(0,r.jsx)(d.A.Validation,{variant:"error",children:(0,r.jsx)("span",{children:a.j0})}):null]}),(0,r.jsx)(v,{onSelect:L,required:!0,showCaption:!1}),(0,r.jsxs)(d.A,{children:[(0,r.jsx)(d.A.Label,{required:!1,children:"Description"}),(0,r.jsx)(m.Ay,{block:!0,name:"description",value:x,rows:3,resize:"vertical",className:S.textAreaWrapper,onChange:e=>{_(e.target.value),k(["description"])}}),N.description?(0,r.jsx)(d.A.Validation,{variant:"error",children:(0,r.jsxs)("span",{children:["Description ",N.description]})}):(0,r.jsx)(w,{text:x,promptCharLimit:T})]})]})})})}function w({text:e,promptCharLimit:t}){let n=e.length>t,a=(0,r.jsxs)(r.Fragment,{children:[e.length.toLocaleString()," / ",t.toLocaleString()," characters"]});return(0,r.jsx)(r.Fragment,{children:n?(0,r.jsx)(d.A.Validation,{variant:"error",children:a}):(0,r.jsx)(d.A.Caption,{children:a})})}try{b.displayName||(b.displayName="CreateSpaceDialog")}catch{}try{w.displayName||(w.displayName="CharacterCount")}catch{}},19566:(e,t,n)=>{n.d(t,{Q:()=>eb});var r=n(74848),a=n(87330),i=n(96665),s=n(46309),o=n(65029),l=n(55847),c=n(69410),d=n(38621),u=n(96540),m=n(97564),h=n(54030),p=n(6665),f=n(19189),g=n(25556),y=n(34535),x=n(96459),_=n(20426),v=n(87826),S=n(75177),E=n(12004),C=n(30729),b=n(96379),w=n(65556);function R(e,t,n){let r=[];for(let a of t)if(a.startsWith(e)){let t=a.slice(e.length+1),i=t.indexOf("/"),s=i>0?t.slice(0,i):t,o=`${e}/${s}`;if(n&&n.some(e=>e.path===o))continue;let l={items:[],data:{contentType:o===a?"file":"directory",name:s,path:o,isClientOnly:!0}};r.push(l)}return r}let N={checkbox:"FileTreePicker-module__checkbox--uY6AK",itemContainer:"FileTreePicker-module__itemContainer--ShYuv",Box:"FileTreePicker-module__Box--RKQKr",Box_1:"FileTreePicker-module__Box_1--usRNW",Octicon:"FileTreePicker-module__Octicon--rINlU",Box_2:"FileTreePicker-module__Box_2--yFodr"};var j=n(53419);function I(e,t){let n=new Set(e);switch(t.type){case"SELECT_FILE":n.add(t.path),(0,j.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_FILE",newFileCount:n.size});break;case"DESELECT_FILE":n.delete(t.path),(0,j.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_FILE",newFileCount:n.size});break;case"SELECT_DIRECTORY":for(let e of t.paths)n.add(e);(0,j.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_DIRECTORY",newFileCount:n.size,directoryCount:t.paths.length});break;case"DESELECT_DIRECTORY":for(let e of t.paths)n.delete(e);(0,j.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_DIRECTORY",newFileCount:n.size,directoryCount:t.paths.length})}return n}function A({isActive:e,file:t,onItemSelected:n,getItemUrl:a,selectedItemRef:i,navigate:s,onRenderRow:o,getFileTrailingVisual:l,getFileIcon:c,navigateOnClick:m,isSelected:h}){let{sendRepoClickEvent:f}=(0,p.T)(),x=u.useRef(null),S=(0,y.Z)({focusRowRef:x,mouseRowRef:x}),E="submodule"===t.data.contentType,C=l?.(t.data);(0,u.useEffect)(()=>{e&&x.current&&requestAnimationFrame(()=>{x.current?.scrollIntoView({block:"center"})})},[e]);let b=u.useCallback(e=>{E?(e.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):e.metaKey||e.ctrlKey||1===e.button?(window.open(a(t.data),"_blank"),e.preventDefault()):(n?.(t.data,t),f("FILES_TREE.ITEM",{item_path:t.data.path}),m&&s(a(t.data)),e.stopPropagation())},[t,a,E,s,m,n,f]);return o?.(),(0,r.jsxs)(_.G.Item,{ref:x,onSelect:b,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,r.jsx)(_.G.LeadingVisual,{children:c?c(t.data):E?(0,r.jsx)(d.FileSubmoduleIcon,{}):(0,r.jsx)(d.FileIcon,{})}),(0,r.jsxs)("div",{className:N.itemContainer,children:[(0,r.jsx)(v.A,{className:N.checkbox,checked:h||!1,readOnly:!0,"aria-label":`Select ${t.data.name}`}),(0,r.jsx)("span",{ref:i,style:{color:E?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:(0,r.jsx)("span",{"data-testid":`${t.data.path}-file-item`,children:t.data.name})})]}),S&&(0,r.jsx)(g.m,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:x,"aria-label":t.data.name,open:!0,direction:"ne"}),!!C?.screenReaderText&&(0,r.jsx)("span",{className:"sr-only",children:C.screenReaderText}),!!C?.trailingVisual&&(0,r.jsx)(_.G.TrailingVisual,{children:C.trailingVisual})]})}let T=u.memo(A),k=u.memo(v.A);function L({clientOnlyFilePaths:e,directory:t,isActive:n,isAncestorOfActive:a,leadingPath:i,onItemSelected:s,getItemUrl:o,getFetchUrl:l,selectedItemRef:c,navigate:d,onRenderRow:m,getFileTrailingVisual:h,getFileIcon:f,navigateOnClick:x,selectedChildren:v,expandedPath:S}){let[E,C]=(0,u.useState)(a),{sendRepoClickEvent:j}=(0,p.T)(),I=u.useRef(null),A=u.useRef(null),T=(0,y.Z)({focusRowRef:A,mouseRowRef:I}),L=u.useMemo(()=>v?.filter(e=>e.startsWith(`${t.data.path}/`)),[v,t.data.path]),M=u.useMemo(()=>(function(e,t){if(!t||0===t.length)return"none";if(t.includes(e.data.path))return"all";let n=e.data.totalCount||0,r=t.filter(t=>t.startsWith(`${e.data.path}/`)).length;return 0===r?"none":r===n?"all":"partial"})(t,v),[t,v]),[D,O,U,B,q,$,G]=function(e,t,n){let[r,a]=u.useState(e.items),[i,s]=u.useState(e.data.totalCount||0),[o,l]=u.useState(!1),[c,d]=u.useState(!1),{safeSetTimeout:m}=(0,w.A)();u.useEffect(()=>{a(e.items)},[e.items]),u.useEffect(()=>{void 0!==e.data.totalCount&&s(e.data.totalCount)},[e.data.totalCount]);let h=u.useCallback(()=>{d(!1)},[]),p=u.useCallback((e,t)=>{let n=e||[...r];a(n.slice(0,100)),m(()=>{a(n),void 0!==t&&s(t)},1)},[r,m]);return[u.useCallback(async r=>{let i=new Map;if(e.data.isClientOnly){if(r){let n=R(e.data.path,r);for(let e of n)i.set(e.data.path,e);t({type:"add",folders:i,processingTime:0}),n.length>100?p(n,n.length):(a(n),s(n.length))}}else{let o=n(e.data);d(!1),l(!0);let c=Date.now(),u=await (0,b.lS)(`${o}?noancestors=1`);try{if(u.ok){let n=await u.json(),o=n.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===n.payload.tree.items.length};return(i.set(e.path,t),e.hasSimplifiedPath)?function e(t,n,r){t.data.name=t.data.name.slice(t.data.name.lastIndexOf("/")+1,t.data.name.length);let a=n.name.slice(0,n.name.lastIndexOf("/")),i=a.indexOf("/")>-1,s={path:n.path.slice(0,n.path.lastIndexOf("/")),contentType:n.contentType,name:a,hasSimplifiedPath:i},o={items:[t],data:s};return(r.set(s.path,o),i)?e(o,{...s},r):o}(t,e,i):t});if(r){let t=e.data.path,a=R(t,r,n.payload.tree.items);for(let e of(o.push(...a),a))i.set(e.data.path,e)}t({type:"add",folders:i,processingTime:Date.now()-c}),e.items=o,e.data.totalCount=n.payload.tree.totalCount,o.length>100?p(o,n.payload.tree.totalCount):(a(o),s(n.payload.tree.totalCount))}else d(!0)}catch{d(!0)}}l(!1)},[n,e,t,p]),p,r,o,c,h,i]}(t,()=>{},l),W=i?`${i}/`:"",V=G-U.length;(0,u.useEffect)(()=>{n&&I.current&&requestAnimationFrame(()=>{I.current?.scrollIntoView({block:"center"})})},[n]);let Q=u.useCallback(e=>{!e||E||B||q||!(t.items.length>100)||O(),e!==E&&C(e)},[E,B,q,t.items.length,O]),H=u.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&x?(window.open(o(t.data),"_blank"),e.preventDefault()):(s?.(t.data,t),j("FILES_TREE.ITEM",{item_path:t.data.path}),x&&d(o(t.data)),e.stopPropagation())},[t,o,d,x,s,j]);u.useEffect(()=>{a&&!E&&Q?.(!0)},[a]),u.useEffect(()=>{0===t.items.length&&E?Q?.(!1):!E&&t.autoExpand&&Q?.(!0)},[t.items.length]);let z=u.useCallback(e=>{c&&n&&c(e),I.current=e},[c,n]);if(1===t.items.length){let a=t.items[0];if(a&&"directory"===a.data.contentType)return(0,r.jsx)(P,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:W+t.data.name,inheritsActive:n,onItemSelected:s,selectedItemRef:c,getItemUrl:o,directoryNavigateOnClick:x,navigateOnClick:x,getFileTrailingVisual:h,getFileIcon:f,selectedChildren:L,expandedPath:S})}return m?.(),(0,r.jsxs)(_.G.Item,{ref:A,expanded:E,onExpandedChange:Q,current:n,onSelect:H,id:`${t.data.path}-item`,containIntrinsicSize:n?void 0:"auto 2rem",children:[(0,r.jsx)(_.G.LeadingVisual,{children:(0,r.jsx)(_.G.DirectoryIcon,{})}),(0,r.jsxs)("div",{className:N.itemContainer,children:[(0,r.jsx)(k,{className:N.checkbox,checked:"all"===M,indeterminate:"partial"===M,readOnly:!0,"aria-label":`Select ${t.data.name}`,"data-indeterminate":"partial"===M?"true":void 0}),(0,r.jsxs)("span",{ref:z,children:[W&&(0,r.jsx)("span",{children:W}),(0,r.jsx)("span",{"data-testid":`${t.data.path}-directory-item`,children:t.data.name})]})]}),T&&(0,r.jsx)(g.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:A,"aria-label":`${W}${t.data.name}`,open:!0,direction:"ne"}),(0,r.jsx)(_.G.SubTree,{state:B?"loading":q?"error":"done",children:q?(0,r.jsx)(_.G.ErrorDialog,{onRetry:D,onDismiss:$,children:"There was an error loading the folder contents."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P,{clientOnlyFilePaths:e,directoryItems:U,onItemSelected:s,selectedItemRef:c,getItemUrl:o,directoryNavigateOnClick:x,navigateOnClick:x,getFileTrailingVisual:h,getFileIcon:f,selectedChildren:L,expandedPath:S}),V>0&&(0,r.jsx)(F,{message:`${V} entries not shown`})]})})]})}let M=u.memo(L,(e,t)=>e.isActive===t.isActive&&e.isAncestorOfActive===t.isAncestorOfActive&&e.directory===t.directory&&(e.selectedChildren===t.selectedChildren||0===e.selectedChildren.length&&0===t.selectedChildren.length)&&e.expandedPath===t.expandedPath);function D({clientOnlyFilePaths:e,directoryItems:t,leadingPath:n,inheritsActive:a,onItemSelected:i,selectedItemRef:s,onRenderRow:o,getItemUrl:l,getFileTrailingVisual:c,getFileIcon:d,directoryNavigateOnClick:m,navigateOnClick:h,selectedChildren:p,expandedPath:g}){let y=(0,f.Z)(),_=(0,x.Z)(),v=u.useRef(_),S=u.useRef(i);u.useEffect(()=>{S.current=i,v.current=_},[i,_]);let E=u.useCallback((e,t)=>{S.current?.(e,t)},[]),C=u.useMemo(()=>t.map(t=>{let i=g===t.data.path,u=p?.includes(t.data.path),f=i||g.startsWith(`${t.data.path}/`),x=p?.filter(e=>e===t.data.path||e.startsWith(`${t.data.path}/`));return"directory"===t.data.contentType?(0,r.jsx)(M,{clientOnlyFilePaths:e,isActive:a||i,isAncestorOfActive:f,onItemSelected:E,leadingPath:n,directory:t,getItemUrl:l,getFetchUrl:y.getItemUrl,selectedItemRef:f?s:void 0,navigate:_,onRenderRow:o,navigateOnClick:m,getFileTrailingVisual:c,getFileIcon:d,itemCount:t.items.length,isSelected:u,selectedChildren:x,expandedPath:g},t.data.name):(0,r.jsx)(T,{onItemSelected:E,file:t,isActive:i,getItemUrl:l,selectedItemRef:i?s:void 0,navigate:_,navigateOnClick:h,onRenderRow:o,getFileTrailingVisual:c,getFileIcon:d,isSelected:u},t.data.name)}),[t,g,p,e,a,E,n,l,y.getItemUrl,s,_,o,m,c,d,h]);return(0,r.jsx)(r.Fragment,{children:C})}let P=u.memo(D);function O(e){let{clientOnlyFilePaths:t,rootItems:n,fetchError:a,loading:i,onRenderRow:s,getItemUrl:o,getFileTrailingVisual:l,getFileIcon:c,expandedPath:d,onSelectionChange:m}=e,[h,p]=(0,u.useReducer)(I,new Set),f=e.selectedItems||h,g=(0,u.useCallback)(e=>{let t=new Set;if(t.add(e.data.path),"directory"===e.data.contentType)for(let n of e.items)for(let e of g(n))t.add(e);return Array.from(t)},[]),y=(0,u.useCallback)((e,t)=>{let n=t?{type:"DESELECT_FILE",path:e}:{type:"SELECT_FILE",path:e};m?m(I(f,n)):p(n)},[m,f]),x=(0,u.useCallback)((e,t)=>{let n=g(e),r=t?{type:"DESELECT_DIRECTORY",paths:n}:{type:"SELECT_DIRECTORY",paths:n};m?m(I(f,r)):p(r)},[g,m,f]),v=(0,u.useCallback)((e,t)=>{if("directory"===e.contentType){let e=g(t).every(e=>f.has(e));x(t,e)}else y(e.path,f.has(e.path))},[g,x,y,f]),C=(0,u.useCallback)(e=>{1===e.button&&e.preventDefault()},[]);return(0,r.jsx)(S.A,{onMouseDown:C,sx:{...e.sx},"data-testid":"repos-file-tree-container",className:N.Box,children:i?(0,r.jsxs)("div",{className:N.Box_1,children:[(0,r.jsx)(E.A,{"aria-label":"Loading file tree"}),(0,r.jsx)("span",{className:"fgColor-muted",children:"Fetching files..."})]}):(0,r.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,r.jsxs)(_.G,{"aria-label":"Files",children:[a&&(0,r.jsx)(F,{message:"Some files could not be loaded."}),(0,r.jsx)(P,{clientOnlyFilePaths:t,directoryItems:n,onItemSelected:v,selectedChildren:f?Array.from(f):[],selectedItemRef:e.selectedItemRef,onRenderRow:s,directoryNavigateOnClick:e.directoryNavigateOnClick,navigateOnClick:e.navigateOnClick,getItemUrl:o,getFileTrailingVisual:l,getFileIcon:c,expandedPath:d})]})})})}function F({message:e}){return(0,r.jsxs)(_.G.Item,{id:"error-tree-row",children:[(0,r.jsx)(_.G.LeadingVisual,{children:(0,r.jsx)(C.A,{icon:d.AlertFillIcon,className:N.Octicon})}),(0,r.jsx)("div",{className:N.Box_2,children:e||"Couldn't load."})]})}try{A.displayName||(A.displayName="WrappedFileTreeRow")}catch{}try{T.displayName||(T.displayName="FileTreeRow")}catch{}try{k.displayName||(k.displayName="MemoizedCheckbox")}catch{}try{L.displayName||(L.displayName="WrappedDirectoryTreeRow")}catch{}try{M.displayName||(M.displayName="DirectoryTreeRow")}catch{}try{D.displayName||(D.displayName="WrappedDirectoryContents")}catch{}try{P.displayName||(P.displayName="DirectoryContents")}catch{}try{O.displayName||(O.displayName="FileTreePicker")}catch{}try{F.displayName||(F.displayName="ErrorTreeRow")}catch{}var U=n(87086),B=n(78314),q=n(31078),$=n(53552),G=n(64375),W=n(29731),V=n(7808),Q=n(64642),H=n(65787),z=n(25407),K=n(66108),X=n(94195),J=n(11683),Y=n(82678),Z=n(52446),ee=n(9745),et=n(91385),en=n(70170),er=n(37272),ea=n(71315),ei=n(24815),es=n(34164);let eo={TextInput:"FilesSearchBox-module__TextInput--o9VJM",Box:"FilesSearchBox-module__Box--_nCUu"},el=u.forwardRef(({ariaActiveDescendant:e,ariaControls:t,ariaExpanded:n,ariaHasPopup:a,className:i,onBlur:s,onFocus:o,onKeyDown:l,onPreload:c,onSearch:m,query:h,searchPlaceholder:f,loading:g,sx:y},x)=>{let{sendRepoClickEvent:_}=(0,p.T)(),[v,S]=u.useState(h),E=u.useRef((0,en.s)(e=>m(e),250));u.useEffect(()=>{S(h)},[h]);let C=h?(0,r.jsx)(ei.A.Action,{onClick:()=>{_("FILE_TREE.CANCEL_SEARCH"),m("")},icon:d.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,r.jsx)(ei.A,{autoFocus:ec(),className:(0,es.$)(i,eo.TextInput),ref:x,value:v,onKeyDown:l,onChange:e=>{S(e.target.value),c(),E.current(e.target.value)},sx:y,"aria-label":f||"Go to file","aria-activedescendant":e,role:a?"combobox":void 0,"aria-controls":t,"aria-expanded":n,"aria-haspopup":a?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:f||"Go to file",loading:""!==h&&g,leadingVisual:d.SearchIcon,trailingAction:C,trailingVisual:C?void 0:()=>(0,r.jsx)(er.E,{children:(0,r.jsx)("div",{className:eo.Box,children:(0,r.jsx)("kbd",{children:"t"})})}),onFocus:e=>{c(),e.target.select(),o?.(e)},onBlur:s,onClick:()=>_("FILE_TREE.SEARCH_BOX")})});function ec(){return"1"===new URLSearchParams(ea.fV.search).get("search")}el.displayName="FilesSearchBox";let ed={Box:"FileResultsList-module__Box--cUmDY",ActionList:"FileResultsList-module__ActionList--kDNEZ",FilesSearchBox:"FileResultsList-module__FilesSearchBox--KW9Zl",HighlightMatch:"FileResultsList-module__HighlightMatch--Jy_cG",Octicon:"FileResultsList-module__Octicon--PvMf4"},eu={excludeDirectories:!1,excludeSeeAllResults:!1};function em({actionListSx:e,additionalResults:t,className:n,commitOid:a,config:i=eu,findFileWorkerPath:s,getItemUrl:o,onRenderRow:l,onItemSelected:d,searchBoxRef:m,sx:g}){let{excludeDirectories:y,excludeSeeAllResults:_}=i,{query:v,setQuery:E}=(0,q.JS)(),C=(0,B.t)(),b=u.useRef(null),w=m??b,[R,N]=u.useState(v.length>0),[j,I]=u.useState(!!v),{list:A,directories:T,loading:k,error:L}=(0,h.o)(a,R,!!y),{path:M}=(0,$.eu)(),{getUrl:D}=(0,f.Z)(),{queryText:P,queryLine:O}=function(e){let t=(e=e.replaceAll(" ","")).indexOf(":");return t>=0?{queryText:e.substring(0,t),queryLine:parseInt(e.substring(t+1),10)}:{queryText:e,queryLine:void 0}}(v),{matches:F,clearMatches:U}=function(e,t,n,r){let[a,i]=u.useState(),s=u.useRef(""),o=u.useRef(),{sendStats:l}=(0,p.T)(),c=u.useRef(!1),d=u.useCallback(()=>{let e=new V.z(n,Q.j);e.onmessage=({data:e})=>{c.current=!1,i(e.list),s.current=e.query,e.startTime&&l("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},o.current=e},[l,n]);return u.useEffect(()=>{if(r)return d(),function(){o.current?.terminate()}},[d,r]),u.useEffect(()=>{if(e.length&&t){c.current&&(o.current?.terminate(),d());let n=s.current&&t.startsWith(s.current);c.current=!0,o.current?.postMessage({baseList:n&&a||e,query:t,startTime:performance.now()})}},[e,t,d]),{matches:a,clearMatches:()=>i(void 0)}}((0,u.useMemo)(()=>[...A,...t??[]].sort(),[t,A]),P,s,R),{sendRepoClickEvent:G}=(0,p.T)(),W=(0,x.Z)(),[K,et]=u.useState(0),[en,er]=u.useState(()=>ec()),ea=u.useRef(null),ei=u.useRef(null),es="file-results-list",{sendRepoKeyDownEvent:eo}=(0,p.T)(),{screenSize:em}=(0,X.lm)(),eh=i.enableOverlay??em>=X.Gy.large,ep=u.useCallback(e=>{G("FILE_TREE.SEARCH_RESULT_CLICK"),d?.(e),I(!1)},[G,d]),ef=(e,t,n)=>o?o(e,t,n):D({path:e,action:t?"tree":"blob",hash:n}),{containerRef:ey}=(0,Y.G)({bindKeys:J.z0.ArrowVertical|J.z0.HomeAndEnd,focusInStrategy:"previous"},[k,L]);u.useEffect(()=>{v||I(!1)},[v]),u.useEffect(()=>{document.activeElement!==w.current&&eh&&I(!1)},[M,w,eh]);let ex=F?.slice(0,20)||[],e_=F&&F.length>ex.length,ev=!i.disableNavigation,eS=ei.current?.getBoundingClientRect().width,eE=(0,r.jsx)(S.A,{sx:{maxHeight:eh?"180px":"100% !important",width:eh?eS:"100%"},className:ed.Box,children:L?(0,r.jsx)(c.A,{variant:"danger",className:"m-3",children:"Failed to search"}):(0,r.jsxs)(Z.l,{ref:ey,sx:{p:eh?2:3,pr:3*!!eh,pt:eh?3:"2px !important",...e},role:"listbox",className:ed.ActionList,children:[!k&&ex.map((e,t)=>{let n=T.includes(e),a=ef(e,n,O?`L${O}`:"");return(0,r.jsx)(eg,{active:!1,index:t,focused:en&&K===t,match:e,onRender:l,query:P,onClick:ep,isDirectory:n,to:a,useOverlay:eh,listRef:ey,noAnchor:i.disableNavigation},e)}),0===ex.length&&(0,r.jsx)("div",{role:"status",className:"text-center fgColor-muted",children:"No matches found"})]})});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.A,{className:n,ref:ei,sx:g,children:(0,r.jsx)(el,{ariaActiveDescendant:(!eh&&v||eh&&j)&&en&&K>-1?e_&&K===ex.length?"see-all-results-link":`file-result-${K}`:void 0,ariaExpanded:eh?j:void 0,ariaHasPopup:eh,ariaControls:eh?es:void 0,ref:w,loading:k,query:v,onKeyDown:e=>{let{key:t,shiftKey:n,metaKey:r,altKey:a,ctrlKey:i}=e;if(!n&&!r&&!a){if("Escape"===t)v?(eo("FILE_TREE.CANCEL_SEARCH"),E(""),U()):document.activeElement&&document.activeElement.blur();else if(!v)return;else if("Enter"===t){if(!_&&e_&&K===ex.length)ev&&W((0,z.Y8Y)({owner:C.ownerLogin,repo:C.name,searchTerm:`path:${P}`})),d?.();else if(ex[K]){let e=ex[K];ev&&W(ef(ex[K],!1,O?`L${O}`:"")),I(!1),d?.(e)}}else if("ArrowDown"===t||i&&"n"===t){if(!_&&e_&&K>=ex.length-1){if(et(ex.length),ea.current&&ey.current){let e=(0,H.U)(ey.current);(0,J.Rt)(ea.current,e,{behavior:"instant"})}}else et(Math.min(K+1,ex.length-1));e.preventDefault();return}else if("ArrowUp"===t||i&&"p"===t){et(Math.max(K-1,0)),e.preventDefault();return}}},onPreload:()=>N(!0),onSearch:e=>{E(e),e?I(!0):(U(),I(!1)),et(0)},onBlur:e=>{ey.current?.contains(e.relatedTarget)||(I(!1),er(!1))},onFocus:()=>{v&&I(!0),er(!0)},searchPlaceholder:i.searchPlaceholder,className:ed.FilesSearchBox})}),eh&&ex.length>0&&(0,r.jsx)(ee.T,{anchorRef:ei,open:eh&&j,renderAnchor:null,onClose:()=>{I(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},align:"end",overlayProps:{id:es,role:"dialog"},children:eE}),!eh&&v&&eE]})}let eh=({active:e,focused:t,index:n,match:a,query:i,to:s,isDirectory:o,onClick:l,onRender:c,useOverlay:d,listRef:m,noAnchor:h})=>{let p=(0,et.Xq)(i,a);c?.();let f=u.useRef(null);u.useEffect(()=>{if(t&&f.current&&m?.current){let e=(0,H.U)(m.current);(0,J.Rt)(f.current,e,{behavior:"instant"})}},[t,m]);let g={};t&&(g={outline:"none",border:"2 solid",boxShadow:"0 0 0 2px #0969da"});let y={id:`file-result-${n}`,active:e,onSelect:(0,u.useCallback)(()=>{l?.(a)},[a,l]),sx:{fontWeight:"normal",":hover":{textDecoration:"none"},mx:"2px",width:"calc(100% - 4px)",...g},role:"option","data-focus-visible-added":t||void 0,tabIndex:d?-1:0},x=(0,r.jsx)("div",{className:"d-flex",children:(0,r.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,r.jsx)(ey,{text:a,positionsList:p,LeadingIcon:o?ep:ef,className:ed.HighlightMatch})})});return h?(0,r.jsx)(Z.l.Item,{...y,children:x},a):(0,r.jsx)(Z.l.LinkItem,{...y,ref:f,as:K.N,to:s,children:x},a)},ep=()=>(0,r.jsx)(C.A,{"aria-label":"Directory",icon:d.FileDirectoryFillIcon,size:"small",className:ed.Octicon}),ef=()=>(0,r.jsx)(C.A,{"aria-label":"File",icon:d.FileIcon,className:"fgColor-muted mr-2",size:"small"}),eg=u.memo(eh);function ey({className:e,text:t,positionsList:n,sx:a,LeadingIcon:i}){let s=[],o=0;for(let e of n){if(Number(e)!==e||e<o||e>t.length)continue;let n=t.slice(o,e);n&&s.push(ex(n)),o=e+1,s.push((0,r.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:t[e]},e))}return s.push(ex(t.slice(o))),(0,r.jsx)(S.A,{className:e,sx:a,children:(0,r.jsxs)(r.Fragment,{children:[i&&(0,r.jsx)(i,{}),s]})})}function ex(e){return e.replaceAll("/","/\u200B")}try{em.displayName||(em.displayName="FileResultsList")}catch{}try{eh.displayName||(eh.displayName="FileResultRow")}catch{}try{ep.displayName||(ep.displayName="DirectoryIcon")}catch{}try{ef.displayName||(ef.displayName="FileResultIcon")}catch{}try{eg.displayName||(eg.displayName="MemoizedFileResultRow")}catch{}try{ey.displayName||(ey.displayName="HighlightMatch")}catch{}let e_={dialogHeader:"MultiFilePicker-module__dialogHeader--CApsB",Box:"MultiFilePicker-module__Box--gINxM",Dialog:"MultiFilePicker-module__Dialog--ls9MF"};var ev=n(73017),eS=n(35247);function eE({currentRepo:e,setLocalFormData:t,fetchError:n,onFileCountChange:a,processingTime:i,expandedPath:s}){let[o,l]=(0,u.useState)(()=>new Set),[c,d]=(0,u.useState)(()=>new Set),{list:m,directories:p,loading:f}=(0,h.o)(e.commitOID,!0),[g,y]=(0,u.useState)([]);(0,u.useEffect)(()=>{y(function e(t,n){let r=t[n];return r?r.items.map(n=>({data:n,items:"directory"===n.contentType?e(t,n.path):[]})).sort((e,t)=>"directory"===e.data.contentType&&"directory"!==t.data.contentType?-1:"directory"!==e.data.contentType&&"directory"===t.data.contentType?1:e.data.name.localeCompare(t.data.name)):[]}(function(e){let{paths:t,directories:n}=e,r={},a=new Set(n);for(let e of(r[""]={items:[],totalCount:0},[...n].sort())){let t=e.substring(0,e.lastIndexOf("/"))||"",n={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"directory"};r[t]||(r[t]={items:[],totalCount:0}),r[t].items.push(n),r[e]||(r[e]={items:[],totalCount:0})}for(let e of t.filter(e=>!a.has(e)).sort()){let t=e.substring(0,e.lastIndexOf("/"))||"",n={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"file"};r[t]||(r[t]={items:[],totalCount:0}),r[t].items.push(n)}for(let e in r){let t=r[e];t&&t.items.sort((e,t)=>"directory"===e.contentType&&"directory"!==t.contentType?-1:"directory"!==e.contentType&&"directory"===t.contentType?1:e.name.localeCompare(t.name))}let i=e=>{let t=r[e];return t?t.items.reduce((e,t)=>"directory"===t.contentType?e+1+i(t.path):e+1,0):0};for(let e in r){let t=r[e];t&&(t.totalCount=i(e))}return r}({paths:m,directories:p}),"")),d(new Set(p))},[m,p,y,e.commitOID]),(0,u.useEffect)(()=>{let n=Array.from(o).filter(e=>!c.has(e));a?.(n.length),t(n.map(t=>({id:`${e.id}-${t}`,repositoryId:e.id,nwo:`${e.ownerLogin}/${e.name}`,filePath:t,type:"github_file"})))},[o,c,e,t,a]);let x=(0,u.useCallback)(t=>`/${e.name}/${e.ownerLogin}/tree/${e.refInfo.name}/${t.path}`,[e]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:e_.Box,children:(0,r.jsx)(O,{rootItems:g,expandedPath:s,selectedItemRef:()=>{},setRootItems:y,navigateOnClick:!1,directoryNavigateOnClick:!1,selectedItems:o,onSelectionChange:l,processingTime:i,loading:f||!1,fetchError:!!n,getItemUrl:x,sortDirectoryItems:e=>e.sort((e,t)=>e.data.name.localeCompare(t.data.name))})})})}function eC({onClose:e}){return(0,r.jsx)(a.K,{icon:d.XIcon,"aria-label":"Close",onClick:e,variant:"invisible"})}function eb({formData:e,onCancel:t,onSaveFiles:n,onSaveRepository:h,findFileWorkerPath:p,attachmentButtonRef:f,owner:g,resourceCounts:y,initialRepo:x,onRepoSelect:_,hideBackButton:v=!1}){let[S,E]=(0,u.useState)({}),[C,b]=(0,u.useState)(null),[w,R]=(0,u.useState)(x||null),[N,I]=(0,u.useState)(!0),[A,T]=(0,u.useState)(e),[k]=(0,u.useState)(0),[L,M]=(0,u.useState)(!1),[D,P]=(0,u.useState)(null),[O,F]=(0,u.useState)(""),[V,Q]=(0,u.useState)(0),H=(0,u.useRef)(!1),z=eS.W.spacesRepoContext,K=async e=>{let t;if(H.current=!0,S[e]){R(t=S[e]),_?.(t);return}try{t=await (0,m.V)(e),E(n=>({...n,[e]:t})),R(t),_?.(t),I(!1)}catch(e){b(e instanceof Error?e.message:"An unknown error occurred")}H.current=!1},X=()=>{_?.(null),R(null),T([]),I(!0)},J=!1,Y=void 0!==y;J=Y?y.currentResourceCount+V>y.maxResourceCount:V>50;let Z=async()=>{if(M(!0),z&&0===V&&w)try{(0,j.BI)("copilot-spaces.click",{target:"SAVED_REPOSITORY_FROM_FILE_PICKER"}),h({type:"repository",id:`${w.id}`,repositoryId:w.id,nwo:`${w.ownerLogin}/${w.name}`,ownerAvatarUrl:w.ownerAvatarUrl,ownerType:w.ownerType,markedForDestroy:!1});return}catch{P("Could not save repository. Please try again.")}finally{M(!1)}if(J)return void M(!1);try{(0,j.BI)("copilot-spaces.click",{target:"SAVED_FILES_FROM_FILE_PICKER"}),await n(A)}catch(t){let e="An unknown error occurred";if(t&&"object"==typeof t&&"base"in t&&"string"==typeof t.base)if(t.base.startsWith("unsupported_file_type")&&"files"in t){let n=t.files;if(1===n.length)e=`This file can't be submitted: ${n[0]}. Only supported file types are allowed.`;else{let[t,r]=[n.slice(0,3),n.slice(3)];e="One or more files can't be submitted: "+t.map(e=>(function(e,t=30){let n=e.length<=t?e:`...${e.slice(e.length-t,e.length)}`;return`<b>${n}</b>`})(e)).join(", "),r.length>0?e+=`, and ${r.length} more.`:e+=".",e+=" Only supported file types are allowed."}}else e=t.base;e.startsWith("The size of the space exceeds the current limit")&&(e="The size of the space exceeds the current limit"),P(e)}finally{M(!1)}};(0,u.useEffect)(()=>{P(null)},[A]);let ee=J&&(Y?`${y.currentResourceCount+V} / ${y.maxResourceCount} possible sources selected, add fewer files.`:"Up to 50 files can be added at a time.");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(U.X1,{selectionVariant:"instant",open:!w&&N,onOpenChange:e=>{H.current||(I(e),t())},selectedRepoIds:new Set,onSelectRepo:async e=>{e&&(T([]),(0,j.BI)("copilot-spaces.click",{target:"SELECTED_REPO_FROM_REPO_PICKER"}),await K(e))},cancelReturnFocusRef:f,submitReturnFocusRef:f,error:C??void 0,ownerDisplayLogin:g,includeForks:!0}),w&&(0,r.jsx)(i.l,{onClose:t,title:`Add files from ${w.ownerLogin}/${w.name}`,width:"large",position:{narrow:"fullscreen"},renderHeader:({onClose:e})=>(0,r.jsxs)(i.l.Header,{children:[(0,r.jsx)("div",{className:e_.dialogHeader,children:(0,r.jsx)(i.l.Title,{children:(0,r.jsxs)(s.B,{align:"center",direction:"horizontal",gap:"none",children:[!v&&(0,r.jsx)(s.B.Item,{children:(0,r.jsx)(a.K,{icon:d.ArrowLeftIcon,"aria-label":"Back",onClick:X,variant:"invisible"})}),(0,r.jsxs)(s.B.Item,{grow:!0,className:"mx-1",children:["Select folders and files in ",w.ownerLogin,"/",w.name]}),(0,r.jsx)(s.B.Item,{children:(0,r.jsx)(eC,{onClose:()=>e("close-button")})})]})})}),(0,r.jsx)(i.l.Subtitle,{className:"mt-0",children:(0,r.jsx)(B.d,{repository:w,children:(0,r.jsx)(q.Ck,{children:(0,r.jsx)($.qV,{refInfo:{name:w.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:w.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,r.jsx)(G.$,{allShortcutsEnabled:!1,children:(0,r.jsx)(em,{commitOid:w.commitOID,findFileWorkerPath:p,onItemSelected:e=>{e&&F(e)},config:{enableOverlay:!0,disableNavigation:!0,searchPlaceholder:"Search for files or folders",actionText:"Search for files or folders"}})})})})})})]}),renderFooter:()=>(0,r.jsxs)(i.l.Footer,{children:[(0,r.jsx)("div",{className:"d-flex flex-items-center",children:ee&&(0,r.jsx)(o.A.Validation,{variant:"error",children:ee})}),(0,r.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,r.jsx)(l.Q,{onClick:t,children:"Cancel"}),(0,r.jsxs)(l.Q,{...(0,W.G)("save-resource-button"),variant:"primary",onClick:Z,count:L?void 0:V||void 0,loading:L,children:["Add ",(0,r.jsx)("span",{children:z&&0===V?"repository":""})]})]})]}),renderBody:()=>(0,r.jsxs)("div",{className:"d-flex flex-column",children:[C&&(0,r.jsx)("span",{children:C}),D&&(0,r.jsx)("div",{className:"position-sticky top-0 bgColor-default flash-banner",children:(0,r.jsx)(c.A,{full:!0,variant:"danger",children:(0,r.jsx)(ev.JR,{as:"span",html:D})})}),(0,r.jsx)(B.d,{repository:w,children:(0,r.jsx)(q.Ck,{children:(0,r.jsx)($.qV,{refInfo:{name:w.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:w.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(eE,{expandedPath:O,currentRepo:w,localFormData:A,setLocalFormData:T,onFileCountChange:Q,fetchError:C,processingTime:k})})})})})]}),className:e_.Dialog})]})}try{eE.displayName||(eE.displayName="FilePickerForm")}catch{}try{eC.displayName||(eC.displayName="CloseButton")}catch{}try{eb.displayName||(eb.displayName="MultiFilePicker")}catch{}},44956:(e,t,n)=>{n.d(t,{m:()=>s});var r=n(74848),a=n(55847);let i={footerContainer:"SpaceDialogFooter-module__footerContainer--J2LGP"};function s({onSave:e,onCancel:t,isLoading:n=!1,loadingAnnouncement:s="",disabled:o=!1}){return(0,r.jsxs)("div",{className:i.footerContainer,children:[(0,r.jsx)(a.Q,{variant:"default",onClick:t,children:"Cancel"}),(0,r.jsx)(a.Q,{variant:"primary",loading:n,loadingAnnouncement:s,onClick:e,disabled:o||n,children:"Save"})]})}try{s.displayName||(s.displayName="SpaceDialogFooter")}catch{}},78314:(e,t,n)=>{n.d(t,{d:()=>o,t:()=>l});var r=n(74848),a=n(21728),i=n(96540);let s=i.createContext({});function o(e){let t,n=(0,a.c)(3),{repository:i,children:o}=e;return n[0]!==o||n[1]!==i?(t=(0,r.jsxs)(s.Provider,{value:i,children:[" ",o," "]}),n[0]=o,n[1]=i,n[2]=t):t=n[2],t}function l(){return i.useContext(s)}try{s.displayName||(s.displayName="CurrentRepositoryContext")}catch{}try{o.displayName||(o.displayName="CurrentRepositoryProvider")}catch{}},35898:(e,t,n)=>{n.d(t,{Q:()=>o,i:()=>l});var r=n(74848),a=n(21728),i=n(96540);let s=i.createContext(void 0);function o(e){let t,n=(0,a.c)(3),{user:i,children:o}=e;return n[0]!==o||n[1]!==i?(t=(0,r.jsxs)(s.Provider,{value:i,children:[" ",o," "]}),n[0]=o,n[1]=i,n[2]=t):t=n[2],t}function l(){return i.useContext(s)}try{s.displayName||(s.displayName="CurrentUserContext")}catch{}try{o.displayName||(o.displayName="CurrentUserProvider")}catch{}},65025:(e,t,n)=>{n.d(t,{r:()=>u});var r=n(74848),a=n(38621),i=n(69410),s=n(81246),o=n(30729),l=n(20263);let c={Flash:"FlashError-module__Flash--fKR6V",SafeHTMLText:"FlashError-module__SafeHTMLText--J8lL9",Link:"FlashError-module__Link--doNrG",ruleViolationsTitle:"FlashError-module__ruleViolationsTitle--rHHNU",ruleViolationRow:"FlashError-module__ruleViolationRow--ekTTM",Octicon:"FlashError-module__Octicon--U4ZWa",ruleViolationText:"FlashError-module__ruleViolationText--Oe758"};var d=n(34164);function u({prefix:e,errorMessageUsingPrefix:t,errorMessageNotUsingPrefix:n,hideRuleErrorsTitle:u,ruleErrors:m,helpUrl:h,flashRef:p}){let f=(m?.length||0)>0;return t||n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{id:"flash",variant:"danger",className:(0,d.$)("d-flex flex-items-center flex-justify-between",c.Flash),tabIndex:-1,ref:p,children:t?(0,r.jsxs)("div",{children:[e," ",(0,r.jsx)(l.BC,{className:c.SafeHTMLText,html:t}),f&&h&&(0,r.jsx)(s.A,{href:`${h}/repositories/configuring-branches-and-merges-in-your-repository/managing-rulesets/about-rulesets`,className:c.Link,children:"Learn more about rulesets."})]}):n&&(0,r.jsx)("div",{children:n})}),f&&(0,r.jsxs)("div",{className:c.Flash,children:[!u&&(0,r.jsx)("div",{className:c.ruleViolationsTitle,children:"Repository rule violations found:"}),m?.map(e=>(0,r.jsxs)("div",{className:c.ruleViolationRow,children:[(0,r.jsx)(o.A,{icon:a.XCircleFillIcon,size:16,className:c.Octicon}),(0,r.jsx)("div",{className:c.ruleViolationText,children:e})]},e))]})]}):null}try{u.displayName||(u.displayName="FlashError")}catch{}},89865:(e,t,n)=>{n.d(t,{r:()=>H,p:()=>Q});var r=n(74848),a=n(26865),i=n(30459),s=n(96540),o=n(9745),l=n(78314),c=n(21728);let d={overlay:"GlobalCopilotOverlay-module__overlay--myqTn",header:"GlobalCopilotOverlay-module__header--mBq7d",content:"GlobalCopilotOverlay-module__content--dFNx3",tasksList:"GlobalCopilotOverlay-module__tasksList--jQGZi",tasksListHeading:"GlobalCopilotOverlay-module__tasksListHeading--ADcDZ",viewAllLink:"GlobalCopilotOverlay-module__viewAllLink--vX4e3",task:"GlobalCopilotOverlay-module__task--HZEQl",taskStartDate:"GlobalCopilotOverlay-module__taskStartDate--W7QGW",messageState:"GlobalCopilotOverlay-module__messageState--ORDxQ",messageStateHeading:"GlobalCopilotOverlay-module__messageStateHeading--F5_1N",messageStateDescription:"GlobalCopilotOverlay-module__messageStateDescription--IWyBI",retryButton:"GlobalCopilotOverlay-module__retryButton--T2ZP9",animatedText:"GlobalCopilotOverlay-module__animatedText--pfozZ",dots:"GlobalCopilotOverlay-module__dots--VWKXG",dot:"GlobalCopilotOverlay-module__dot--qm9US"};var u=n(52446),m=n(89169),h=n(81246),p=n(55847),f=n(19342),g=n(12908),y=n(38621),x=n(82595),_=n(93654),v=n(47865),S=n(5106),E=n(39345),C=n(22337);function b(e){let t,n,a,i,o,l,u,m,h,p=(0,c.c)(21),{onClose:f}=e,g=(0,C.o)(),y=g?.apiURL;p[0]!==y?(t={apiURL:y},p[0]=y,p[1]=t):t=p[1];let{tasks:x,isLoading:S,isError:b}=(0,_.si)(t),w=S||!g;p[2]===Symbol.for("react.memo_cache_sentinel")?(n=[],p[2]=n):n=p[2];let[N,j]=(0,s.useState)(n),I=g?.apiURL;p[3]===Symbol.for("react.memo_cache_sentinel")?(a=(e,t)=>{j(e=>[{...t},...e])},p[3]=a):a=p[3],p[4]!==I?(i={apiURL:I,onError:a},p[4]=I,p[5]=i):i=p[5];let{createTask:T}=(0,v.Z)(i);p[6]!==f?(o=e=>{!(e.metaKey||e.ctrlKey)&&f&&f()},p[6]=f,p[7]=o):o=p[7];let M=o;return p[8]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)("div",{className:d.header,children:(0,r.jsx)("h2",{className:"f5",children:"Agent tasks"})}),p[8]=l):l=p[8],p[9]!==T?(u=(0,r.jsx)(E.T,{createTask:T,eventType:"agents_panel",showHeader:!1}),p[9]=T,p[10]=u):u=p[10],p[11]!==T||p[12]!==N||p[13]!==M||p[14]!==b||p[15]!==w||p[16]!==x?(m=w&&0===x.length?(0,r.jsx)(A,{}):(0,r.jsx)(r.Fragment,{children:b?(0,r.jsx)(L,{}):0===x.length&&0===N.length?(0,r.jsx)(k,{}):(0,r.jsx)(R,{tasks:x,failedTasks:N,setFailedTasks:j,onLinkClick:M,createTask:T})}),p[11]=T,p[12]=N,p[13]=M,p[14]=b,p[15]=w,p[16]=x,p[17]=m):m=p[17],p[18]!==m||p[19]!==u?(h=(0,r.jsxs)("div",{className:d.overlay,children:[l,(0,r.jsxs)("div",{className:d.content,children:[u,m]})]}),p[18]=m,p[19]=u,p[20]=h):h=p[20],h}let w=(0,s.memo)(function(e){let t,n,a,i,s,o,l=(0,c.c)(18),{state:h,updatedAt:p,prTitle:f,prState:g,prUrl:y,prNwo:_,prInMergeQueue:v,onLinkClick:E}=e,C=v??!1;return l[0]!==g||l[1]!==h||l[2]!==C?(n=(0,S.TO)(g,C,h),l[0]=g,l[1]=h,l[2]=C,l[3]=n):n=l[3],t=n,l[4]!==t.color||l[5]!==t.icon?(a=(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(x.I,{icon:t.icon,color:t.color})}),l[4]=t.color,l[5]=t.icon,l[6]=a):a=l[6],l[7]!==p?(i=(0,r.jsx)(m.A,{datetime:p,format:"micro",className:d.taskStartDate}),l[7]=p,l[8]=i):i=l[8],l[9]!==_||l[10]!==i?(s=(0,r.jsxs)(u.l.Description,{variant:"block",className:"no-wrap",children:[_," \xb7 ",i]}),l[9]=_,l[10]=i,l[11]=s):s=l[11],l[12]!==E||l[13]!==f||l[14]!==y||l[15]!==a||l[16]!==s?(o=(0,r.jsxs)(u.l.LinkItem,{className:d.task,href:y,onClick:E,children:[a,f,s]}),l[12]=E,l[13]=f,l[14]=y,l[15]=a,l[16]=s,l[17]=o):o=l[17],o});function R({tasks:e,failedTasks:t,setFailedTasks:n,onLinkClick:a,createTask:i}){let o=(0,s.useMemo)(()=>e.filter(e=>e.isOptimistic),[e]),l=(0,s.useMemo)(()=>e.filter(e=>!e.isOptimistic&&e.pull),[e]);return(0,r.jsx)(u.l,{showDividers:!0,className:d.tasksList,children:(0,r.jsxs)(u.l.Group,{children:[(0,r.jsxs)(u.l.GroupHeading,{as:"h3",className:d.tasksListHeading,children:["Recent tasks"," ",e&&0!==e.length&&(0,r.jsx)(h.A,{href:"/copilot/agents",className:d.viewAllLink,onClick:a,children:"View all"})]}),o.map(e=>(0,r.jsx)(I,{task:e},e.clientGeneratedId)),t.map(e=>(0,r.jsx)(N,{task:e,onRetry:()=>{let{clientGeneratedId:t,...r}=e;i(r),n(e=>e.filter(e=>e.clientGeneratedId!==t))}},e.clientGeneratedId)),l.map(e=>(0,r.jsx)(w,{state:e.latest_session_state,updatedAt:e.latest_session_updated_at,prTitle:e.pull.title,prState:e.pull.state,prUrl:e.pull.url,prNwo:e.pull.repository_nwo,prInMergeQueue:e.pull.inMergeQueue??!1,onLinkClick:a},e.pull.id))]})})}function N(e){let t,n,a,i,s=(0,c.c)(10),{task:o,onRetry:l}=e,m=`Failed task: ${o.problemStatement}`;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(y.StopIcon,{className:"fgColor-danger"})}),s[0]=t):t=s[0],s[1]!==o.nwo?(n=(0,r.jsxs)(u.l.Description,{variant:"block",className:"no-wrap",children:[o.nwo," \xb7 Failed to start"]}),s[1]=o.nwo,s[2]=n):n=s[2],s[3]!==l?(a=(0,r.jsx)(u.l.TrailingVisual,{children:(0,r.jsx)(p.Q,{as:"a",size:"small",className:d.retryButton,onClick:e=>{e.stopPropagation(),l()},children:"Retry"})}),s[3]=l,s[4]=a):a=s[4],s[5]!==m||s[6]!==n||s[7]!==a||s[8]!==o.problemStatement?(i=(0,r.jsxs)(u.l.Item,{className:d.task,"aria-label":m,children:[t,o.problemStatement,n,a]}),s[5]=m,s[6]=n,s[7]=a,s[8]=o.problemStatement,s[9]=i):i=s[9],i}function j(e){let t,n,a=(0,c.c)(3),{children:i}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsxs)("span",{className:d.dots,children:[(0,r.jsx)("span",{className:d.dot,children:"."}),(0,r.jsx)("span",{className:d.dot,children:"."}),(0,r.jsx)("span",{className:d.dot,children:"."})]}),a[0]=t):t=a[0],a[1]!==i?(n=(0,r.jsxs)("span",{className:d.animatedText,children:[i,t]}),a[1]=i,a[2]=n):n=a[2],n}function I(e){let t,n,a,i,s=(0,c.c)(7),{task:o}=e,l=`Creating task in ${o.nwo}`;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(x.I,{icon:y.DotFillIcon,color:"var(--fgColor-attention)"})}),n=(0,r.jsx)(j,{children:"Creating task"}),s[0]=t,s[1]=n):(t=s[0],n=s[1]),s[2]!==o.nwo?(a=(0,r.jsx)(u.l.Description,{variant:"block",className:"no-wrap",children:o.nwo}),s[2]=o.nwo,s[3]=a):a=s[3],s[4]!==l||s[5]!==a?(i=(0,r.jsxs)(u.l.Item,{className:d.task,"aria-label":l,children:[t,n,a]}),s[4]=l,s[5]=a,s[6]=i):i=s[6],i}function A(){let e,t=(0,c.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(u.l,{showDividers:!0,className:d.tasksList,children:(0,r.jsxs)(u.l.Group,{children:[(0,r.jsx)(u.l.GroupHeading,{as:"h3",className:d.tasksListHeading,children:(0,r.jsx)(f.r,{size:"bodySmall",width:"4.75rem"})}),Array.from({length:3},T)]})}),t[0]=e):e=t[0],e}function T(e,t){return(0,r.jsxs)(u.l.Item,{disabled:!0,children:[(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(g.N,{size:16})}),(0,r.jsx)(f.r,{maxWidth:"75%"}),(0,r.jsx)(u.l.Description,{variant:"block",children:(0,r.jsx)(f.r,{size:"bodySmall",maxWidth:"50%"})})]},t)}function k(){let e,t=(0,c.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(M,{heading:"Start a new task with Copilot",description:"Describe your task in natural language. Copilot will work in the background and open a pull request for your review.",linkHref:"https://docs.github.com/copilot/concepts/coding-agent/coding-agent",linkText:"Learn more about Copilot coding agent"}),t[0]=e):e=t[0],e}function L(){let e,t=(0,c.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(M,{showAlertIcon:!0,heading:"Tasks couldn\u2019t be loaded",description:"Try again or, if the problem persists, contact support.",linkHref:"https://githubstatus.com/",linkText:"GitHub status"}),t[0]=e):e=t[0],e}function M(e){let t,n,a,i,s,o=(0,c.c)(14),{showAlertIcon:l,heading:u,description:m,linkHref:p,linkText:f}=e,g=void 0!==l&&l;return o[0]!==g?(t=g&&(0,r.jsx)(y.AlertIcon,{className:"var(--fgColor-attention)"}),o[0]=g,o[1]=t):t=o[1],o[2]!==u||o[3]!==t?(n=(0,r.jsxs)("h3",{className:d.messageStateHeading,children:[t,u]}),o[2]=u,o[3]=t,o[4]=n):n=o[4],o[5]!==m?(a=(0,r.jsx)("p",{className:d.messageStateDescription,children:m}),o[5]=m,o[6]=a):a=o[6],o[7]!==p||o[8]!==f?(i=p&&f&&(0,r.jsx)(h.A,{href:p,inline:!0,className:"d-inline-block",children:f}),o[7]=p,o[8]=f,o[9]=i):i=o[9],o[10]!==n||o[11]!==a||o[12]!==i?(s=(0,r.jsxs)("div",{className:d.messageState,children:[n,a,i]}),o[10]=n,o[11]=a,o[12]=i,o[13]=s):s=o[13],s}try{b.displayName||(b.displayName="GlobalCopilotOverlay")}catch{}try{w.displayName||(w.displayName="TaskItem")}catch{}try{R.displayName||(R.displayName="TasksList")}catch{}try{N.displayName||(N.displayName="FailedTask")}catch{}try{j.displayName||(j.displayName="AnimatedEllipsis")}catch{}try{I.displayName||(I.displayName="OptimisticTaskItem")}catch{}try{A.displayName||(A.displayName="TasksLoadingState")}catch{}try{k.displayName||(k.displayName="TasksEmptyState")}catch{}try{L.displayName||(L.displayName="TasksErrorState")}catch{}try{M.displayName||(M.displayName="MessageState")}catch{}var D=n(63557),P=n(46309),O=n(57123);let F={popover:"CCAPopover-module__popover--UVvdp",popover_content:"CCAPopover-module__popover_content--LEcd6"};function U(e){let t,n,a,s,o,l,d,u,m,h,f=(0,c.c)(21),{showPopover:g,dismissPopover:y}=e,{sendClickAnalyticsEvent:x}=(0,i.S)();if(!g)return null;f[0]!==x?(t=()=>{x({category:"copilot-coding-agent-popover",action:"learn-more",tag:"link",group:"expand",location:"global-copilot-menu"})},f[0]=x,f[1]=t):t=f[1];let _=t;f[2]!==y||f[3]!==x?(n=()=>{x({category:"copilot-coding-agent-popover",action:"dismiss",tag:"button",group:"expand",location:"global-copilot-menu"}),y()},f[2]=y,f[3]=x,f[4]=n):n=f[4];let v=n;return f[5]===Symbol.for("react.memo_cache_sentinel")?(a=JSON.stringify({category:"copilot-coding-agent-popover",action:"visible",group:"expand",location:"global-copilot-menu"}),s=(0,r.jsx)(D.A,{as:"h3",variant:"small",className:"h5 mb-1",children:"Start a task with Copilot coding agent"}),o=(0,r.jsx)("p",{children:"Describe your task in natural language. Copilot will work in the background and open a pull request for your review."}),f[5]=a,f[6]=s,f[7]=o):(a=f[5],s=f[6],o=f[7]),f[8]!==_?(l=(0,r.jsx)(p.Q,{as:"a",href:"https://docs.github.com/copilot/concepts/coding-agent/coding-agent","aria-label":"Learn more about Copilot coding agent",onClick:_,children:"Learn more"}),f[8]=_,f[9]=l):l=f[9],f[10]!==v?(d=(0,r.jsx)(p.Q,{variant:"invisible",onClick:v,children:"Dismiss"}),f[10]=v,f[11]=d):d=f[11],f[12]!==l||f[13]!==d?(u=(0,r.jsxs)(P.B,{className:"mt-2",direction:"horizontal",gap:"condensed",children:[l,d]}),f[12]=l,f[13]=d,f[14]=u):u=f[14],f[15]!==a||f[16]!==u?(m=(0,r.jsxs)(O.A.Content,{overflow:"visible",className:F.popover_content,"data-analytics-visible":a,children:[s,o,u]}),f[15]=a,f[16]=u,f[17]=m):m=f[17],f[18]!==g||f[19]!==m?(h=(0,r.jsx)(O.A,{open:g,caret:"top",className:F.popover,children:m}),f[18]=g,f[19]=m,f[20]=h):h=f[20],h}try{U.displayName||(U.displayName="CCAPopover")}catch{}var B=n(96379),q=n(97189),$=n(97665),G=n(91865),W=n(64846),V=n(69599);let Q="toggle-copilot-overlay";function H(e){let{setValue:t}=(0,W.Q)(_.xZ),{setValue:n}=(0,W.Q)(G.ET),c=(0,C.o)(),d=(0,$.jE)(),u=(0,V.G7)("copilot_agent_prefetch_tasks"),[m,h]=(0,s.useState)(!1),{ref:p,open:f,setOpen:g}=(0,a.Mm)(e.reactPartialAnchor),{sendClickAnalyticsEvent:y}=(0,i.S)(),{repository:x,popoverAvailable:v,agentsButtonId:S}=e,E=()=>{g(!1)},[w,R]=(0,s.useState)(v||!1),N=(0,s.useCallback)(async()=>{R(!1),await (0,B.DI)("/settings/dismiss-notice/copilot_coding_agent_entry_point_popover",{method:"POST"})},[R]);return(0,s.useEffect)(()=>{f&&w&&N()},[f,N,w]),(0,s.useEffect)(()=>{f&&y({category:"copilot-coding-agent-global-dropdown",action:"open"})},[f,y]),(0,s.useEffect)(()=>{let e=()=>{let e=p.current?.nextElementSibling;!f&&e&&e instanceof HTMLElement&&e.matches('tool-tip[popover="manual"]')&&e.setAttribute("style","display: none"),g(!f)};return document.addEventListener(Q,e),()=>{document.removeEventListener(Q,e)}},[g,f,p]),(0,s.useEffect)(()=>{if(m||!u)return;let e=async()=>{try{await d.prefetchQuery({queryKey:_.ZL,queryFn:async()=>await (0,_.j)(d,t,c?.apiURL)});let e=d.getQueryData(_.ZL);if(e&&e.length>0){let t=e.filter(e=>void 0!==e.resource_id);if(t.length>0){let e=(0,G.ms)(t);await d.prefetchQuery({queryKey:["agent-sessions-pull-requests",e],queryFn:async()=>await (0,G.Iw)(t,n)})}}h(!0)}catch{}},r=document.getElementById(S??"global-copilot-agent-button");if(r)return r.addEventListener("mouseenter",e),()=>{r.removeEventListener("mouseenter",e)}},[m,d,t,n,c?.apiURL,u,S]),(0,s.useEffect)(()=>{if(!f){let e=p.current?.nextElementSibling;e&&e instanceof HTMLElement&&e.matches('tool-tip[popover="manual"]')&&e.removeAttribute("style")}},[f,p]),(0,r.jsxs)(q.Fn,{children:[(0,r.jsx)(U,{showPopover:w,dismissPopover:N}),(0,r.jsx)(o.T,{width:"large",variant:{regular:"anchored",narrow:"fullscreen"},align:"end",open:f,onOpen:()=>g(!0),onClose:E,anchorRef:p,renderAnchor:null,preventOverflow:!1,focusZoneSettings:{disabled:!0},children:(0,r.jsx)(l.d,{repository:x,children:(0,r.jsx)(b,{onClose:E})})})]})}try{H.displayName||(H.displayName="GlobalAgentsMenu")}catch{}},71555:(e,t,n)=>{n.d(t,{a:()=>A});var r=n(74848),a=n(70170),i=n(71315),s=n(83494),o=n(8625),l=n(74021),c=n(64515),d=n(16255),u=n(34164),m=n(24249),h=n(96540),p=n(52446),f=n(45221),g=n(35181),y=n(19342);let x={Overlay_0:"AutocompleteSuggestions-module__Overlay_0--LMGK_",suggestion:"AutocompleteSuggestions-module__suggestion--ted1j",ActionList_0:"AutocompleteSuggestions-module__ActionList_0--iXEKc"},_=new Set([" ",`
`]),v=new Set([".",`
`]),S=e=>"string"==typeof e?e:e.value,E=e=>"string"==typeof e?e:null===e.value?e.key:e.key??e.value,C=(...e)=>t=>{for(let n of[...e].reverse())t.isDefaultPrevented()||n?.(t)},b=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.l.Item,{disabled:!0,children:(0,r.jsx)(y.r,{})}),(0,r.jsx)(p.l.Item,{disabled:!0,children:(0,r.jsx)(y.r,{})}),(0,r.jsx)(p.l.Item,{disabled:!0,children:(0,r.jsx)(y.r,{})})]}),w=({suggestion:e,onSelect:t,isActive:n,id:a,parentRole:i})=>{let s={id:a,children:S(e),role:"menu"===i?"menuitem":"option",active:n,className:x.suggestion,"aria-selected":"listbox"===i&&!!n||void 0,onMouseDown:e=>{e.preventDefault(),t()}};return"string"==typeof e?(0,r.jsx)(p.l.Item,{...s}):e.render(s)},R=({suggestions:e,portalName:t,triggerCharCoords:n,onClose:a,onCommit:i,inputRef:s,visible:o,defaultPlacement:l,activeSuggestion:c,getSuggestionId:d,id:u,menuTitle:m,role:y})=>{let _=(0,h.useRef)(null),[v,S]=(0,h.useState)(0),[C,R]=(0,h.useState)("auto");(0,f.A)(function(){R("auto");let e=_.current?.offsetHeight??0,t=n.top+n.height,r=t+e>window.innerHeight,a=n.top-e,i=a<0,s={below:r&&!i?a:t,above:i&&!r?t:a}[l];if(Number.isNaN(s)&&(s=0),S(Math.max(0,s)),r&&i){let e="above"===l?window.innerHeight+s:window.innerHeight-s;R(`${e}px`)}},[n.top,n.height,e,o,l]);let N=(0,r.jsx)(r.Fragment,{children:"loading"===e?(0,r.jsx)(b,{}):e?.map(e=>(0,r.jsx)(w,{suggestion:e,id:d(e),onSelect:()=>i(e),isActive:c===e,parentRole:y},E(e)))}),j=(0,h.useId)();return o?(0,r.jsx)(g.Ay,{onEscape:a,onClickOutside:a,returnFocusRef:s,preventFocusOnOpen:!0,portalContainerName:t,top:v,left:n.left,ref:_,className:x.Overlay_0,children:(0,r.jsx)(p.l,{role:y,id:u,"aria-label":m?void 0:"Autocomplete suggestions","aria-labelledby":m?j:void 0,className:x.ActionList_0,style:{height:C},children:m?(0,r.jsxs)(p.l.Group,{children:[(0,r.jsx)(p.l.GroupHeading,{id:j,children:m}),N]}):N})}):(0,r.jsx)(r.Fragment,{})};try{b.displayName||(b.displayName="LoadingIndicator")}catch{}try{w.displayName||(w.displayName="SuggestionListItem")}catch{}try{R.displayName||(R.displayName="AutocompleteSuggestions")}catch{}let N={container:"InlineAutocomplete-module__container--lzMAk",fullWidth:"InlineAutocomplete-module__fullWidth--xhTmc"},j=e=>{try{return e.selectionStart}catch(e){if(e instanceof TypeError)return null;throw e}},I=()=>{},A=({triggers:e,suggestions:t,onShowSuggestions:n,onHideSuggestions:p,onSelectSuggestion:f,style:g,children:y,tabInsertsSuggestions:x=!1,suggestionsPlacement:b="below",portalName:w,fullWidth:A=!1,title:T,asMenu:k,...L})=>{let[,M]=(0,h.useState)(0),D=(0,l.Lf)(L),P=(0,h.useRef)(null);(0,c.T)(y.ref??I,P);let O=function(e,t){if(h.Children.only(e),t.current&&!(t.current instanceof HTMLInputElement)&&!(t.current instanceof HTMLTextAreaElement))throw TypeError("AutocompleteTextarea child must be a component that forwards a ref and props to an <input> or <textarea> element.");return e}(y,P),F=(0,o.H)({inputRef:P,fallbackEventHandler:O.props.onChange??I}),U=(0,h.useRef)(null),B=null!==t&&t.length>0,[q,$]=(0,h.useState)(),G=Array.isArray(t)?t.find(e=>E(e)===q)??t[0]:void 0;q&&!B&&$(void 0),(0,h.useEffect)(()=>{if(B){let e=(0,a.n)(()=>M(e=>e+1),100);return document.addEventListener("scroll",e,{capture:!0}),()=>{document.removeEventListener("scroll",e,{capture:!0})}}},[B]);let W=P.current&&U.current&&B?new m.Qr(P.current,(j(P.current)??0)-U.current.query.length).getBoundingClientRect():{top:0,left:0,height:0},V=e=>{if(!G||!Array.isArray(t))return;let n=e=>{$(e?E(e):void 0)};switch(e){case"up":n(t[t.indexOf(G)-1]??t.at(-1));break;case"down":n(t[t.indexOf(G)+1]??t[0]);break;case"start":n(t[0]);break;case"end":n(t.at(-1))}},Q=(e=G)=>{if(!e)return;let t=(e=>"object"==typeof e&&null===e.value)(e),n=S(e)??"";if(!P.current||!U.current)return;let{query:r,trigger:a}=U.current,i=j(P.current)??0,s=r.length+a.triggerChar.length,o=i-s,l=t||(a.keepTriggerCharOnCommit??!0)?a.triggerChar:"",c=!t&&(a.insertSpaceOnCommit??!0),d=`${l}${n}${c?" ":""}`;p(),F(d,[o,o+s]),f?.({suggestion:e,trigger:a,query:r,target:P.current})},H=(0,h.useId)(),z=e=>`${H}-${E(e)}`,K=!k,X=(0,h.cloneElement)(O,{...D,onBlur:C(O.props.onBlur,()=>{p()}),onKeyDownCapture:C(O.props.onKeyDownCapture,e=>{if(B)switch(e.key){case"ArrowRight":case"ArrowLeft":p();break;case"Tab":x||p()}}),onChange:C(O.props.onChange,t=>{let r=j(t.currentTarget);if(null===r)return void p();let a=((e,t,n)=>{let r=e.sort((e,t)=>t.triggerChar.length-e.triggerChar.length);for(let e=n-1,a="",i=r;e>=0&&i.length>0;e--){let n=t[e]??"";for(let r of(a=n+a,_.has(n)&&(i=i.filter(e=>e.multiWord)),v.has(n)&&(i=i.filter(e=>!e.multiWord)),i.filter(e=>a.startsWith(e.triggerChar)))){let n=t[e-1]??"",s=a[1]??"";if((!n||/[\s([]/.test(n))&&(!s||!/\s/.test(s)))return{trigger:r,query:a.slice(r.triggerChar.length)};i=i.filter(e=>e!==r)}}return null})(e,t.currentTarget.value,r);U.current=a&&{...a,target:t.currentTarget},U.current?n(U.current):p()}),ref:P,role:B&&K?"combobox":O.props.role,"aria-expanded":B&&K?"true":O.props["aria-expanded"],"aria-activedescendant":G?z(G):O.props["aria-activedescendant"],"aria-controls":B&&K?H:O.props["aria-controls"],"aria-owns":B&&k?H:O.props["aria-owns"],"aria-autocomplete":B&&K?"list":O.props["aria-autocomplete"],"aria-haspopup":B&&K?"listbox":O.props["aria-haspopup"]}),J=B?"loading"===t?"Loading autocomplete suggestions\u2026":K?`${t.length} autocomplete ${1===t.length?"suggestion":"suggestions"} available; "${S(t[0])}" is highlighted. Press ${x?"Enter or Tab":"Enter"} to select.`:"":"";return(0,r.jsxs)(s.tL,{commands:B?{"github:cancel":()=>p(),"github:select":()=>Q(),"github:focus-next":x?()=>Q():void 0,"github:down":()=>V("down"),"github:up":()=>V("up"),"github:go-to-start":()=>V("start"),"github:go-to-end":()=>V("end")}:{},className:(0,u.$)(N.container,A&&N.fullWidth),style:g,children:[X,i.KJ&&(0,r.jsx)(R,{id:H,suggestions:t,inputRef:P,onCommit:Q,onClose:p,triggerCharCoords:W,visible:B,defaultPlacement:b,portalName:w,activeSuggestion:G,getSuggestionId:z,menuTitle:T,role:k?"menu":"listbox"}),i.KJ&&(0,r.jsx)(d.Z,{children:(0,r.jsx)("span",{"aria-live":"assertive","aria-atomic":!0,style:{clipPath:"circle(0)",position:"absolute"},children:J})})]})};try{A.displayName||(A.displayName="InlineAutocomplete")}catch{}},51880:(e,t,n)=>{n.d(t,{B:()=>l});var r=n(74848),a=n(29731),i=n(34164),s=n(24347);let o={container:"LeadingContent-module__container--cui6v",isSelectable:"LeadingContent-module__isSelectable--EzWvg"},l=({style:e,className:t,children:n})=>{let{isSelectable:l}=(0,s.v)();return(0,r.jsx)("div",{className:(0,i.$)(o.container,l&&o.isSelectable,t),...(0,a.G)("list-view-item-leading-content"),style:e,children:n})};try{l.displayName||(l.displayName="ListItemLeadingContent")}catch{}},65964:(e,t,n)=>{n.d(t,{e:()=>p});var r=n(74848),a=n(29731),i=n(30729),s=n(34164),o=n(96540),l=n(35220);let c={outer:"LeadingVisual-module__outer--qS9Ac",hasNewActivity:"LeadingVisual-module__hasNewActivity--qA_H9",defaultVariant:"LeadingVisual-module__defaultVariant--Qhbnu",inner:"LeadingVisual-module__inner--GeEeG"};var d=n(49744),u=n(27603);let m={container:"UnreadIndicator-module__container--X6F4o"},h=()=>(0,r.jsx)("div",{className:m.container,children:(0,r.jsx)("span",{className:"sr-only",...(0,a.G)("list-view-item-unread-indicator"),children:"New activity."})});try{h.displayName||(h.displayName="ListItemUnreadIndicator")}catch{}function p({icon:e,color:t,description:n,newActivity:m=!1,className:p,children:f,...g}){let{variant:y}=(0,l.e)(),{setStatus:x}=(0,u.x)(),{setHasNewActivity:_}=(0,d.I)(),v=n?.trim();return(0,o.useEffect)(()=>{_(m)},[m,_]),(0,o.useEffect)(()=>{v&&x(v)},[x,v]),(0,r.jsxs)("div",{className:(0,s.$)(c.outer,"default"===y&&c.defaultVariant,m&&c.hasNewActivity,p),...g,children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{...(0,a.G)("list-view-leading-visual"),className:c.inner,children:[e&&(0,r.jsx)(i.A,{"aria-label":"",icon:e,color:t}),f,v&&(0,r.jsx)("span",{className:"sr-only",...(0,a.G)("leading-visual-text-description"),children:v})]})}),m&&(0,r.jsx)(h,{})]})}try{p.displayName||(p.displayName="ListItemLeadingVisual")}catch{}},4929:(e,t,n)=>{n.d(t,{V:()=>o});var r=n(74848),a=n(29731),i=n(34164);let s={metadata:"Metadata-module__metadata--ODMG0",secondary:"Metadata-module__secondary--1te4w",primary:"Metadata-module__primary--S8Orc",alignRight:"Metadata-module__alignRight--A1PHa"};function o({children:e,alignment:t,variant:n,...o}){return(0,r.jsx)("div",{...(0,a.G)("list-view-item-metadata-item"),...o,className:(0,i.$)(s.metadata,"primary"===n?s.primary:s.secondary,"right"===t&&s.alignRight,o.className),children:e})}try{o.displayName||(o.displayName="ListItemMetadata")}catch{}},95378:(e,t,n)=>{n.d(t,{kx:()=>C,ao:()=>E});var r,a,i=n(74848),s=n(20263),o=n(73017),l=n(29731),c=n(34164),d=n(96540),u=n(56825),m=n(35220),h=n(87670),p=n(87826),f=n(24347);let g={container:"Selection-module__container--OQE4d",containerWithDragHandle:"Selection-module__containerWithDragHandle--mLWh4",dragTrigger:"Selection-module__dragTrigger--SM4bZ",compact:"Selection-module__compact--azMKM",checkbox:"Selection-module__checkbox--X3ras",checkboxCompact:"Selection-module__checkboxCompact--zfQtx"};var y=n(60257),x=n(74501);let _=()=>{let{variant:e}=(0,m.e)(),{isSelectable:t,hasDragHandle:n}=(0,f.v)(),{isSelected:r,onSelect:a}=(0,y.r)(),{title:s}=(0,x.J)();return t?(0,i.jsxs)("div",{className:n?g.containerWithDragHandle:g.container,...(0,l.G)("list-view-item-selection"),children:[n&&(0,i.jsx)(h.BS.DragTrigger,{className:(0,c.$)(g.dragTrigger,"compact"===e&&g.compact)}),(0,i.jsx)(p.A,{className:"default"===e?g.checkbox:g.checkboxCompact,checked:r,onChange:()=>a(!r),"aria-label":`Select: ${s}`,"data-listview-component":"selection-input",...(0,l.G)("list-view-item-selection-input")})]}):null};try{_.displayName||(_.displayName="ListItemSelection")}catch{}let v={anchor:"Title-module__anchor--GmXUE",heading:"Title-module__heading--s7YnL",compact:"Title-module__compact--eK6hD",container:"Title-module__container--XD9YG",trailingBadgesSpacer:"Title-module__trailingBadgesSpacer--Son9W",trailingBadgesContainer:"Title-module__trailingBadgesContainer--mijcn",inline:"Title-module__inline--oM0P7"};function S({children:e,containerStyle:t,containerClassName:n,headerContainerRef:r,headingStyle:a,headingClassName:s,headingRef:o,leadingBadge:d,trailingBadges:h,header:p}){let{variant:f}=(0,m.e)(),{headingRef:g}=(0,x.J)(),y=(0,u.m)("listitem");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{...(0,l.G)("list-view-item-title-container"),style:t,className:(0,c.$)(v.container,"compact"===f&&v.compact,n),ref:r,children:[(0,i.jsxs)(y,{className:(0,c.$)(v.heading,"compact"===f&&v.compact,s),style:a,ref:e=>{if(g&&(g.current=e),o&&"current"in o)try{o.current=e}catch{}},...(0,l.G)("list-view-item-title"),children:[d,p]}),h&&(0,i.jsx)("span",{className:v.trailingBadgesSpacer}),(0,i.jsx)("span",{className:v.trailingBadgesContainer,children:h}),e]}),(0,i.jsx)(_,{})]})}function E({children:e,value:t,containerStyle:n,containerClassName:r,headerContainerRef:a,headingStyle:s,headingClassName:o,headingRef:l,leadingBadge:c,trailingBadges:u,anchorRef:m,...h}){let p=(0,d.useRef)(null),f=m||p;return w({anchorRef:f,...h}),(0,i.jsx)(S,{header:h.href||h.onClick?(0,i.jsx)(b,{anchorRef:f,...h,children:(0,i.jsx)("span",{children:t})}):(0,i.jsx)("span",{children:t}),containerStyle:n,containerClassName:r,headerContainerRef:a,headingStyle:s,headingClassName:o,headingRef:l,leadingBadge:c,trailingBadges:u,children:e})}function C({children:e,html:t,containerStyle:n,containerClassName:r,headerContainerRef:a,headingStyle:o,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,...m}){return w(m),(0,i.jsx)(S,{header:(0,i.jsx)(s.BC,{html:t,...m}),containerStyle:n,containerClassName:r,headerContainerRef:a,headingStyle:o,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,children:e})}function b({anchorStyle:e,anchorClassName:t,anchorRef:n,linkProps:r,children:a,...s}){let{as:o="a",...u}=r??{},m=(0,d.useRef)(null);return(0,i.jsx)(o,{...(0,l.G)("listitem-title-link"),style:e,ref:n||m,className:(0,c.$)(v.anchor,v.inline,t),...s,...u,children:a})}let w=({href:e,onClick:t,anchorRef:n})=>{let{setTitleAction:r,headingRef:a}=(0,x.J)();return(0,d.useEffect)(()=>{(e||t)&&r(()=>t=>{if(e&&(t.metaKey||t.ctrlKey))window.open(e,"_blank");else if(n?.current)n.current.click();else if(a?.current){let e=a.current.querySelector("a, button");e&&e.click()}})},[n,a,e,t,r]),null};try{S.displayName||(S.displayName="InternalTitle")}catch{}try{(r=TitleTag).displayName||(r.displayName="TitleTag")}catch{}try{E.displayName||(E.displayName="ListItemTitle")}catch{}try{C.displayName||(C.displayName="ListItemSafeHTMLTitle")}catch{}try{(a=function({children:e,html:t,containerStyle:n,containerClassName:r,headerContainerRef:a,headingStyle:s,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,...m}){return w(m),(0,i.jsx)(S,{header:(0,i.jsx)(o.JR,{html:t,...m}),containerStyle:n,containerClassName:r,headerContainerRef:a,headingStyle:s,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,children:e})}).displayName||(a.displayName="ListItemUnsafeHTMLTitle")}catch{}try{b.displayName||(b.displayName="HeadingLink")}catch{}},39345:(e,t,n)=>{n.d(t,{T:()=>f});var r=n(74848),a=n(21728);let i={content:"NewAgentTaskForm-module__content--VKy1a",header:"NewAgentTaskForm-module__header--ov_IU",skeleton:"NewAgentTaskForm-module__skeleton--AzvZ1"};var s=n(79512),o=n(2635),l=n(30721),c=n(18312),d=n(6011),u=n(78314),m=n(55899),h=n(22337);let p=(0,l.E7)();function f(e){let t,n,l,f,g,y=(0,a.c)(17),{createTask:x,currentRepo:_,onCreate:v,showHeader:S,hideRepoSelector:E,eventType:C}=e,b=void 0===S||S,w=(0,h.o)(),R=(0,u.t)(),N=_||R;y[0]!==x||y[1]!==C||y[2]!==v?(t=async(e,t,n,r)=>{let a=e.trim();""!==a&&t&&(x({id:(0,m.u)(),nwo:t.nameWithOwner,problemStatement:a,baseRef:n||t.defaultBranch,eventType:C,subagent:r}),v?.())},y[0]=x,y[1]=C,y[2]=v,y[3]=t):t=y[3];let j=t;y[4]!==b?(n=b&&(0,r.jsx)("div",{className:i.header,children:(0,r.jsx)("h2",{className:"f5",children:"New agent task"})}),y[4]=b,y[5]=n):n=y[5];let I=`${i.content} ${b?"":"pt-3"}`;return y[6]!==w||y[7]!==j||y[8]!==E||y[9]!==N?(l=w?(0,r.jsx)(c.RelayEnvironmentProvider,{environment:p,children:(0,r.jsx)(o.Mj,{workerPath:w.findFileWorkerPath,threadId:null,refs:w.refs||[],mode:"immersive",ssoOrganizations:w.ssoOrganizations||[],copilotUpsellBannerDismissed:!0,copilotChatPayload:w,children:(0,r.jsx)(s.Q,{handleUserSubmit:j,initialRepo:N,hideRepoSelector:E})})}):(0,r.jsx)(d.f,{className:i.skeleton}),y[6]=w,y[7]=j,y[8]=E,y[9]=N,y[10]=l):l=y[10],y[11]!==I||y[12]!==l?(f=(0,r.jsx)("div",{className:I,children:l}),y[11]=I,y[12]=l,y[13]=f):f=y[13],y[14]!==n||y[15]!==f?(g=(0,r.jsxs)(r.Fragment,{children:[n,f]}),y[14]=n,y[15]=f,y[16]=g):g=y[16],g}try{f.displayName||(f.displayName="NewAgentTaskForm")}catch{}},49851:(e,t,n)=>{n.d(t,{Dy:()=>l,GS:()=>i,KJ:()=>s,LP:()=>c,OZ:()=>d});var r=n(74848),a=n(21728);let i=e=>{let t,n,i,s,o,l=(0,a.c)(7);l[0]!==e?(t=void 0===e?{}:e,l[0]=e,l[1]=t):t=l[1];let{size:c}=t,d=void 0===c?16:c;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M.5 6v4.5A2.5 2.5 0 0 0 3 13h1.645a3.5 3.5 0 0 1-.11-1.5H3a1 1 0 0 1-1-1V6zM14 6v4.5a1 1 0 0 1-1 1h-1.535a3.5 3.5 0 0 1-.11 1.5H13a2.5 2.5 0 0 0 2.5-2.5V6zm-4 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0",clipRule:"evenodd"}),s=(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M15.5 10V5.5A2.5 2.5 0 0 0 13 3h-1.645a3.5 3.5 0 0 1 .11 1.5H13a1 1 0 0 1 1 1V10zM2 10V5.5a1 1 0 0 1 1-1h1.535a3.5 3.5 0 0 1 .11-1.5H3A2.5 2.5 0 0 0 .5 5.5V10zm4-6a2 2 0 1 1 4 0 2 2 0 0 1-4 0",clipRule:"evenodd"}),l[2]=n,l[3]=i,l[4]=s):(n=l[2],i=l[3],s=l[4]),l[5]!==d?(o=(0,r.jsxs)("svg",{width:d,height:d,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:[i,s]}),l[5]=d,l[6]=o):o=l[6],o},s=e=>{let t,n,i,s,o=(0,a.c)(6);o[0]!==e?(t=void 0===e?{}:e,o[0]=e,o[1]=t):t=o[1];let{size:l}=t,c=void 0===l?16:l;return o[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.515.456a1.555 1.555 0 00-2.2 0L6.58 6.19a1.556 1.556 0 00-.396.673l-.825 2.89a.667.667 0 00.824.824l2.89-.826c.254-.072.485-.209.672-.396l5.735-5.734a1.556 1.556 0 000-2.2l-.965-.965zm-1.257.942a.222.222 0 01.314 0l.965.966a.222.222 0 010 .314L13.415 3.8l-1.28-1.28 1.123-1.122zm-2.065 2.066l1.279 1.279-3.67 3.67a.221.221 0 01-.096.056l-1.736.496.496-1.736c.01-.036.03-.07.057-.096l3.67-3.67zM1.639 4.778a2.25 2.25 0 012.25-2.25h3.154a.75.75 0 000-1.5H3.889a3.75 3.75 0 00-3.75 3.75v7.333a3.75 3.75 0 003.75 3.75h7.333a3.75 3.75 0 003.75-3.75V8.445a.75.75 0 00-1.5 0v3.666a2.25 2.25 0 01-2.25 2.25H3.889a2.25 2.25 0 01-2.25-2.25V4.778z",clipRule:"evenodd"}),o[2]=n,o[3]=i):(n=o[2],i=o[3]),o[4]!==c?(s=(0,r.jsx)("svg",{width:c,height:c,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:i}),o[4]=c,o[5]=s):s=o[5],s},o=e=>{let t,n,i,s,o=(0,a.c)(6);o[0]!==e?(t=void 0===e?{}:e,o[0]=e,o[1]=t):t=o[1];let{size:l}=t,c=void 0===l?16:l;return o[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"}),o[2]=n,o[3]=i):(n=o[2],i=o[3]),o[4]!==c?(s=(0,r.jsx)("svg",{width:c,height:c,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:i}),o[4]=c,o[5]=s):s=o[5],s},l=e=>{let t,n,i,s,o,l=(0,a.c)(7);l[0]!==e?(t=void 0===e?{}:e,l[0]=e,l[1]=t):t=l[1];let{size:c}=t,d=void 0===c?16:c;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{d:"M7.41299 14.25H1.75C1.19772 14.25 0.75 13.8023 0.75 13.25V2.75C0.75 2.19772 1.19772 1.75 1.75 1.75H5C5.31476 1.75 5.61115 1.89819 5.8 2.15L6.7 3.35C6.88885 3.60181 7.18524 3.75 7.5 3.75H14.25C14.8023 3.75 15.25 4.19772 15.25 4.75V8.48779",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),s=(0,r.jsx)("path",{d:"M12.265 9.15977C12.3446 8.94235 12.6521 8.94235 12.7317 9.15977L12.9693 9.80865C13.3464 10.8387 14.158 11.6503 15.1881 12.0274L15.8369 12.265C16.0544 12.3446 16.0544 12.6521 15.8369 12.7317L15.1881 12.9692C14.158 13.3463 13.3464 14.158 12.9693 15.188L12.7317 15.8369C12.6521 16.0543 12.3446 16.0543 12.265 15.8369L12.0275 15.188C11.6504 14.158 10.8387 13.3463 9.80871 12.9692L9.15983 12.7317C8.94241 12.6521 8.94241 12.3446 9.15983 12.265L9.80871 12.0274C10.8387 11.6503 11.6504 10.8387 12.0275 9.80865L12.265 9.15977Z",fill:"currentColor"}),l[2]=n,l[3]=i,l[4]=s):(n=l[2],i=l[3],s=l[4]),l[5]!==d?(o=(0,r.jsxs)("svg",{width:d,height:d,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:[i,s]}),l[5]=d,l[6]=o):o=l[6],o},c=e=>{let t,n,i,s,o,l=(0,a.c)(7);l[0]!==e?(t=void 0===e?{}:e,l[0]=e,l[1]=t):t=l[1];let{size:c}=t,d=void 0===c?16:c;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{d:"M16.0376 9.67565V5.82038C16.0376 5.69043 15.9257 5.58508 15.7876 5.58508H11.6914C11.4687 5.58508 11.3571 5.83853 11.5146 5.98676L15.6108 9.84196C15.7683 9.99019 16.0376 9.88525 16.0376 9.67565Z",fill:"currentColor"}),s=(0,r.jsx)("path",{d:"M1.89601 3.25629C4.26064 1.03075 8.04807 0.960969 10.5015 3.04765L10.7339 3.25629L10.7857 3.3096C11.0259 3.58685 11.0085 3.99602 10.7339 4.25445C10.4593 4.51252 10.0254 4.52825 9.73097 4.30225L9.67336 4.25445L9.4966 4.09544C7.63201 2.50983 4.75358 2.56313 2.95656 4.25445C1.10158 6.00031 1.10158 8.83023 2.95656 10.5761C4.81155 12.322 7.8184 12.3219 9.67336 10.5761L13.563 6.91622C13.8559 6.64063 14.3307 6.64058 14.6236 6.91622C14.9163 7.19186 14.9163 7.63873 14.6236 7.91438L10.7339 11.5752C8.29328 13.8718 4.33667 13.8718 1.89601 11.5752C-0.544758 9.27799 -0.544771 5.55349 1.89601 3.25629Z",fill:"currentColor"}),l[2]=n,l[3]=i,l[4]=s):(n=l[2],i=l[3],s=l[4]),l[5]!==d?(o=(0,r.jsxs)("svg",{width:d,height:d,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:[i,s]}),l[5]=d,l[6]=o):o=l[6],o},d={compose:s,dice:o,loops:c,node:i,spaces:l};try{i.displayName||(i.displayName="NodeIcon")}catch{}try{s.displayName||(s.displayName="ComposeIcon")}catch{}try{o.displayName||(o.displayName="DiceIcon")}catch{}try{l.displayName||(l.displayName="SpacesIcon")}catch{}try{c.displayName||(c.displayName="LoopsIcon")}catch{}},82595:(e,t,n)=>{n.d(t,{I:()=>d});var r=n(74848),a=n(21728),i=n(34164),s=n(49851),o=n(38621);let l={container:"Icon-module__container--stxcA",customColor:"Icon-module__customColor--dELU9",hasBackground:"Icon-module__hasBackground--xipmb",auburn:"Icon-module__auburn--YGPGc",blue:"Icon-module__blue--YHcrq",brown:"Icon-module__brown--HcCTh",coral:"Icon-module__coral--oTikb",cyan:"Icon-module__cyan--h419p",gray:"Icon-module__gray--VfK1C",green:"Icon-module__green--DZFaM",indigo:"Icon-module__indigo--VVAUE",lemon:"Icon-module__lemon--pOsfR",lime:"Icon-module__lime--qwkv8",olive:"Icon-module__olive--UDJGA",orange:"Icon-module__orange--Zpvu1",pine:"Icon-module__pine--w0tcb",pink:"Icon-module__pink--ai8ga",plum:"Icon-module__plum--IYN4u",purple:"Icon-module__purple--rFSpj",red:"Icon-module__red--OLgIH",teal:"Icon-module__teal--eysuL",yellow:"Icon-module__yellow--UE4Kb"},c=new Set(Object.keys(l).filter(e=>!["container","hasBackground","customColor"].includes(e)));function d(e){let t,n,d,u,m,h,p=(0,a.c)(19),{icon:f,hasBackground:g,color:y,size:x,className:_}=e,v=void 0!==g&&g,S=void 0===y?"gray":y,E=void 0===x?16:x;if("string"==typeof f)if(f in s.OZ)t=s.OZ[f];else{let e;p[0]!==f?(e=function(e){let t=`${e.replaceAll(/(?:^|-)(\w)/g,(e,t)=>t.toUpperCase())}Icon`;return t in o?o[t]:void 0}(f),p[0]=f,p[1]=e):e=p[1],t=e}else t=f;if(!t)return null;p[2]!==S?(n=c.has(S),p[2]=S,p[3]=n):n=p[3];let C=n,b=`${v?2*E:E}px`;p[4]!==S||p[5]!==C||p[6]!==b?(d={"--custom-size":b},C||(d["--custom-color"]=S),p[4]=S,p[5]=C,p[6]=b,p[7]=d):d=p[7];let w=C?l[S]:l.customColor,R=v&&l.hasBackground;return p[8]!==_||p[9]!==w||p[10]!==R?(u=(0,i.$)(l.container,w,R,_),p[8]=_,p[9]=w,p[10]=R,p[11]=u):u=p[11],p[12]!==t||p[13]!==E?(m=(0,r.jsx)(t,{size:E,fill:"currentColor"}),p[12]=t,p[13]=E,p[14]=m):m=p[14],p[15]!==d||p[16]!==u||p[17]!==m?(h=(0,r.jsx)("div",{style:d,className:u,children:m}),p[15]=d,p[16]=u,p[17]=m,p[18]=h):h=p[18],h}try{d.displayName||(d.displayName="Icon")}catch{}},30388:(e,t,n)=>{n.d(t,{qJ:()=>S});var r=n(74848),a=n(21728),i=n(96540),s=n(13017),o=n(19342);let l={container:"ListBlock-module__container--QbgMo",header:"ListBlock-module__header--meKIf",list:"ListBlock-module__list--YHbt4",emptyState:"ListBlock-module__emptyState--MymTD",item:"ListBlock-module__item--xlbmd",itemButton:"ListBlock-module__itemButton--o9fcO",actions:"ListBlock-module__actions--LfUWo",leadingVisual:"ListBlock-module__leadingVisual--tOjGr",title:"ListBlock-module__title--MZAST",description:"ListBlock-module__description--dTYnl",metadata:"ListBlock-module__metadata--gtl9k",skeletonItem:"ListBlock-module__skeletonItem--ZfJMT"};function c(e){let t,n=(0,a.c)(2),{children:i}=e;return n[0]!==i?(t=(0,r.jsx)("div",{className:l.container,children:i}),n[0]=i,n[1]=t):t=n[1],t}function d(e){let t,n=(0,a.c)(2),{children:i}=e;return n[0]!==i?(t=(0,r.jsx)("div",{className:l.header,children:i}),n[0]=i,n[1]=t):t=n[1],t}function u(e){let t,n,i,s,o=(0,a.c)(11);if(o[0]!==e?({children:t,loading:i,...n}=e,o[0]=e,o[1]=t,o[2]=n,o[3]=i):(t=o[1],n=o[2],i=o[3]),void 0!==i&&i){let e,t;return o[4]===Symbol.for("react.memo_cache_sentinel")?(e=[void 0,void 0,void 0,void 0,void 0].map(m),o[4]=e):e=o[4],o[5]!==n||o[6]!==e?(t=(0,r.jsx)("ul",{className:l.list,"data-testid":"list-block-skeleton",...n,children:e}),o[5]=n,o[6]=e,o[7]=t):t=o[7],t}return o[8]!==t||o[9]!==n?(s=(0,r.jsx)("ul",{className:l.list,...n,children:t}),o[8]=t,o[9]=n,o[10]=s):s=o[10],s}function m(e,t){return(0,r.jsx)(f,{},t)}function h(e){let t,n,o,c,d,u=(0,a.c)(39),m=null,h=null,f=null,v=null,S=null;if(u[0]!==e.children){for(let t of i.Children.toArray(e.children))i.isValidElement(t)&&(t.type===g?m=t:t.type===y?h=t:t.type===x?f=t:t.type===_?v=t:t.type===p&&(S=t));u[0]=e.children,u[1]=m,u[2]=h,u[3]=f,u[4]=v,u[5]=S}else m=u[1],h=u[2],f=u[3],v=u[4],S=u[5];u[6]!==f||u[7]!==m||u[8]!==v||u[9]!==h?(t=(0,r.jsxs)(r.Fragment,{children:[m,h,f,v]}),u[6]=f,u[7]=m,u[8]=v,u[9]=h,u[10]=t):t=u[10];let E=t;if("href"in e){let t,n,a,i,o;if(u[11]!==e?({href:t,isExternalLink:a,...n}=e,u[11]=e,u[12]=t,u[13]=n,u[14]=a):(t=u[12],n=u[13],a=u[14]),void 0!==a&&a){let e,a;return u[15]!==E||u[16]!==t||u[17]!==n?(e=(0,r.jsx)("a",{href:t,className:l.itemButton,target:"_self",rel:"noopener noreferrer",...n,children:E}),u[15]=E,u[16]=t,u[17]=n,u[18]=e):e=u[18],u[19]!==S||u[20]!==e?(a=(0,r.jsxs)("li",{className:l.item,children:[e,S]}),u[19]=S,u[20]=e,u[21]=a):a=u[21],a}return u[22]!==E||u[23]!==t||u[24]!==n?(i=(0,r.jsx)(s.N_,{...n,to:t,className:l.itemButton,children:E}),u[22]=E,u[23]=t,u[24]=n,u[25]=i):i=u[25],u[26]!==S||u[27]!==i?(o=(0,r.jsxs)("li",{className:l.item,children:[i,S]}),u[26]=S,u[27]=i,u[28]=o):o=u[28],o}return u[29]!==e?({onClick:n,...o}=e,u[29]=e,u[30]=n,u[31]=o):(n=u[30],o=u[31]),u[32]!==E||u[33]!==n||u[34]!==o?(c=(0,r.jsx)("button",{...o,className:l.itemButton,onClick:n,type:"button",children:E}),u[32]=E,u[33]=n,u[34]=o,u[35]=c):c=u[35],u[36]!==S||u[37]!==c?(d=(0,r.jsxs)("li",{className:l.item,children:[c,S]}),u[36]=S,u[37]=c,u[38]=d):d=u[38],d}function p(e){let t,n=(0,a.c)(2),{children:i}=e;return n[0]!==i?(t=(0,r.jsx)("div",{className:l.actions,children:i}),n[0]=i,n[1]=t):t=n[1],t}function f(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("li",{className:l.item,children:(0,r.jsx)("div",{className:l.skeletonItem,children:(0,r.jsx)(o.r,{lines:2})})}),t[0]=e):e=t[0],e}function g(e){let t,n=(0,a.c)(2),{children:i}=e;return n[0]!==i?(t=(0,r.jsx)("div",{className:l.leadingVisual,children:i}),n[0]=i,n[1]=t):t=n[1],t}function y(e){let t,n=(0,a.c)(2),{children:i}=e;return n[0]!==i?(t=(0,r.jsx)("div",{className:l.title,children:i}),n[0]=i,n[1]=t):t=n[1],t}function x(e){let t,n=(0,a.c)(2),{children:i}=e;return n[0]!==i?(t=(0,r.jsx)("div",{className:l.description,children:i}),n[0]=i,n[1]=t):t=n[1],t}function _(e){let t,n=(0,a.c)(2),{children:i}=e;return n[0]!==i?(t=(0,r.jsx)("div",{className:l.metadata,children:i}),n[0]=i,n[1]=t):t=n[1],t}function v(e){let t,n=(0,a.c)(2),{children:i}=e;return n[0]!==i?(t=(0,r.jsx)("li",{className:l.emptyState,children:i}),n[0]=i,n[1]=t):t=n[1],t}h.LeadingVisual=g,h.Title=y,h.Description=x,h.SecondaryDescription=_,h.Metadata=_,h.Actions=p,h.Skeleton=f;let S=c;S.Header=d,S.List=u,S.Item=h,S.EmptyState=v,S.displayName="ListBlock",d.displayName="ListBlock.Header",u.displayName="ListBlock.List",h.displayName="ListBlock.Item",g.displayName="ListBlock.Item.LeadingVisual",y.displayName="ListBlock.Item.Title",x.displayName="ListBlock.Item.Description",_.displayName="ListBlock.Item.Metadata",p.displayName="ListBlock.Item.Actions",f.displayName="ListBlock.Item.Skeleton",v.displayName="ListBlock.EmptyState";try{c.displayName||(c.displayName="ListBlock")}catch{}},25556:(e,t,n)=>{n.d(t,{m:()=>g});var r=n(74848),a=n(11683),i=n(96540),s=n(59299),o=n(44999),l=n(16255),c=n(34164);let d=n(38267).Ay.span.withConfig({displayName:"ControlledTooltip__TooltipBase",componentId:"sc-b39269ff-0"})(["&::after{position:absolute;z-index:1000000;display:none;padding:0.5em 0.75em;font:normal normal 11px/1.5 ",";-webkit-font-smoothing:subpixel-antialiased;color:",";text-align:center;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;white-space:pre;pointer-events:none;content:attr(data-visible-text);background:",";border-radius:",";opacity:0;}@keyframes tooltip-appear{from{opacity:0;}to{opacity:1;}}&.tooltipped-open,&:hover,&:active,&:focus{&::after{display:inline-block;text-decoration:none;animation-name:tooltip-appear;animation-duration:0.1s;animation-fill-mode:forwards;animation-timing-function:ease-in;animation-delay:0s;}}&.tooltipped-no-delay.tooltipped-open,&.tooltipped-no-delay:hover,&.tooltipped-no-delay:active,&.tooltipped-no-delay:focus{&::after{animation-delay:0s;}}&.tooltipped-s,&.tooltipped-se,&.tooltipped-sw{&::after{top:100%;right:50%;margin-top:6px;}}&.tooltipped-se{&::after{right:auto;left:50%;margin-left:-",";}}&.tooltipped-sw::after{margin-right:-",";}&.tooltipped-n,&.tooltipped-ne,&.tooltipped-nw{&::after{right:50%;bottom:100%;margin-bottom:6px;}}&.tooltipped-ne{&::after{right:auto;left:50%;margin-left:-",";}}&.tooltipped-nw::after{margin-right:-",";}&.tooltipped-s::after,&.tooltipped-n::after{transform:translateX(50%);}&.tooltipped-w{&::after{right:100%;bottom:50%;margin-right:6px;transform:translateY(50%);}}&.tooltipped-e{&::after{bottom:50%;left:100%;margin-left:6px;transform:translateY(50%);}}&.tooltipped-align-right-2::after{right:0;margin-right:0;}&.tooltipped-align-left-2::after{left:0;margin-left:0;}",";"],(0,s.Jt)("fonts.normal"),(0,s.Jt)("colors.fg.onEmphasis"),(0,s.Jt)("colors.neutral.emphasisPlus"),(0,s.Jt)("radii.2"),(0,s.Jt)("space.3"),(0,s.Jt)("space.3"),(0,s.Jt)("space.3"),(0,s.Jt)("space.3"),o.A),u=()=>()=>void 0,m=()=>!1,h=()=>!0,p=(0,i.forwardRef)(function({direction:e="n",className:t,text:n,noDelay:a,align:s,wrap:o,open:p=!1,portalProps:f={},...g},y){let x=(0,i.useSyncExternalStore)(u,h,m),_=(0,c.$)(t,`tooltipped-${e}`,s&&`tooltipped-align-${s}-2`,a&&"tooltipped-no-delay",o&&"tooltipped-multiline",p&&"tooltipped-open");return x?(0,r.jsx)(l.Z,{...f,children:(0,r.jsx)(d,{ref:y,role:"tooltip","aria-label":n,"data-visible-text":n||g["aria-label"],...g,sx:{position:"fixed",zIndex:1,...g.sx},className:_})}):null});try{p.displayName||(p.displayName="ControlledTooltip")}catch{}var f=n(65787);let g=(0,i.forwardRef)(function({contentRef:e,open:t,anchoredPositionAlignment:n,anchorSide:s,anchorOffset:o,alignmentOffset:l,allowOutOfBounds:c,...d},u){let m=(0,i.useRef)(null);(0,i.useImperativeHandle)(u,()=>m.current);let h=(0,i.useRef)({left:0,top:0}),g=(0,i.useSyncExternalStore)((0,i.useCallback)(n=>{if(!m.current||!e.current||!t)return()=>void 0;let r=(0,f.U)(e.current);return r?.addEventListener("scroll",n),()=>{r?.removeEventListener("scroll",n)}},[e,t]),(0,i.useCallback)(()=>{if(!m.current||!e.current)return h.current;let t=(0,a.uG)(m.current,e.current,{align:n??"center",side:s??"outside-top",alignmentOffset:l??0,anchorOffset:o??0,allowOutOfBounds:c});return(t.left!==h.current.left||t.top!==h.current.top)&&(h.current=t),h.current},[e,l,o,n,s,c]),(0,i.useCallback)(()=>h.current,[]));return(0,r.jsx)(p,{...d,ref:m,open:t,style:{position:"absolute",...g,...d.style}})});try{g.displayName||(g.displayName="PortalTooltip")}catch{}},50129:(e,t,n)=>{n.d(t,{Kg:()=>o,Yu:()=>l});var r=n(74848),a=n(21728),i=n(96540);let s=(0,i.createContext)(null);function o(e){let t,n,i,o=(0,a.c)(5),{children:l,basePageDataUrl:c}=e;return o[0]!==c?(n={basePageDataUrl:c},o[0]=c,o[1]=n):n=o[1],t=n,o[2]!==l||o[3]!==t?(i=(0,r.jsx)(s.Provider,{value:t,children:l}),o[2]=l,o[3]=t,o[4]=i):i=o[4],i}function l(){let e=(0,i.useContext)(s);if(!e)throw Error("usePageDataContext must be used within a PageDataContextProvider");return e}try{s.displayName||(s.displayName="PageDataContext")}catch{}try{o.displayName||(o.displayName="PageDataContextProvider")}catch{}},20263:(e,t,n)=>{n.d(t,{BC:()=>c,JU:()=>u,Pk:()=>l});var r=n(74848),a=n(75177),i=n(84511),s=n(99418),o=n(96540);let l=m(a.A),c=m(i.A),d=(0,o.forwardRef)((e,t)=>(0,r.jsx)("div",{ref:t,...e}));d.displayName="Div";let u=m(d);function m(e){let t=(0,o.forwardRef)((t,n)=>{let{sanitizedHTML:a,props:i}=function(e){let{html:t,domPurifyConfig:n,...r}=e,a={...n,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1};return{sanitizedHTML:s.default.sanitize(t,a),props:r}}(t);return(0,r.jsx)(e,{ref:n,...i,dangerouslySetInnerHTML:{__html:a}})});return t.displayName=`UnsafeHTML${e.displayName||e.name}`,t}try{u.displayName||(u.displayName="UnsafeHTMLDiv")}catch{}},94195:(e,t,n)=>{n.d(t,{Gy:()=>c,LB:()=>p,nn:()=>f,lm:()=>m});var r=n(74848),a=n(96540);let i=null,s=null,o=new Set;function l(e){return o.add(e),i||(i=new ResizeObserver(()=>{s||(s=requestAnimationFrame(()=>{for(let e of(s=null,o))e()}))})).observe(document.documentElement),()=>{o.delete(e),0===o.size&&i&&(i.disconnect(),i=null)}}let c={small:1,medium:544,large:768,xlarge:1012,xxlarge:1280,xxxlarge:1350,xxxxlarge:1440},d=[c.xxxxlarge,c.xxxlarge,c.xxlarge,c.xlarge,c.large,c.medium,c.small],u=a.createContext({screenSize:c.small});function m(){return a.useContext(u)}function h(){return f(window.innerWidth)}function p({children:e,initialValue:t=c.small}){let n=(0,a.useSyncExternalStore)(l,h,(0,a.useCallback)(()=>t,[t])),i=(0,a.useMemo)(()=>({screenSize:n}),[n]);return(0,r.jsx)(u.Provider,{value:i,children:e})}function f(e){for(let t of d)if(e>=t)return t;return c.small}try{u.displayName||(u.displayName="ScreenContext")}catch{}try{p.displayName||(p.displayName="ScreenSizeProvider")}catch{}},33544:(e,t,n)=>{n.d(t,{x:()=>g});var r=n(74848),a=n(38621),i=n(75177),s=n(69410),o=n(81246),l=n(5945),c=n(52446),d=n(13017),u=n(96540),m=n(11083),h=n(62227),p=n(34164),f=n(69599);function g({className:e,portalContainerName:t,protectedOrgs:n,maxVisibleOrgNames:l=3,redirectURI:c,useFullWidthStyle:g,forceWrap:_,sx:v}){let S=(0,d.zy)(),E=(0,u.useRef)(!1);if((0,u.useEffect)(()=>{(0,f.G7)("record_sso_banner_metrics")&&!E.current&&n&&n.length>0&&((0,m.i)({incrementKey:(0,f.G7)("global_sso_banner")?"LEGACY_SSO_BANNER_DISPLAYED_WITH_GLOBAL_BANNER_ENABLED":"LEGACY_SSO_BANNER_DISPLAYED",requestUrl:window.location.href}),E.current=!0)},[n]),!n||0===n.length)return null;let C=Math.max(0,n.length-l),b=1===n.length||C>0?(0,r.jsx)("b",{children:n.slice(0,l).join(", ")}):(0,r.jsxs)("span",{children:[(0,r.jsx)("b",{children:n.slice(0,n.length-1).join(", ")}),n.length>2&&","," and ",(0,r.jsx)("b",{children:n[n.length-1]})]});return(0,r.jsx)(i.A,{sx:v,className:e,"data-testid":"sso-banner",children:(0,r.jsx)("div",{className:h.A.Box,children:(0,r.jsx)("section",{"aria-label":"Single sign-on information",children:(0,r.jsx)(s.A,{sx:{borderRadius:2*!g,borderWidth:g?"1px 0":1},className:h.A.Flash,children:1===n.length?(0,r.jsxs)("div",{children:[(0,r.jsx)(a.ShieldLockIcon,{className:h.A.ShieldLockIcon}),(0,r.jsx)(o.A,{inline:!0,href:`/orgs/${n[0]}/sso?return_to=${x({location:S,redirectURI:c})}`,children:"Single sign-on"})," ","to see results in the ",(0,r.jsx)("b",{children:n[0]})," organization."]}):(0,r.jsxs)("div",{className:h.A.Box_1,children:[(0,r.jsx)(a.ShieldLockIcon,{className:h.A.Octicon}),(0,r.jsxs)("div",{className:(0,p.$)(h.A.Box_2,_&&h.A.ForceWrap),children:[(0,r.jsxs)("p",{className:h.A.ProtectedOrgs_FullList,children:["Single sign-on to see results in ",0===C&&"the ",l>0&&(0,r.jsxs)(r.Fragment,{children:[b," "]}),C>0&&(0,r.jsxs)(r.Fragment,{children:[l>0&&"and ",C," other"," "]}),n.length>1&&1!==C?"organizations":"organization","."]}),(0,r.jsx)("p",{className:h.A.ProtectedOrgs_Shortened,children:"Single sign-on to see results in your organizations"}),(0,r.jsx)("div",{style:{flexShrink:0},children:(0,r.jsx)(y,{portalContainerName:t,protectedOrgs:n,redirectURI:c})})]})]})})})})})}function y({portalContainerName:e,protectedOrgs:t,redirectURI:n}){let a=(0,d.zy)();return(0,r.jsxs)(l.W,{children:[(0,r.jsx)(l.W.Button,{size:"small",children:"Select an organization"}),(0,r.jsx)(l.W.Overlay,{portalContainerName:e,children:(0,r.jsx)(c.l,{children:t.map(e=>(0,r.jsx)(c.l.Item,{onSelect:()=>{window.location.href=`/orgs/${encodeURIComponent(e)}/sso?return_to=${x({location:a,redirectURI:n})}`},children:e},`org-${e}`))})})]})}function x({location:e,redirectURI:t}){return encodeURIComponent(t?t(e):e.pathname+e.search+e.hash)}try{g.displayName||(g.displayName="SingleSignOnBanner")}catch{}try{y.displayName||(y.displayName="SingleSignOnButton")}catch{}}}]);
//# sourceMappingURL=packages_copilot-chat_components_ChatInput_tsx-packages_global-agents-menu_GlobalAgentsMenu_t-f1d2b2-6e6bdc2c42ce.js.map